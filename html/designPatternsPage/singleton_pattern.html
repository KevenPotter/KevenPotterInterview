<!doctype html>
<html lang="en">

<head>
    <title>单例模式</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!-- Javascript -->
    <script type="text/javascript" src="../../assets/vendor/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../assets/vendor/bootstrap/js/bootstrap-paginator.js"></script>
    <script type="text/javascript" src="../../assets/vendor/bootstrap-select/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="../../assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script type="text/javascript" src="../../assets/vendor/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="../../assets/vendor/echarts/theme/macarons.js"></script>
    <script type="text/javascript" src="../../assets/vendor/layer/layer.js"></script>
    <script type="text/javascript" src="../../assets/vendor/laydate/laydate.js"></script>
    <script type="text/javascript" src="../../assets/vendor/blowup/blowup.js"></script>
    <script type="text/javascript" src="../../assets/scripts/klorofil-common.js"></script>
    <script type="text/javascript" src="../../assets/vendor/ui-choose/js/ui-choose.js"></script>
    <script type="text/javascript" src="../../assets/vendor/highlight/highlight.pack.js"></script>
    <!-- VENDOR CSS -->
    <link rel="stylesheet" href="../../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../assets/vendor/bootstrap-select/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="../../assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../assets/vendor/linearicons/style.css">
    <link rel="stylesheet" href="../../assets/vendor/ui-choose/css/ui-choose.css">
    <link rel="stylesheet" href="../../assets/vendor/highlight/styles/solarized-light.css">
    <!-- MAIN CSS -->
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!-- CUSTOMIZE CSS -->
    <link rel="stylesheet" href="../../assets/css/roundButton.css">
    <!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
    <link rel="stylesheet" href="../../assets/css/demo.css">
    <!-- GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
    <!-- ICONS -->
    <link rel="apple-touch-icon" sizes="76x76" href="../../assets/img/apple-icon.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../../assets/img/favicon.png">
</head>

<body>
<!-- WRAPPER -->
<div id="wrapper">
    <!-- NAVBAR -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="brand">
            <a href="../../index.html"><img src="../../assets/img/logo-KevenPotter.png" alt="KevenPotter Logo" class="img-responsive logo"></a>
        </div>
        <div class="container-fluid">
            <div class="navbar-btn">
                <button type="button" class="btn-toggle-fullwidth"><i class="lnr lnr-arrow-left-circle"></i></button>
            </div>
            <form class="navbar-form navbar-left">
                <div class="input-group">
                    <input type="text" value="" class="form-control" placeholder="搜索内容...">
                    <span class="input-group-btn"><button type="button" class="btn btn-primary">Go</button></span>
                </div>
            </form>
        </div>
    </nav>
    <!-- END NAVBAR -->
    <!-- LEFT SIDEBAR -->
    <div id="sidebar-nav" class="sidebar">
        <div class="sidebar-scroll">
            <nav>
                <ul class="nav">
                    <li><a href="../../index.html" class=""><i class="lnr lnr-home"></i> <span>首页</span></a></li>
                    <li>
                        <a href="#distributedPage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-cloud"></i> <span>分布式</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="distributedPage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../distributedPage/distributed_overview.html" class="">分布式概述</a></li>
                                <li><a href="../distributedPage/zookeeper_overview.html" class="">ZooKeeper概述</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a id="design_patterns_page_button" href="#designPatternsPage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-laptop"></i> <span>设计模式</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="designPatternsPage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../designPatternsPage/six_principles.html" class="">六大原则</a></li>
                                <li><a href="../designPatternsPage/singleton_pattern.html" class="active">单例模式</a></li>
                                <li><a href="../designPatternsPage/factory_method_pattern.html" class="">工厂方法模式</a></li>
                                <li><a href="../designPatternsPage/abstract_factory_pattern.html" class="">抽象工厂模式</a></li>
                                <li><a href="../designPatternsPage/template_method_pattern.html" class="">模板方法模式</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="#mysqlPage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-database"></i> <span>数据库</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="mysqlPage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../mysqlPage/mysql-basic-knowledge.html" class="">基础知识</a></li>
                                <li>
                                    <a href="#advanced_knowledge" data-toggle="collapse" class="collapsed"><span>进阶知识</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                                    <div id="advanced_knowledge" class="collapse ">
                                        <ul class="nav">
                                            <li><a href="../mysqlPage/mysql-advanced-knowledge/mysql-advanced-knowledge-index.html" class=""><i class="lnr"></i>索引</a></li>
                                            <li><a href="../mysqlPage/mysql-advanced-knowledge/mysql-advanced-knowledge-stored-procedure.html" class=""><i class="lnr"></i>存储过程</a></li>
                                        </ul>
                                    </div>
                                </li>
                                <li><a href="../mysqlPage/mysql-sub-database_sub-table.html" class="">分库分表</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    <!-- END LEFT SIDEBAR -->
    <!-- MAIN -->
    <div class="main">
        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div class="container-fluid">
                <h3 id="singleton_pattern_definition_tips" class="page-title">单例模式</h3>
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title">单例模式种类</h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="singletonPatternTypes" style="height:600%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title">单例模式通用类图</h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div id="singleton_pattern_generic_class_diagram_panel_body" class="panel-body">
                                <img id="singleton_pattern_generic_class_diagram" style="max-height: 100%; max-width: 100%;" src="../../assets/img/designPatterns/singleton_pattern_generic_class_diagram.png" alt="单例模式通用类图">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title">单例模式的优缺点</h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div id="the_advantages_and_disadvantages_of_the_singleton_pattern_panel_body" class="panel-body">
                                <div id="the_advantages_and_disadvantages_of_the_singleton_pattern" style="height:500%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel">
                            <div class="panel-heading">
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel">
                                <div class="panel-body bold">
                                    <p class="note bold">单例模式使用场景（《设计模式之禅》-P61）</p>
                                    <ol>
                                        <li>要求生成唯一序列号的环境；</li>
                                        <li>在整个项目中需要一个共享访问点或共享数据，例如一个Web页面上的计数器，可以不用把每次刷新都记录到数据库中，使用单例模式保持计数器的值，并确保是线程安全的；</li>
                                        <li>创建一个对象需要消耗的资源过多，如要访问IO和数据库等资源；</li>
                                        <li>需要定义大量的静态常量和静态方法（如工具类）的环境，可以采用单例模式（当然，也可以直接声明为为static的方式）。</li>
                                    </ol>
                                    <p class="note bold">注意事项（《设计模式之禅》-P61）：</p>
                                    <ul>
                                        <li>高并发情况下需要考虑线程同步问题</li>
                                        <li>单例类不要实现Cloneable接口</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END MAIN CONTENT -->
    </div>
    <!-- END MAIN -->
    <div class="clearfix"></div>
    <footer>
        <div class="container-fluid">
            <p class="copyright">Copyright &copy; https://github.com/KevenPotter/KevenPotterInterview <a href="https://github.com/KevenPotter/KevenPotterInterview" target="_blank" title="KevenPotter">KevenPotter</a> - Collect from <a href="https://github.com/KevenPotter" title="Github"
                                                                                                                                                                                                                                          target="_blank">KevenPotter主页</a></p>
        </div>
    </footer>
</div>
<!-- END WRAPPER -->

<!-- 单例模式_静态常量-->
<div id="singletonPattern_staticConstant" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">种类一：静态常量</h3>
    </div>
    <div class="panel-body">
        <pre>
            <code class="java">
class SingleTon_1 {

    // 1.构造器私有化(防止new)
    private SingleTon_1() {
    }

    // 2.在本类内部创建一个对象示实例
    private final static SingleTon_1 instance = new SingleTon_1();

    // 3.向外暴露一个静态的公共方法,返回实例对象-getInstance()
    public static SingleTon_1 getInstance() {
        return instance;
    }
}
            </code>
        </pre>
    </div>
</div>

<!-- 单例模式_静态代码块-->
<div id="singletonPattern_staticCodeBlock" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">种类二：静态代码块</h3>
    </div>
    <div class="panel-body">
        <pre>
            <code class="java">
class SingleTon_2 {

    // 1.构造器私有化(防止new)
    private SingleTon_2() {
    }

    // 2.在本类内部创建一个对象示实例
    private final static SingleTon_2 instance;

    static {
        // 在静态代码块中创建单例对象
        instance = new SingleTon_2();
    }

    // 3.向外暴露一个静态的公共方法,返回实例对象-getInstance()
    public static SingleTon_2 getInstance() {
        return instance;
    }
}
            </code>
        </pre>
    </div>
</div>

<!-- 单例模式_线程不安全-->
<div id="singletonPattern_threadUnsafe" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">种类三：线程不安全</h3>
    </div>
    <div class="panel-body">
        <pre>
            <code class="java">
class SingleTon_3 {

    // 1.构造器私有化(防止new)
    private SingleTon_3() {
    }

    // 2.在本类内部创建一个对象示实例
    private static SingleTon_3 instance;

    // 3.提供一个静态的共有方法,当使用到该方法时,采取创建instance
    public static SingleTon_3 getInstance() {
        if (instance == null) {
            instance = new SingleTon_3();
        }
        return instance;
    }
}
            </code>
        </pre>
    </div>
</div>

<!-- 单例模式_同步方法-->
<div id="singletonPattern_synchronizationMethod" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">种类四：同步方法</h3>
    </div>
    <div class="panel-body">
        <pre>
            <code class="java">
class SingleTon_4 {

    // 1.构造器私有化(防止new)
    private SingleTon_4() {
    }

    // 2.在本类内部创建一个对象示实例
    private static SingleTon_4 instance;

    // 3.提供一个静态的共有方法,加入同步处理的代码,解决线程安全问题
    public static synchronized SingleTon_4 getInstance() {
        if (instance == null) {
            instance = new SingleTon_4();
        }
        return instance;
    }
}
            </code>
        </pre>
    </div>
</div>

<!-- 单例模式_同步代码块-->
<div id="singletonPattern_synchronousCodeBlock" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">种类五：同步代码块</h3>
    </div>
    <div class="panel-body">
        <pre>
            <code class="java">
class SingleTon_5 {

    // 1.构造器私有化(防止new)
    private SingleTon_5() {
    }

    // 2.在本类内部创建一个对象示实例
    private static SingleTon_5 instance;

    // 3.提供一个静态的共有方法,加入同步处理的代码,解决线程安全问题
    public static SingleTon_5 getInstance() {
        if (instance == null) {
            synchronized (SingleTon_5.class) {
                instance = new SingleTon_5();
            }
        }
        return instance;
    }
}
            </code>
        </pre>
    </div>
</div>

<!-- 单例模式_双重检查-->
<div id="singletonPattern_doubleCheck" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">种类六：双重检查</h3>
    </div>
    <div class="panel-body">
        <pre>
            <code class="java">
class SingleTon_6 {

    // 1.构造器私有化(防止new)
    private SingleTon_6() {
    }

    // 2.在本类内部创建一个对象示实例
    private static volatile SingleTon_6 instance;

    // 3.提供一个静态的共有方法,加入双重检查代码,解决线程安全问题,同时解决懒加载问题
    public static SingleTon_6 getInstance() {
        if (instance == null) {
            synchronized (SingleTon_6.class) {
                if (instance == null) {
                    instance = new SingleTon_6();
                }
            }
        }
        return instance;
    }
}
            </code>
        </pre>
    </div>
</div>

<!-- 单例模式_静态内部类-->
<div id="singletonPattern_staticInnerClass" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">种类七：静态内部类</h3>
    </div>
    <div class="panel-body">
        <pre>
            <code class="java">
class SingleTon_7 {

    // 1.构造器私有化(防止new)
    private SingleTon_7() {
    }

    // 2.写一个静态内部类,该类中有一个静态属性SingleTon_7
    private static class SingleTonInstance {
        private static final SingleTon_7 INSTANCE = new SingleTon_7();
    }

    // 3.提供一个静态的共有方法,加入双重检查代码,解决线程安全问题,同时解决懒加载问题
    public static SingleTon_7 getInstance() {
        return SingleTonInstance.INSTANCE;
    }
}
            </code>
        </pre>
    </div>
</div>

<!-- 单例模式_枚举-->
<div id="singletonPattern_enumerate" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">种类八：枚举</h3>
    </div>
    <div class="panel-body">
        <pre>
            <code class="java">
enum SingleTon_8 {
    INSTANCE;

    public void sayOK() {
        System.out.println("OK");
    }
}
            </code>
        </pre>
    </div>
</div>

<!-- 单例模式优点_减少内存开支 -->
<div id="singleton_mode_advantages_reduce_memory_expenses" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">减少内存开支</h3>
    </div>
    <div class="panel-body">
        <p>由于单例模式在内存中只有一个实例，减少了内存开支，特别是一个对象需要频繁地创建、销毁时，而且创建或销毁时性能又无法优化，单例模式的优势就非常明显。</p>
    </div>
</div>

<!-- 单例模式优点_减少系统性能开销 -->
<div id="singleton_mode_advantages_reduce_system_performance_overhead" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">减少系统性能开销</h3>
    </div>
    <div class="panel-body">
        <p>由于单例模式只生成一个实例，所以减少了系统的性能开销，当一个对象的产生需要比较多的资源时，如读取配置、产生其他依赖对象时，则可以通过在应用启动时直接产生一个单例对象，然后用永久驻留内存的方式来解决（在Java EE中采用单例模式时需要注意JVM垃圾回收机制）。</p>
    </div>
</div>

<!-- 单例模式优点_避免资源多重占用 -->
<div id="singleton_mode_advantages_avoid_multiple_resources" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">避免资源多重占用</h3>
    </div>
    <div class="panel-body">
        <p>单例模式可以避免对资源的多重占用，例如一个写文件动作，由于只有一个实例存在内存中，避免对同一个资源文件的同时写操作。</p>
    </div>
</div>

<!-- 单例模式优点_优化共享资源访问 -->
<div id="singleton_mode_advantages_avoid_multiple_resources_optimize_access_to_shared_resources" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">优化共享资源访问</h3>
    </div>
    <div class="panel-body">
        <p>单例模式可以在系统设置全局的访问点，优化和共享资源访问，例如可以设计一个单例类，负责所有数据表的映射处理。</p>
    </div>
</div>

<!-- 单例模式缺点_扩展困难 -->
<div id="singleton_pattern_disadvantages_difficult_to_expand" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">扩展困难</h3>
    </div>
    <div class="panel-body">
        <p>单例模式一般没有接口，扩展很困难，若要扩展，除了修改代码基本上没有第二种途径可以实现。单例模式为什么不能增加接口呢？因为接口对单例模式是没有任何意义的，它要求“自行实例化”，并且提供单一实例，接口或抽象类是不可能被实例化的。当然，在特殊情况下，单例模式可以实现接口、被继承等，需要在系统开发中根据环境判断。</p>
    </div>
</div>

<!-- 单例模式缺点_对测试不利 -->
<div id="singleton_pattern_disadvantages_not_good_for_testing" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">对测试不利</h3>
    </div>
    <div class="panel-body">
        <p>单例模式对测试是不利的。在并行开发环境中，如果单例模式没有完成，是不能进行测试的，没有接口也不能使用mock的方法虚拟一个对象。</p>
    </div>
</div>

<!-- 单例模式缺点_与SRP有冲突 -->
<div id="singleton_pattern_disadvantages_conflict_with_SRP" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">与SRP有冲突</h3>
    </div>
    <div class="panel-body">
        <p>单例模式与单一职责原则有冲突。一个类应该只实现一个逻辑，而不关心它是否是单例的，是不是要单例取决于环境，单例模式把“要单例”和业务逻辑融合在一个类中。</p>
    </div>
</div>

<!-- CUSTOM JAVASCRIPT -->
<script type="text/javascript" src="../../assets/scripts/common-method.js"></script>
<script type="text/javascript" src="../../assets/scripts/base.js"></script>
<script type="text/javascript" src="../../assets/scripts/responseStatusCode.js"></script>
<script type="text/javascript" src="../../assets/scripts/designPatternsJs/singleton_pattern.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>

</html>
