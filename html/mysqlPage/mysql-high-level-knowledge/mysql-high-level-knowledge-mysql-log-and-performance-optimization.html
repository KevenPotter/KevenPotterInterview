<!doctype html>
<html lang="en">

<head>
    <title>高阶知识-MySQL日志</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!-- Javascript -->
    <script type="text/javascript" src="../../../assets/vendor/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap/js/bootstrap-paginator.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap-select/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/echarts/theme/macarons.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/layer/layer.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/laydate/laydate.js"></script>
    <script type="text/javascript" src="../../../assets/scripts/klorofil-common.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/ui-choose/js/ui-choose.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/highlight/highlight.pack.js"></script>
    <!-- VENDOR CSS -->
    <link rel="stylesheet" href="../../../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/bootstrap-select/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/linearicons/style.css">
    <link rel="stylesheet" href="../../../assets/vendor/ui-choose/css/ui-choose.css">
    <link rel="stylesheet" href="../../../assets/vendor/highlight/styles/rainbow.css">
    <!-- MAIN CSS -->
    <link rel="stylesheet" href="../../../assets/css/main.css">
    <!-- CUSTOMIZE CSS -->
    <link rel="stylesheet" href="../../../assets/css/roundButton.css">
    <!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
    <link rel="stylesheet" href="../../../assets/css/demo.css">
    <!-- GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
    <!-- ICONS -->
    <link rel="apple-touch-icon" sizes="76x76" href="../../../assets/img/apple-icon.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../../../assets/img/favicon.png">
</head>

<body>
<!-- WRAPPER -->
<div id="wrapper">
    <!-- NAVBAR -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="brand">
            <a href="../../../index.html"><img src="../../../assets/img/logo-KevenPotter.png" alt="KevenPotter Logo" class="img-responsive logo"></a>
        </div>
        <div class="container-fluid">
            <div class="navbar-btn">
                <button type="button" class="btn-toggle-fullwidth"><i class="lnr lnr-arrow-left-circle"></i></button>
            </div>
            <form class="navbar-form navbar-left">
                <div class="input-group">
                    <input type="text" value="" class="form-control" placeholder="搜索内容...">
                    <span class="input-group-btn"><button type="button" class="btn btn-primary">Go</button></span>
                </div>
            </form>
        </div>
    </nav>
    <!-- END NAVBAR -->
    <!-- LEFT SIDEBAR -->
    <div id="sidebar-nav" class="sidebar">
        <div class="sidebar-scroll">
            <nav>
                <ul class="nav">
                    <li><a href="../../../index.html" class=""><i class="lnr lnr-home"></i> <span>首页</span></a></li>
                    <li>
                        <a href="#distributedPage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-cloud"></i> <span>分布式</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="distributedPage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../../distributedPage/distributed_overview.html" class="">分布式概述</a></li>
                                <li><a href="../../distributedPage/zookeeper_overview.html" class="">ZooKeeper概述</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="#designPatternsPage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-laptop"></i> <span>设计模式</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="designPatternsPage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../../designPatternsPage/six_principles.html" class="">六大原则</a></li>
                                <li><a href="../../designPatternsPage/singleton_pattern.html" class="">单例模式</a></li>
                                <li><a href="../../designPatternsPage/factory_method_pattern.html" class="">工厂方法模式</a></li>
                                <li><a href="../../designPatternsPage/abstract_factory_pattern.html" class="">抽象工厂模式</a></li>
                                <li><a href="../../designPatternsPage/template_method_pattern.html" class="">模板方法模式</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a id="database_page_button" href="#databasePage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-database"></i> <span>数据库</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="databasePage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../mysql-basic-knowledge.html" class="">基础知识</a></li>
                                <li>
                                    <a href="#advanced_knowledge" data-toggle="collapse" class="collapsed"><span>进阶知识</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                                    <div id="advanced_knowledge" class="collapse ">
                                        <ul class="nav">
                                            <li><a href="../mysql-advanced-knowledge/mysql-advanced-knowledge-index.html" class=""><i class="lnr"></i>索引</a></li>
                                            <li><a href="../mysql-advanced-knowledge/mysql-advanced-knowledge-view.html" class=""><i class="lnr"></i>视图</a></li>
                                            <li><a href="../mysql-advanced-knowledge/mysql-advanced-knowledge-stored-procedure.html" class=""><i class="lnr"></i>存储过程</a></li>
                                            <li><a href="../mysql-advanced-knowledge/mysql-advanced-knowledge-trigger.html" class=""><i class="lnr"></i>触发器</a></li>
                                        </ul>
                                    </div>
                                </li>
                                <li>
                                    <a id="database_page_high_level_button" href="#high_level_knowledge" data-toggle="collapse" class="collapsed"><span>高阶知识</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                                    <div id="high_level_knowledge" class="collapse ">
                                        <ul class="nav">
                                            <li><a href="mysql-high-level-knowledge-authority-and-security-management.html" class=""><i class="lnr"></i>权限与安全管理</a></li>
                                            <li><a href="mysql-high-level-knowledge-database-backup-and-recovery.html" class=""><i class="lnr"></i>数据库备份与恢复</a></li>
                                            <li><a href="mysql-high-level-knowledge-mysql-log-and-performance-optimization.html" class="active"><i class="lnr"></i>MySQL日志与性能优化</a></li>
                                        </ul>
                                    </div>
                                </li>
                                <li><a href="../mysql-sub-database_sub-table.html" class="">分库分表</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    <!-- END LEFT SIDEBAR -->
    <!-- MAIN -->
    <div class="main">
        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div class="container-fluid">
                <h3 class="page-title tinyHand" onclick="mysqlLogAndPerformanceOptimizationTips()">MySQL日志与性能优化 <i class="fa fa-hand-pointer-o"></i></h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="logClassificationTips()">日志分类 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="log_classification" style="height:500%;"></div>
                                <h3 class="panel-title tinyHand" onclick="logClassificationIsMoreDetailedTips()">查看MySQL 8.0的日志新特性——日志分类更详细 <i class="fa fa-hand-pointer-o"></i></h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="analyzeQueryStatementsTips()">分析查询语句 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="analyze_query_statements" style="height:500%;"></div>
                                <h3 class="panel-title tinyHand" onclick="optimizeSubqueriesTips()">优化子查询 <i class="fa fa-hand-pointer-o"></i></h3>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="optimizeDatabaseStructureTips()">优化数据库结构 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="optimize_database_structure" style="height:500%;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="tableExportAndImportTips()">表的导出和导入 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="table_export_and_import" style="height:500%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END MAIN CONTENT -->
    </div>
    <!-- END MAIN -->
    <div class="clearfix"></div>
    <footer>
        <div class="container-fluid">
            <p class="copyright">Copyright &copy; https://github.com/KevenPotter/KevenPotterInterview <a href="https://github.com/KevenPotter/KevenPotterInterview" target="_blank" title="KevenPotter">KevenPotter</a> - Collect from <a href="https://github.com/KevenPotter" title="Github"
                                                                                                                                                                                                                                          target="_blank">KevenPotter主页</a></p>
        </div>
    </footer>
</div>
<!-- END WRAPPER -->

<!-- mysql日志与性能优化提示 -->
<div id="mysql_log_and_performance_optimization_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">MySQL日志与性能优化</h3>
    </div>
    <div class="panel-body">
        <p class="fa fa-fire"> MySQL日志</p>
        <p class="firstLineIndent">MySQL日志记录了MySQL数据库日常操作和错误信息。MySQL有不同类型的日志文件（各自存储了不同类型的日志），从日志当中可以查询到MySQL数据库的运行情况、用户操作、错误信息等，可以为MySQL管理和优化提供必要的信息。对于MySQL的管理工作而言，这些日志文件是不可缺少的。</p>
        <p class="fa fa-fire"> 性能优化</p>
        <p class="firstLineIndent">
            优化MySQL数据库是数据库管理员和数据库开发人员的必备技能。MySQL优化，一方面是找出系统的瓶颈，提高MySQL数据库整体的性能；另一方面需要合理的结构设计和参数调整，以提高用户操作响应速度；同时
            还要尽可能节省系统资源，以便系统可以提供更大负荷的服务。
        </p>
        <p class="firstLineIndent">MySQL数据库优化是多方面的，原则是减少系统的瓶颈，减少资源的占用，增加系统的反应速度。例如，通过优化文件系统，提高磁盘I/O的读写速度；通过优化操作系统调度策略，提高MySQL在高负荷情况下的负载能力；优化表结构、索引、查询语句等使查询响应更快。</p>
        <p class="firstLineIndent">在MySQL中，可以使用<code>SHOW STATUS</code>语句查询一些MySQL数据库的性能参数。SHOW STATUS语句的语法如下：</p>
        <p class="firstLineIndent"><code class="firstLineIndent">SHOW STATUS LIKE 'value';</code></p>
        <p class="firstLineIndent">其中，value是要查询的参数值，一些常用的性能参数如下：</p>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>Connections</td>
                <td>连接MySQL服务器的次数</td>
            </tr>
            <tr>
                <td>Uptime</td>
                <td>MySQL服务器的上线时间</td>
            </tr>
            <tr>
                <td>Slow_queries</td>
                <td>慢查询的次数</td>
            </tr>
            <tr>
                <td>Com_select</td>
                <td>查询操作的次数</td>
            </tr>
            <tr>
                <td>Com_insert</td>
                <td>插入操作的次数</td>
            </tr>
            <tr>
                <td>Com_update</td>
                <td>更新操作的次数</td>
            </tr>
            <tr>
                <td>Com_delete</td>
                <td>删除操作的次数</td>
            </tr>
            </tbody>
        </table>
        <p class="firstLineIndent">查询MySQL服务器的连接次数，可以执行如下语句：</p>
        <p class="firstLineIndent"><code>SHOW STATUS LIKE 'Connections';</code></p>
        <p class="firstLineIndent">查询MySQL服务器的慢查询次数，可以执行如下语句：</p>
        <p class="firstLineIndent"><code>SHOW STATUS LIKE 'Slow_queries';</code></p>
        <p class="firstLineIndent">查询其他参数的方法和两个参数的查询方法相同。慢查询次数参数可以结合慢查询日志，找出慢查询语句，然后针对慢查询语句进行表结构优化或者查询语句优化。</p>
    </div>
</div>

<!-- 日志分类提示 -->
<div id="log_classification_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">日志分类</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">MySQL日志主要分为4类，使用这些日志文件，可以查看MySQL内部发生的事情。这4类日志分别是：</p>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>日志</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>错误日志</td>
                <td>记录MySQL服务的启动、运行或停止MySQL服务时出现的问题</td>
            </tr>
            <tr>
                <td>查询日志</td>
                <td>记录建立的客户端连接和执行的语句</td>
            </tr>
            <tr>
                <td>二进制日志</td>
                <td>记录所有更改数据的语句，可以用于数据复制</td>
            </tr>
            <tr>
                <td>慢查询日志</td>
                <td>记录所有执行时间超过<b>long_query_time</b>的所有查询或不使用索引的查询</td>
            </tr>
            </tbody>
        </table>
        <p class="firstLineIndent">
            默认情况下，所有日志创建于MySQL数据目录中。通过刷新日志，可以强制MySQL关闭和重新打开日志文件（或者在某些情况下切换到一个新的日志）。当执行一个<code>FLUSH LOGS</code>语句或执行
            <code>mysqladmin flush-logs</code>或<code>mysqladmin refresh</code>时，将刷新日志。
        </p>
        <p class="firstLineIndent">如果正使用MySQL复制功能，在复制服务器上可以维护更多日志文件，这种日志称为<b>接替日志</b>。</p>
        <p class="firstLineIndent"><b>启动日志功能会降低MySQL数据库的性能。</b>例如，在查询非常频繁的MySQL数据库系统中，如果开启了通用查询日志和慢查询日志，MySQL数据库会花费很多时间记录日志。同时，日志会占用大量的磁盘空间。</p>
    </div>
</div>

<!-- 日志分类-二进制日志 -->
<div id="log_classification_binary_log" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title tinyHand" onclick="logClassificationBinaryLogTips()">二进制日志 <i class="fa fa-hand-pointer-o"></i></h3>
    </div>
    <div class="panel-body">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#log_classification_binary_log_1" data-toggle="tab">启动和设置二进制日志</a></li>
            <li><a href="#log_classification_binary_log_2" data-toggle="tab">查看二进制日志</a></li>
            <li class="dropdown">
                <a href="#" id="log_classification_binary_log_3" class="dropdown-toggle" data-toggle="dropdown">删除二进制日志<b class="caret"></b></a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="log_classification_binary_log_3">
                    <li><a href="#log_classification_binary_log_3_1" tabindex="-1" data-toggle="tab">使用RESET MASTER语句删除所有二进制日志文件</a></li>
                    <li><a href="#log_classification_binary_log_3_2" tabindex="-1" data-toggle="tab">使用PURGE MASTER LOGS语句删除指定日志文件</a></li>
                </ul>
            </li>
            <li><a href="#log_classification_binary_log_4" data-toggle="tab">使用二进制日志恢复数据库</a></li>
            <li><a href="#log_classification_binary_log_5" data-toggle="tab">暂时停止二进制日志功能</a></li>
        </ul>
        <div class="tab-content">
            <div id="log_classification_binary_log_1" class="tab-pane fade in active">
                <p class="firstLineIndent">默认情况下，二进制日志是开启的，可以通过修改MySQL的配置文件来启动和设置二进制日志。</p>
                <p class="firstLineIndent">my.ini中[mysqld]组下面有关于二进制日志的设置：</p>
                <p class="firstLineIndent"><b>log-bin [=path/ [filename]]</b></p>
                <hr>
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th>参数</th>
                        <th>作用</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>log-bin [=path/ [filename]]</td>
                        <td class="tinyHand" onclick="logClassificationBinaryLog1LogBinTips()">定义开启二进制日志 <i class="fa fa-hand-pointer-o"></i></td>
                    </tr>
                    <tr>
                        <td>expire_logs_days</td>
                        <td>定义了MySQL清除过期日志的时间，即二进制日志自动删除的天数。默认值为0，表示“没有自动删除”。当MySQL启动或刷新二进制日志时可能删除该文件</td>
                    </tr>
                    <tr>
                        <td>max_binlog_size</td>
                        <td>
                            定义了单个文件的大小限制，如果二进制日志写入的内容大小超出给定值，日志就会发生滚动（关闭当前文件，重新打开一个新的日志文件）。<b>不能将该变量设置为大于1GB或小于4096B，默认值是1GB</b>。
                            如果正在使用大的事务，二进制日志文件大小还可能会超过max_binlog_size定义的大小
                        </td>
                    </tr>
                    </tbody>
                </table>
                <p class="firstLineIndent">在my.ini配置文件中的[mysqld]组下，添加以下几个参数与参数值</p>
                <pre>
                    <code class="sql">
    [mysqld]
    log-bin
    expire_logs_days = 10
    max_binlog_size = 100M
                    </code>
                </pre>
                <p class="firstLineIndent">添加完毕后，关闭并重新启动MySQL服务进程，即可打开二进制日志，然后可以通过<code>SHOW VARIABLES</code>语句来查询日志设置。</p>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">使用SHOW VARIABLES语句查询日志设置，执行的语句及结果如下：</p>
                <pre>
                    <code class="sql">
    mysql> SHOW VARIABLES LIKE 'log_%';
    +------------------------------------------+-------------------------------------------------------------------------+
    | Variable_name                            |  Value                                                                  |
    +------------------------------------------+-------------------------------------------------------------------------+
    | log_bin                                  | ON                                                                      |
    | log_bin_basename                         | C:\ProgramData\MySQL\MySQL Server 8.0\Data\X0NHUMO7YDZVSST-bin          |
    | log_bin_index                            | C:\ProgramData\MySQL\MySQL Server 8.0\Data\X0NHUMO7YDZVSST-bin.index    |
    | log_bin_trust_function_creators          | OFF                                                                     |
    | log_bin_use_v1_row_events                | OFF                                                                     |
    | log_error                                | .\X0NHUMO7YDZVSSI.err                                                   |
    | log_error_services                       | log_filter_internal;log_sink_internal                                   |
    | log_error_suppression_list               |                                                                         |
    | log_error_verbosity                      | 2                                                                       |
    | log_output                               | FILE                                                                    |
    | log_queries_not_using_indexed            | OFF                                                                     |
    | log_slave_updates                        | ON                                                                      |
    | log_slow_admin_statements                | OFF                                                                     |
    | log_slow_slave_statements                | OFF                                                                     |
    | log_statements_unsafe_for_binlog_indexes | ON                                                                      |
    | log_throttle_queries_not_using_indexes   | 0                                                                       |
    | log_timestamps                           | UTC                                                                     |
    +------------------------------------------+-------------------------------------------------------------------------+
                    </code>
                </pre>
                <p class="firstLineIndent">通过上面的查询结果可以看出，log_bin变量的值为ON，表明二进制日志已经打开。MySQL重新启动之后，可以在自己的机器上的MySQL数据文件夹下面看到新生成的文件后缀为.000001和.index的两个文件，文件名称为默认主机名称。</p>
                <p class="firstLineIndent"><span class="note">注意</span>：数据库文件最好不要与日志文件放在同一个磁盘上，这样当数据库文件所在的磁盘发生故障时，可以使用日志文件恢复数据。</p>
            </div>
            <div id="log_classification_binary_log_2" class="tab-pane fade">
                <p class="firstLineIndent">
                    MySQL二进制日志存储了所有的变更信息，MySQL二进制日志是经常用到的。当MySQL创建二进制日志文件时，先创建一个以“filename”为名称、以“.index”为后缀的文件，再创建一个以“filename”为名称、
                    以“.000001”为后缀的文件。MySQL服务重新启动一次，以“.000001”为后缀的文件会增加一个，并且后缀名加1递增；如果日志长度超过了max_binlog_size的上限（默认是1GB），就会创建一个新的日志文件。
                </p>
                <p class="firstLineIndent"><code>SHOW BINARY LOGS</code>语句可以查看当前的二进制日志文件个数及其文件名。MySQL二进制日志并不能直接查看，如果要查看日志内容，可以通过<code>mysqlbinlog</code>命令查看。</p>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">使用SHOW BINARY LOGS查看二进制日志文件个数及文件名，执行命令及结果如下：</p>
                <pre>
                    <code class="sql">
    mysql> SHOW BINARY LOGS;
    +------------------------------+-----------+
    |             Log_name         | File_size |
    +------------------------------+-----------+
    |  X0NHUNO7YDZVSSI-bin.000001  |    178    |
    +------------------------------+-----------+
    1 row in set (0.00 sec)
                    </code>
                </pre>
                <p class="firstLineIndent">可以看到，当前只有一个二进制日志文件。日志文件的个数与MySQL服务启动的次数相同。每启动一次MySQL服务，将会产生一个新的日志文件。</p>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">使用mysqlbinlog查看二进制日志，执行命令及结果如下：</p>
                <pre>
                    <code class="sql">
    C:\ >mysqlbinlog D:/mysql/log/binlog.000001
    /*!40019 SET @@session.max_insert_delayed_threads=0*/;
    /*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/;
    DELIMITER /*!*/;
    # at 4
    #190130 15:27:48 server id 1 end_log_pos 107 Start: binlog v 4, server v 8.0.13-log created 160330
    # Warning: this binlog is either in use or was not closed properly.
    ROLLBACK/*!*/;
    BINLOG '
    9JBcTg8BAAAAZwAAAGsAAAABAAQANS41LjEzLWXxvZwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
    AAAAAAAAAAAAAAAAAAD0kFxOEzgNAAgAEgAEBAQEEgAAVAAEggAAAAICAgCAA==
    '/*!*/;
    # at 107
    #190330 15:34:17 server id 1 end_log_pos 175 thread_id=2 exec_time=0
    error_code=0
    SET TIMESTAMP=1314689657/*!*/;
    SET @@session.pseudo_thread_id=2/*!*/;
    SET @@session.foreign_key_checks=1,@@session.sql_auto_is_null=0,@@session.unique_checks=1,
    @@session
    SET @@session.sql_mode=0/*!*/;
    SET @@session.auto_increment_increment=1,@@session.auto_increment_offset=1/*!*/;
    /*!\C gb2312 *//*!*/;
    SET @@session.character_set_client=24,@@session.collation_connection=24,@@session.collation_server=24/
    SET @@session.lc_time_names=0/*!*/;
    SET @@session.collation_database=DEFAULT/*!*/;
    BEGIN
    /*!*/;
    # at 175
    #190130 15:34:17 server id 1 end_log_pos 289 Query thread_id=2 exec_time=0
    use test/*!*/;
    SET TIMESTAMP=1314689657/*!*/;
    UPDATE fruits set f_price = 5.00 WHERE f_id = 'a1'
    /*!*/;
    # at 289
    #190330 15:34:17 server id 1 end_log_pos 316 Xid = 14
    COMMIT/*!*/;
    DELIMITER ;
    # End of log file
    ROLLBACK /* added by mysqlbinlog */
    /*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/;
                    </code>
                </pre>
                <p class="firstLineIndent">这是一个简单的日志文件，日志中记录了一些用户的操作。从文件内容中可以看到，用户对fruits表进行了更新操作，语句为“UPDATE fruits SET f_price = 5.00 WHERE f_id = 'a1';”。</p>
            </div>
            <div id="log_classification_binary_log_3_1" class="tab-pane fade">
                <p class="firstLineIndent">MySQL的二进制文件可以配置自动删除，同时MySQL也提供了安全的手动删除二进制文件的方法：<code>RESET MASTER</code>删除所有的二进制日志文件；<code>PURGE MASTER LOGS</code>只删除部分二进制日志文件。</p>
                <p class="firstLineIndent">RESET MASTER语法如下：</p>
                <p class="firstLineIndent"><code>RESET MASTER;</code></p>
                <p class="firstLineIndent">执行完该语句后，所有二进制日志将被删除，MySQL会重新创建二进制日志，新的日志文件扩展名将重新从000001开始编号。</p>
            </div>
            <div id="log_classification_binary_log_3_2" class="tab-pane fade">
                <p class="firstLineIndent">MySQL的二进制文件可以配置自动删除，同时MySQL也提供了安全的手动删除二进制文件的方法：<code>RESET MASTER</code>删除所有的二进制日志文件；<code>PURGE MASTER LOGS</code>只删除部分二进制日志文件。</p>
                <p class="firstLineIndent">PURGE MASTER LOGS语法如下：</p>
                <p class="firstLineIndent"><code>PURGE {MASTER | BINARY} LOGS TO 'log_name';</code></p>
                <p class="firstLineIndent"><code>PURGE {MASTER | BINARY} LOGS BEFORE 'date';</code></p>
                <p class="firstLineIndent">第1种方法指定文件名，执行该命令将删除文件名编号比指定文件名编号小的所有日志文件。第2种方法指定日期，执行该命令将删除指定日期以前的所有日志文件。</p>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">使用PURGE MASTER LOGS删除创建时间比X0NHUNO7YDZVSSI-bin.000003早的所有日志文件：</p>
                <pre>
                    <code class="sql">
    mysql> SHOW BINARY LOGS;
    +------------------------------+-----------+
    |             Log_name         | File_size |
    +------------------------------+-----------+
    |  X0NHUNO7YDZVSSI-bin.000001  |    178    |
    |  X0NHUNO7YDZVSSI-bin.000002  |    641    |
    |  X0NHUNO7YDZVSSI-bin.000003  |    345    |
    +------------------------------+-----------+
    3 rows in set (0.01 sec)
    mysql>
    mysql>
    mysql> PURGE MASTER LOGS TO "X0NHUNO7YDZVSSI-bin.000003";
    Query OK, 0 rows affected (0.07 sec)
    mysql>
    mysql>
    mysql> SHOW BINARY LOGS;
    +------------------------------+-----------+
    |             Log_name         | File_size |
    +------------------------------+-----------+
    |  X0NHUNO7YDZVSSI-bin.000003  |    345    |
    +------------------------------+-----------+
                    </code>
                </pre>
                <p class="firstLineIndent">可以看到，X0NHUNO7YDZVSSI-bin.000001、X0NHUNO7YDZVSSI-bin.000002两个日志文件被删除了。</p>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">使用PURGE MASTER LOGS删除2019年1月30日前创建的所有日志文件，执行命令及结果如下：</p>
                <pre>
                    <code class="sql">
    mysql> PURGE MASTER LOGS BEFORE "20190130";
    Query OK, 0 rows affected (0.07 sec)
                    </code>
                </pre>
                <p class="firstLineIndent">语句执行之后，2019年1月30日之前创建的日志文件都将被删除，但2019年1月30日的日志会被保留。使用mysqlbinlog可以查看指定日志的创建时间，部分日志内容如下：</p>
                <pre>
                    <code class="sql">
    /*!40019 SET @@session.max_insert_delayed_threads=0*/;
    /*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/;
    DELIMITER /*!*/;
    # at 4
    #190130 15:27:48 server id 1 end_log_pos 107 Start: binlog v 4, server v 8.0.13-log created 160330
    # Warning: this binlog is either in use or was not closed properly.
    ROLLBACK/*!*/;
    BINLOG '
                    </code>
                </pre>
                <p class="firstLineIndent">其中，190130为日志创建的时间，即2019年1月30日。</p>
            </div>
            <div id="log_classification_binary_log_4" class="tab-pane fade">
                <p class="firstLineIndent">如果MySQL服务器启用了二进制日志，在数据库出现意外丢失数据时，可以使用<code>mysqlbinlog</code>工具从指定的时间点开始（例如，最后一次备份）直到现在，或另一个指定的时间点的日志中恢复数据。</p>
                <p class="firstLineIndent">要想从二进制日志恢复数据，需要知道当前二进制日志文件的路径和文件名，一般可以从配置文件（my.cnf或者my.ini，文件名取决于MySQL服务器的操作系统）中找到路径。</p>
                <p class="firstLineIndent">mysqlbinlog恢复数据的语法如下：</p>
                <p class="firstLineIndent"><code>mysqlbinlog [option] filename | mysql -uuser -ppass</code></p>
                <hr>
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th>参数</th>
                        <th>作用</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>[option]</td>
                        <td class="tinyHand" onclick="logClassificationBinaryLog4MysqlbinlogOptionTips()">一些可选项 <i class="fa fa-hand-pointer-o"></i></td>
                    </tr>
                    <tr>
                        <td>filename</td>
                        <td>表示日志文件名</td>
                    </tr>
                    </tbody>
                </table>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">使用mysqlbinlog恢复MySQL数据库到2020年12月12日 15:46:18时的状态，执行命令及结果如下：</p>
                <pre>
                    <code class="sql">
    C:\ >mysqlbinlog --stop-date="2020-12-12 15:46:18" D:\mysql\log\binlog\X0NHUMO7YDZVSST-bin.000003 | mysql -uroot -p123456
                    </code>
                </pre>
                <p class="firstLineIndent">该命令执行成功后，会根据X0NHUMO7YDZVSST-bin.000003日志文件恢复2020年12月12日 15:46:18以前的所有操作。这种方法对于意外操作非常有效，比如因操作不当误删了数据表。</p>
            </div>
            <div id="log_classification_binary_log_5" class="tab-pane fade">
                <p class="firstLineIndent">如果在MySQL的配置文件中配置启动了二进制日志，MySQL会一直记录二进制日志。修改配置文件，可以停止二进制日志，但是需要重启MySQL数据库。MySQL提供了暂时停止二进制日志的功能。通过<code>SET SQL_LOG_BIN</code>语句可以使用MySQL暂停或者启动二进制日志。</p>
                <p class="firstLineIndent">SET SQL_LOG_BIN的语法如下：</p>
                <p class="firstLineIndent"><code>SET sql_log_bin = {0 | 1};</code></p>
                <hr>
                <p class="firstLineIndent">执行如下语句将暂停记录二进制日志：</p>
                <pre>
                    <code class="sql">
    mysql> SET sql_log_bin = 0;
    Query OK, 0 rows affected (0.00 sec)
                    </code>
                </pre>
                <p class="firstLineIndent">执行如下语句将恢复记录二进制日志：</p>
                <pre>
                    <code class="sql">
    mysql> SET sql_log_bin = 1;
    Query OK, 0 rows affected (0.00 sec)
                    </code>
                </pre>
            </div>
        </div>
    </div>
</div>

<!-- 日志分类-二进制日志提示 -->
<div id="log_classification_binary_log_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">二进制日志</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            二进制日志主要记录MySQL数据库的变化。二进制日志以一种有效的格式并且是事务安全的方式包含更新日志中可用的所有信息。二进制日志包含了所有更新了数据或者已经
            潜在更新了数据（例如，没有匹配任何行的一个DELETE）的语句。语句以“事件”的形式保存，描述数据更改。
        </p>
        <p class="firstLineIndent">
            二进制日志还包含关于每个更新数据库的语句的执行时间信息。它不包含没有修改任何数据的语句。如果想要记录所有语句（例如，为了识别有问题的查询），需要使用一般
            查询日志。<b>使用二进制日志的主要目的是最大可能地<span class="note">恢复数据库</span>，因为二进制日志包含备份后进行的所有更新。</b>
        </p>
    </div>
</div>

<!-- 日志分类-二进制日志-启动和设置二进制日志-log-bin提示 -->
<div id="log_classification_binary_log_1_log_bin_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">log-bin [=path/ [filename]]</h3>
    </div>
    <div class="panel-body">
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>log-bin</td>
                <td>定义开启二进制日志</td>
            </tr>
            <tr>
                <td>path</td>
                <td>表明日志文件所在的目录路径</td>
            </tr>
            <tr>
                <td>filename</td>
                <td>指定了日志文件的名称，如文件的全名为filename.000001、filename.000002等。除了上述文件之外，还有一个名称为filename.index的文件，文件内容为所有日志的清单，可以使用记事本打开该文件</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 日志分类-二进制日志-使用二进制日志恢复数据库-mysqlbinlog-option提示 -->
<div id="log_classification_binary_log_4_mysqlbinlog_option_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">option</h3>
    </div>
    <div class="panel-body">
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>--start-date</td>
                <td>指定恢复数据库的起始时间</td>
            </tr>
            <tr>
                <td>--stop-date</td>
                <td>指定恢复数据库的结束时间</td>
            </tr>
            <tr>
                <td>--stop-position</td>
                <td>指定恢复数据库的开始位置</td>
            </tr>
            <tr>
                <td>--stop-position</td>
                <td>指定恢复数据库的结束 位置</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 日志分类-错误日志 -->
<div id="log_classification_error_log" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title tinyHand" onclick="logClassificationErrorLogTips()">错误日志 <i class="fa fa-hand-pointer-o"></i></h3>
    </div>
    <div class="panel-body">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#log_classification_error_log_1" data-toggle="tab">启动和设置错误日志</a></li>
            <li><a href="#log_classification_error_log_2" data-toggle="tab">查看错误日志</a></li>
            <li><a href="#log_classification_error_log_3" data-toggle="tab">删除错误日志</a></li>
        </ul>
        <div class="tab-content">
            <div id="log_classification_error_log_1" class="tab-pane fade in active">
                <p class="firstLineIndent">
                    在默认情况下，错误日志会记录到数据库的数据目录下。如果没有在配置文件中指定文件名，则文件名默认为<b>hostname.err</b>。例如，MySQL所在的服务器主机名为mysql-db，记录错误信息的文件名
                    为mysql-db.err。如果执行了<code>FLUSH LOGS</code>，错误日志文件会重新加载。
                </p>
                <p class="firstLineIndent">错误日志的启动和停止以及指定日志文件名都可以通过修改my.ini（或者my.cnf）来配置。错误日志的配置项时log-error。在[mysqld]下配置log-error，则启动错误日志。如果需要指定文件名，则配置项如下：</p>
                <pre>
                    <code class="sql">
    [mysqld]
    log-error=[path/[file_name]]
                    </code>
                </pre>
                <hr>
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th>参数</th>
                        <th>作用</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>path</td>
                        <td>为日志文件所在的目录路径</td>
                    </tr>
                    <tr>
                        <td>file_name</td>
                        <td>为日志文件名</td>
                    </tr>
                    </tbody>
                </table>
                <p class="firstLineIndent"><span class="note">修改配置项后，需要重启MySQL服务以生效。</span></p>
            </div>
            <div id="log_classification_error_log_2" class="tab-pane fade">
                <p class="firstLineIndent">通过错误日志可以监视系统的运行状态，便于及时发现故障、修复故障。MySQL错误日志时以文本文件形式存储的，可以使用文本编辑器直接查看MySQL错误日志。</p>
                <p class="firstLineIndent">如果不知道日志文件的存储路径，可以使用<code>SHOW VARIABLES</code>语句查询错误日志的存储路径。SHOW VARIABLES语句如下：</p>
                <p class="firstLineIndent"><code>SHOW VARIABLES LIKE 'log_error';</code></p>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">使用记事本查看MySQL错误日志：</p>
                <pre>
                    <code class="sql">
    mysql> SHOW VARIABLES LIKE 'log_error';
    +----------------+-------------------------+
    | Variable_name  |          Value          |
    +----------------+-------------------------+
    |   log_error    |  .\X0NHUMO7YDZVSSI.err  |
    +----------------+-------------------------+




    20201212 16:50:45 [Note] Plugin 'FEDERATED' is disabled.
    20201212 16:50:45 InnoDB: The InnoDB memory heap is disabled
    20201212 16:50:45 InnoDB: Mutexes and rw_locks use Windows interlocked functions
    20201212 16:50:45 InnoDB: Compressed tables use zlib 1.2.3
    20201212 16:50:45 InnoDB: Initializing buffer pool, size = 46.0M
    20201212 16:50:45 InnoDB: Completed initialization of buffer pool
    20201212 16:50:45 InnoDB: highest supported file format is Barracuda.
    20201212 16:50:45 InnoDB: Waiting for the background threads to start
    20201212 16:50:45 InnoDB: 1.1.7 started; log sequence number 1679264
    20201212 16:50:46 [Note] Event Scheduler: Loaded 0 events
    20201212 16:50:46 [Note] C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqld:ready for connections.
    Version: '8.0.13-log' socket: '' post: 3306 MySQL Community Server (GPL)
                    </code>
                </pre>
                <p class="firstLineIndent">以上是错误日志文件的一部分，这里面记载了系统的一些错误。</p>
            </div>
            <div id="log_classification_error_log_3" class="tab-pane fade">
                <p class="firstLineIndent">MySQL的错误日志是以文本文件的形式存储在文件系统中的，可以直接删除。</p>
                <p class="firstLineIndent">
                    对于MySQL 5.5.7以前的版本，<code>FLUSH LOGS</code>可以将错误日志文件重命名为filename.err_old，并创建新的日志文件。但是从MySQL 5.5.7开始，<code>FLUSH LOGS</code>只是
                    重新打开日志文件，并不做日志备份和创建的操作。如果日志文件不存在，MySQL启动或者执行<code>FLUSH LOGS</code>时会创建新的日志文件。
                </p>
                <p class="firstLineIndent">
                    在运行状态下删除错误日志文件后，MySQL并不会自动创建日志文件。<code>FLUSH LOGS</code>在重新加载日志的时候，如果文件不存在，则会自动创建。所以在删除错误日志之后，如果需要重建日志文件，
                    需要在服务器端执行以下命令：
                </p>
                <p class="firstLineIndent"><code>mysqladmin -u root -p flush-logs</code></p>
                <p class="firstLineIndent">或者在客户段登录MySQL数据库，执行<code>FLUSH LOGS</code>语句：</p>
                <pre>
                    <code class="sql">
    mysql> FLUSH LOGS;
    Query OK, 0 rows affected (0.23 sec)
                    </code>
                </pre>
            </div>
        </div>
    </div>
</div>

<!-- 日志分类-错误日志提示 -->
<div id="log_classification_error_log_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">错误日志</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">错误日志文件包含了当mysqld启动和停止时，以及服务器在运行过程中发生任何严重错误时的相关信息。在MySQL中，错误日志也是非常有用的，MySQL会将启动和停止数据库信息以及一些错误信息记录到错误日志文件中。</p>
    </div>
</div>

<!-- 日志分类-通用查询日志 -->
<div id="log_classification_general_query_log" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title tinyHand" onclick="logClassificationGeneralQueryLogTips()">通用查询日志 <i class="fa fa-hand-pointer-o"></i></h3>
    </div>
    <div class="panel-body">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#log_classification_general_query_log_1" data-toggle="tab">启动通用查询日志</a></li>
            <li><a href="#log_classification_general_query_log_2" data-toggle="tab">查看通用查询日志</a></li>
            <li><a href="#log_classification_general_query_log_3" data-toggle="tab">删除通用查询日志</a></li>
        </ul>
        <div class="tab-content">
            <div id="log_classification_general_query_log_1" class="tab-pane fade in active">
                <p class="firstLineIndent">MySQL服务器默认情况下并没有开启通用查询日志。通过<code>SHOW VARIABLES LIKE '%general%';</code>语句可以查询当前查询日志的状态：</p>
                <pre>
                    <code class="sql">
    mysql> SHOW VARIABLES LIKE '%general%';
    +------------------+---------------------+
    | Variable_name    |      Value          |
    +------------------+---------------------+
    | general_log      | OFF                 |
    | general_log_file | X0NHUMO7YDZVSSI.log |
    +------------------+---------------------+
    2 rows in set, 1 warning (0.11 sec)
                    </code>
                </pre>
                <p class="firstLineIndent">从结果可以看出，通用查询日志的状态为OFF，表示通用日志是关闭的。</p>
                <p class="firstLineIndent">开启通用日志的方法如下：</p>
                <pre>
                    <code class="sql">
    mysql> SET @@global.general_log = 1;
    Query OK, 0 rows affected (0.04 sec)
                    </code>
                </pre>
                <p class="firstLineIndent">再次查询通用日志的状态：</p>
                <pre>
                    <code class="sql">
    mysql> SHOW VARIABLES LIKE '%general%';
    +------------------+---------------------+
    | Variable_name    |      Value          |
    +------------------+---------------------+
    | general_log      | ON                  |
    | general_log_file | X0NHUMO7YDZVSSI.log |
    +------------------+---------------------+
    2 rows in set, 1 warning (0.03 sec)
                    </code>
                </pre>
                <p class="firstLineIndent">从结果可以看出，通用查询日志的状态为ON，表示通用日志已经开启了。</p>
                <p class="firstLineIndent">如果想关闭通用日志，执行以下语句即可：</p>
                <pre>
                    <code class="sql">
    mysql> SET @@global.general_log = 0;
    Query OK, 0 rows affected (0.00 sec)
                    </code>
                </pre>
            </div>
            <div id="log_classification_general_query_log_2" class="tab-pane fade">
                <p class="firstLineIndent">
                    通用查询日志中记录了用户的所有操作。通过查看通用查询日志，可以了解用户对MySQL进行的操作。通用查询日志是以文本文件的形式存储在文件系统中的，可以使用文本编辑器直接打开通用日志文件
                    进行查看，Windows下可以使用记事本，Linux下可以使用vim、gedit等。
                </p>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">使用记事本查看MySQL通用查询日志：</p>
                <pre>
                    <code class="sql">
    C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqld.exe,Version: 8.0.13 (MySQL Community Server - GPL). started with:
    TCP Port: 3306, Named Pipe: MySQL
    Time                  Id  Command    Argument
    2020-12-12 17:58:01   1   Connect    root@localhost on 1 Query select @@version_comment limit 1
    2020-12-12 17:59:03   1   Query      SELECT DATABASE() 1 Init DB test
    2020-12-12 17:59:25   1   Query      SELECT * FROM fruits
    2020-12-12 18:01:22   1   Quit
                    </code>
                </pre>
                <p class="firstLineIndent">以上是通用查询日志文件的一部分，可以看到MySQL启动信息和用户root连接服务器与执行查询语句的记录。</p>
            </div>
            <div id="log_classification_general_query_log_3" class="tab-pane fade">
                <p class="firstLineIndent">通用查询日志是以文本文件的形式存储在文件系统中的。通用查询日志记录用户的所有操作，因此在用户查询、更新频繁的情况下，通用查询日志会增长的很快。数据库管理员可以定期删除比较早的通用日志，以节省磁盘空间。</p>
                <p class="firstLineIndent">可以用直接删除日志文件的方式删除通用查询日志。要重新建立新的日志文件，可使用语句<code>mysqladmin -u root -p flush-logs</code></p>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">在数据目录中找到日志文件所在目录C:\ProgramData\MySQL\MySQL Server 8.0\Data\，删除该后缀为.log的文件。</p>
                <p class="firstLineIndent">通过<code>mysqladmin -u root -p flush-logs</code>命令建立新的日志文件，执行命令如下：</p>
                <pre>
                    <code class="sql">
    C:\ > mysqladmin -u root -p flush-logs
                    </code>
                </pre>
                <p class="firstLineIndent">执行完该命令，可以看到C:\ProgramData\MySQL\MySQL Server 8.0\Data\目录中已经建立了新的日志文件。</p>
            </div>
        </div>
    </div>
</div>

<!-- 日志分类-日志分类-通用查询日志提示 -->
<div id="log_classification_general_query_log_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">通用查询日志</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">通用查询日志记录MySQL的所有用户操作，包括启动和关闭服务、执行查询和更新语句等。</p>
    </div>
</div>

<!-- 日志分类-慢查询日志 -->
<div id="log_classification_slow_query_log" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title tinyHand" onclick="logClassificationSlowQueryLogTips()">慢查询日志 <i class="fa fa-hand-pointer-o"></i></h3>
    </div>
    <div class="panel-body">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#log_classification_slow_query_log_1" data-toggle="tab">启动和设置慢查询日志</a></li>
            <li><a href="#log_classification_slow_query_log_2" data-toggle="tab">查看慢查询日志</a></li>
            <li><a href="#log_classification_slow_query_log_3" data-toggle="tab">删除慢查询日志</a></li>
        </ul>
        <div class="tab-content">
            <div id="log_classification_slow_query_log_1" class="tab-pane fade in active">
                <p class="firstLineIndent">
                    MySQL中慢查询日志默认是关闭的，可以通过配置文件my.ini或者my.cnf中的<code>log-slow-queries</code>选项打开，也可以在MySQL服务启动的时候使用<code>--log-slow-queries[=file_name]</code>
                    启动慢查询日志。启动慢查询日志时，需要在my.ini或者my.cnf文件中配置<code>long_query_time</code>选项指定记录阈值，如果某条件查询语句的查询时间超过了这个值，这个查询过程将被记录到慢查询日志文件中。
                </p>
                <p class="firstLineIndent">在my.ini或者my.cnf开启慢查询日志的配置如下：</p>
                <pre>
                    <code class="sql">
    [mysqld]
    log-slow-queries [= path/[filename]]
    long_query_time = n
                    </code>
                </pre>
                <hr>
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th>参数</th>
                        <th>作用</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>path</td>
                        <td>为日志文件所在目录路径</td>
                    </tr>
                    <tr>
                        <td>filename</td>
                        <td>为日志文件名</td>
                    </tr>
                    </tbody>
                </table>
                <p class="firstLineIndent">如果不指定目录和文件名称，默认存储在数据目录中，文件为hostname-slow.log。</p>
                <hr>
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th>参数</th>
                        <th>作用</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>hostname</td>
                        <td>是MySQL服务器的主机名</td>
                    </tr>
                    <tr>
                        <td>n</td>
                        <td>是时间值，单位是秒。如果没有设置long_query_time选项，默认时间为10秒</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div id="log_classification_slow_query_log_2" class="tab-pane fade">
                <p class="firstLineIndent">
                    MySQL的慢查询日志是以文本形式存储的，可以直接使用文本编辑器查看。在慢查询日志中，记录着执行时间较长的查询语句，用户可以从慢查询日志中获取执行效率较低的查询语句，为查询优化提供重要的依据。
                </p>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">查看慢查询日志。使用文本编辑器打开数据目录下的Kevin-slow.log文件，文件部分如下：</p>
                <pre>
                    <code class="sql">
    C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqld.exe,Version: 8.0.13 (MySQL Community Server - GPL). started with:
    TCP Port: 3306, Named Pipe: MySQL
    Time                  Id  Command    Argument
    # Time: 20201212 18:25:33
    # User@Host: root[root] @ localhost [127.0.0.1]
    # Query_time: 136.500000 Lock_time: 0.000000 Rows_sent: 1 Rows_examined: 0
    SET timestamp = 1607768733;
    SELECT BENCHMARK(100000000, PASSWORD('newpwd'));
                    </code>
                </pre>
                <p class="firstLineIndent">
                    可以看到，这里记录了一条慢查询日志。执行该条查询语句的账户是root@localhost，查询时间是136.500000秒，查询语句是
                    SELECT BENCHMARK(100000000, PASSWORD('newpwd'));，该语句的查询时间大大超过了默认值10秒钟，因此被记录在慢查询日志文件中。
                </p>
                <p class="firstLineIndent">
                    <span class="note">注意</span>：借助慢查询日志分析工具，可以更加方便地分析慢查询语句。比较著名的慢查询工具有MySQL Dump Slow、MySQL SLA、MySQL Log Filter、MyProfi。
                </p>
            </div>
            <div id="log_classification_slow_query_log_3" class="tab-pane fade">
                <p class="firstLineIndent">
                    和通用查询日志一样，慢查询日志也可以直接删除。删除后在不重启服务器的情况下，需要执行<code>mysqladmin -u root -p flush-logs</code>重新生成日志文件，
                    或者在客户端登录到服务器执行<code>FLUSH LOGS</code>语句重建日志文件。
                </p>
            </div>
        </div>
    </div>
</div>

<!-- 日志分类-慢查询日志提示 -->
<div id="log_classification_slow_query_log_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">慢查询日志</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">慢查询日志是记录查询时长超过指定时间的日志。通过慢查询日志，可以找出执行时间较长、执行效率较低的语句，然后进行优化。</p>
    </div>
</div>

<!-- 日志分类更详细提示 -->
<div id="log_classification_is_more_detailed_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">日志分类更详细</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">在MySQL 8.0版本中，日志分类将更加详细。例如，在错误日志中添加了错误信息编号[MY-010311]和错误所属子系统[Server]。</p>
        <p class="firstLineIndent">在MySQL 5.7版本中，部分错误日志如下：</p>
        <pre>
            <code class="sql">
    2020-12-12T19:58:32.114585+08:00    0   [Warning]   'proxies_priv'  entry   '@ root@localhost'               ignored in --skip-name-resolve mode.
    2020-12-12T19:58:32.117848+08:00    0   [Warning]   'tables_priv'   entry   'user mysql.session@localhost'   ignored in --skip-name-resolve mode.
    2020-12-12T19:58:32.117868+08:00    0   [Warning]   'tables_priv'   entry   'sys_config mysql.sys@localhost' ignored in --skip-name-resolve mode.
            </code>
        </pre>
        <p class="firstLineIndent">在MySQL 8.0版本中，部分错误日志如下：</p>
        <pre>
            <code class="sql">
    2020-12-12T20:02:56.040295+08:00    0   [Warning]   [MY-010311]  [Server]   'proxies_priv'  entry   '@ root@localhost'               ignored in --skip-name-resolve mode.
    2020-12-12T20:02:56.040520+08:00    0   [Warning]   [MY-010311]  [Server]   'tables_priv'   entry   'user mysql.session@localhost'   ignored in --skip-name-resolve mode.
    2020-12-12T20:02:56.040542+08:00    0   [Warning]   [MY-010311]  [Server]   'tables_priv'   entry   'sys_config mysql.sys@localhost' ignored in --skip-name-resolve mode.
            </code>
        </pre>
    </div>
</div>

<!-- 分析查询语句提示 -->
<div id="analyze_query_statements_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">分析查询语句</h3>
    </div>
    <div class="panel-body">
        <p class="fa fa-fire"> EXPLAIN</p>
        <p class="firstLineIndent">通过对查询语句的分析，可以了解查询语句执行情况，找出查询语句执行的瓶颈，从而优化查询语句。MySQL中提供了<code>EXPLAIN</code>语句和<code>DESCRIBE</code>语句，用来分析查询语句。</p>
        <p class="firstLineIndent">EXPLAIN语句的基本语法如下：</p>
        <p class="firstLineIndent"><code>EXPLAIN [EXTENDED] SELECT select_options;</code></p>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>[EXTENDED]</td>
                <td>使用该关键字，EXPLAIN语句将产生附加信息</td>
            </tr>
            <tr>
                <td>select_options</td>
                <td>是SELECT语句的查询选项，包括FROM WHERE子句等</td>
            </tr>
            </tbody>
        </table>
        <p class="firstLineIndent">执行<code>EXPLAIN</code>语句，可以分析后面<code>SELECT</code>语句的执行情况，并且能够分析出所查询表的的一些特征。</p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用EXPLAIN语句来分析一个查询语句，可执行如下语句：</p>
        <pre>
            <code class="sql">
    mysql> EXPLAIN SELECT * FROM fruits;
    +----+-------------+--------+------+---------------+------+---------+------+------+-------+
    | id | select_type | table  | type | possible_keys | key  | key_len | ref  | rows | Extra |
    +----+-------------+--------+------+---------------+------+---------+------+------+-------+
    | 1  |   SIMPLE    | fruits | ALL  |      NULL     | NULL |   NULL  | NULL |  16  |       |
    +----+-------------+--------+------+---------------+------+---------+------+------+-------+
    1 row in set (0.00 sec)
            </code>
        </pre>
        <hr>
        <p class="fa fa-fire"> DESCRIBE</p>
        <p class="firstLineIndent"><code>DESCRIBE</code>语句的使用方法与<code>EXPLAIN</code>语句是一样的，并且分析结果也是一样的。DESCRIBE语句的语法形式如下：</p>
        <p class="firstLineIndent"><code>DESCRIBE SELECT select_options;</code></p>
        <p class="firstLineIndent">DESCRIBE可以缩写成DESC</p>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-id -->
<div id="analyze_query_statements_explain_id" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">id</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">id代表SELECT标识符。这是SELECT的查询序列号。</p>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-select_type -->
<div id="analyze_query_statements_explain_select_type" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">select_type</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">select_type表示SELECT语句的类型，它可以是以下几种取值：</p>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>SIMPLE</td>
                <td>表示简单查询，其中不包括连接查询和子查询</td>
            </tr>
            <tr>
                <td>PRIMARY</td>
                <td>表示主查询，或者是最外层的查询语句</td>
            </tr>
            <tr>
                <td>UNION</td>
                <td>表示连接查询的第2个或后面的查询语句</td>
            </tr>
            <tr>
                <td>DEPENDENT UNION</td>
                <td>连接查询中的第2个或后面的SELECT语句，取决于外面的查询</td>
            </tr>
            <tr>
                <td>UNION RESULT</td>
                <td>连接查询的结果</td>
            </tr>
            <tr>
                <td>SUBQUERY</td>
                <td>子查询中的第1个SELECT语句</td>
            </tr>
            <tr>
                <td>DEPENDENT SUBQUERY</td>
                <td>子查询中的第1个SELECT，取决于外面的查询</td>
            </tr>
            <tr>
                <td>DERIVED</td>
                <td>导出表的SELECT（FROM子句的子查询）</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-table -->
<div id="analyze_query_statements_explain_table" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">table</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">table表示查询的表。</p>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-type -->
<div id="analyze_query_statements_explain_type" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">type</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">type表示表的连接类型，下面按照从最佳类型到最差类型的顺序给出各种连接类型：</p>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>system</td>
                <td>该表是仅有一行的系统表。这是<code>const</code>连接类型的一个特例</td>
            </tr>
            <tr>
                <td>const</td>
                <td class="tinyHand" onclick="analyzeQueryStatementsExplainTypeConstTips()">数据表最多只有一个匹配行，将在查询开始时被读取，并在余下的查询优化中作为常量对待。const表查询速度很快，因为它们只读取一次。const用于使用常数值比较<code>PRIMARY KEY</code>或<code>UNIQUE</code>索引的所有部分的场合 <i class="fa fa-hand-pointer-o"></i></td>
            </tr>
            <tr>
                <td>eq_ref</td>
                <td class="tinyHand" onclick="analyzeQueryStatementsExplainTypeEqrefTips()">
                    对于每个来自前面的表的行组合，从该表中读取一行。当一个索引的所有部分都在查询中使用并且索引是<code>UNIQUE</code>或<code>PRIMARY KEY</code>时，即可使用这种类型。eq_ref可以用于
                    使用“=”操作符比较带索引的列。比较值可以为常量或一个在该表前面所读取的表的列的表达式
                    <i class="fa fa-hand-pointer-o"></i>
                </td>
            </tr>
            <tr>
                <td class="tinyHand" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">ref</td>
                <td class="tinyHand" onclick="analyzeQueryStatementsExplainTypeRefTips()">
                    对于来自前面的表的任意行组合，将从该表中读取所有匹配的行。这种类型用于索引既不是<code>UNIQUE</code>也不是<code>PRIMARY KEY</code>的情况，或者查询中使用了索引列的左子集，即索引
                    中左边的部分列组合。ref可以用于使用“=”或“&lt;=&gt;”操作符带索引的列
                    <i class="fa fa-hand-pointer-o"></i>
                    <p id="collapseOne" class="panel-collapse collapse">aaaaa</p>
                </td>
            </tr>
            <tr>
                <td>ref_or_null</td>
                <td class="tinyHand" onclick="analyzeQueryStatementsExplainTypeRefOrNUllTips()">该连接类型如同ref，但是添加了MySQL可以专门搜索包含NULL值的行。在解决子查询中经常使用该连接类型的优化 <i class="fa fa-hand-pointer-o"></i></td>
            </tr>
            <tr>
                <td>index_merge</td>
                <td>该连接类型表示使用了索引合并优化方法。在这种情况下，key列包含了使用的索引的清单，key_len包含了使用索引的最长关键元素</td>
            </tr>
            <tr>
                <td>unique_subquery</td>
                <td>
                    它是一个索引查找函数，可以完全替换子查询，效率更高。该类型替换了下面形式的IN子查询的ref：<br/>
                    value IN (SELECT primary_key FROM single_table WHERE some_expr)
                </td>
            </tr>
            <tr>
                <td>index_subquery</td>
                <td>
                    该连接类型类似于unique_subquery，可以替换IN子查询，但只适合下列形式的子查询中的非唯一索引：<br/>
                    value IN (SELECT key_column FROM single_table WHERE some_expr)
                </td>
            </tr>
            <tr>
                <td>range</td>
                <td class="tinyHand" onclick="analyzeQueryStatementsExplainTypeRangeTips()">
                    只检索给定范围的行，使用一个索引来选择行。key列显示使用了哪个索引。key_len包含所有使用索引的最长关键元素。
                    当使用“=”、“&lt;&gt;”、“&gt;”、“&gt;=”、“&lt;”、“&lt;=”、“IS NULL”、“&lt;=&gt;”、“BETWEEN”或者“IN”操作符用常量比较关键字列时，类型为range
                    <i class="fa fa-hand-pointer-o"></i>
                </td>
            </tr>
            <tr>
                <td>index</td>
                <td>该连接类型与ALL相同，除了只扫描索引树。这通常比ALL快，因为索引文件通常比数据文件小</td>
            </tr>
            <tr>
                <td>All</td>
                <td>对于前面的表的任意行组合，进行完整的表扫描。如果表是第一个没标记const的表，这样不好，并且在其他情况下很差。通常可以增加更多的索引来避免使用All连接</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-type-const提示 -->
<div id="analyze_query_statements_explain_type_const_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">const</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">在下面的查询中，tb1_name可用于const表：</p>
        <pre>
            <code class="sql">
    SELECT * FROM tb1_name
    WHERE primary_key = 1;

    SELECT * FROM tb1_name
    WHERE primary_key_part1 = 1
    AND primary_key_part2 = 2;
            </code>
        </pre>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-type-eq_ref提示 -->
<div id="analyze_query_statements_explain_type_eq_ref_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">eq_ref</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">在下面的例子中，MySQL可以使用eq_ref连接来处理ref_tables：</p>
        <pre>
            <code class="sql">
    SELECT * FROM ref_table,other_table
    WHERE ref_table.key_column = other_table.column;

    SELECT * FROM ref_table,other_table
    WHERE ref_table.key_column = other_table.column
    AND ref_table.key_column_part2 = 1;
            </code>
        </pre>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-type-ref提示 -->
<div id="analyze_query_statements_explain_type_ref_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">ref</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">在下面的例子中，MySQL可以使用ref连接来处理ref_tables：</p>
        <pre>
            <code class="sql">
    SELECT * FROM ref_table WHERE key_column = expr;

    SELECT * FROM ref_table,other_table
    WHERE ref_table.key_column = other_table.column;

    SELECT * FROM ref_table,other_table
    WHERE ref_table.key_column_part1 = other_table.column
    AND ref_table.key_column_part2 = 1;
            </code>
        </pre>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-type-ref_or_null提示 -->
<div id="analyze_query_statements_explain_type_ref_or_null_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">ref_or_null</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">在下面的例子中，MySQL可以使用ref_or_null连接来处理ref_tables：</p>
        <pre>
            <code class="sql">
    SELECT * FROM ref_table
    WHERE key_column = expr OR key_column IS NULL;
            </code>
        </pre>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-type-range提示 -->
<div id="analyze_query_statements_explain_type_range_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">range</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">下面介绍几种检索指定行情况：</p>
        <pre>
            <code class="sql">
    SELECT * FROM tb1_name
    WHERE key_column = 10;

    SELECT * FROM tb1_name
    WHERE key_column BETWEEN 10 AND 20;

    SELECT * FROM tb1_name
    WHERE key_column IN (10,20,30);

    SELECT * FROM tb1_name
    WHERE key_part1 = 10 AND key_part2 IN (10,20,30);
            </code>
        </pre>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-possible_keys -->
<div id="analyze_query_statements_explain_possible_keys" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">possible_keys</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            指出MySQL能使用哪个索引在该表中找到行。如果该列是<span class="note">NULL</span>，则没有相关的索引。在这种情况下，可以通过检查WHERE子句看它是否引用某些列或适合索引的列来提高查询性能。
            如果是这样，可以创建适合的索引来提高查询的性能
        </p>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-key -->
<div id="analyze_query_statements_explain_key" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">key</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            表示查询实际使用到的索引，如果没有选择索引，该列的值是<span class="note">NULL</span>。要想强制MySQL使用或忽视<code>possible_keys</code>列中的索引，在查询中使用
            <code>FORCE INDEX</code>、<code>USE INDEX</code>或者<code>IGNORE INDEX</code>。参见SELECT语法。
        </p>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-key_len -->
<div id="analyze_query_statements_explain_key_len" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">key_len</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            表示MySQL选择的索引字段按字节计算的长度，如果键是<span class="note">NULL</span>，则长度为NULL。注意，通过key_len值可以确定MySQL将实际使用一个多列索引中的几个字段
        </p>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-ref -->
<div id="analyze_query_statements_explain_ref" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">ref</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            表示使用哪个列或常数与索引一起来查询记录
        </p>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-rows -->
<div id="analyze_query_statements_explain_rows" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">rows</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            显示MySQL在表中进行查询时必须检查的行数
        </p>
    </div>
</div>

<!-- 分析查询语句-EXPLAIN-Extra -->
<div id="analyze_query_statements_explain_extra" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">Extra</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            表示MySQL在处理查询时的详细信息
        </p>
    </div>
</div>

<!-- 优化子查询提示 -->
<div id="optimize_subqueries_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">优化子查询</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            MySQL从4.1版本开始支持子查询，使用子查询可以进行SELECT语句的嵌套查询，即<b>一个SELECT查询的结果作为另一个SELECT语句的条件。</b>子查询可以一次性完成很多逻辑上
            需要多个步骤才能完成的SQL操作。子查询虽然可以使查询语句很灵活，但执行效率不高。执行子查询时，MySQL需要为内层查询语句的查询结果建立一个临时表。然后外层查询语句从临时
            表中查询记录。查询完毕后，再撤销这些临时表。因此，子查询的速度会受到一定的影响。如果查询的数据量比较大，这种影响就会随之增大。
        </p>
        <p class="firstLineIndent">
            在MySQL中，可以使用连接（<code>JOIN</code>）查询来替代子查询。连接查询不需要建立临时表，其速度比子查询要快，如果查询中使用索引，性能会更好。连接之所以更有效，是
            因为MySQL不需要在内存中创建临时表来完成查询工作。
        </p>
    </div>
</div>

<!-- 优化数据库结构提示 -->
<div id="optimize_database_structure_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">优化数据库结构</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            一个好的数据库设计方案对于数据库的性能常常会起到事半功倍的效果。合理的数据库结构不仅可以使数据库占用更小的磁盘空间，而且能够使查询速度更快。数据库结构的设计，需要考虑数据冗余、查询和更新的速度、
            字段的数据类型是否合理等多方面的内容。
        </p>
    </div>
</div>

<!-- 优化数据库结构-将字段很多的表分解成多个表 -->
<div id="optimize_database_structure_break_a_table_with_many_fields_into_multiple_tables" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">将字段很多的表分解成多个表</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">对于字段较多的表，如果有些字段的使用频率很低，可以将这些字段分离出来，形成新表。因为当一个表的数据量很大时，会由于使用频率低的字段的存在而变慢。</p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">
            假设会员表存储会员登录认证信息，该表中有很多字段，如id、姓名、密码、地址、电话、个人描述字段。其中，地址、电话、个人描述等字段并不常用。可以将这些不常用字段分解出另外一个表。
            将这个表取名叫members_detail。表中有member_id、address、telephone、description等字段。其中，member_id是会员编号，address字段存储地址信息，telephone字段存储
            电话信息，description字段存储会员个人描述信息。这样就把会员表分成两个表，分别为members表和members_detail表。
        </p>
        <p class="firstLineIndent">创建这两个表的SQL语句如下：</p>
        <pre>
            <code class="sql">
    mysql> CREATE TABLE members (
        -> id int(11) NOT NULL AUTO_INCREMENT,
        -> username varchar(255) DEFAULT NULL,
        -> password varchar(255) DEFAULT NULL,
        -> last_login_time datetime DEFAULT NULL,
        -> last_login_ip varchar(255) DEFAULT NULL,
        -> PRIMARY KEY(id)
        -> );
    mysql> CREATE TABLE members_detail (
        -> member_id int(11) NOT NULL DEFAULT 0,
        -> address varchar(255) DEFAULT NULL,
        -> telephone varchar(255) DEFAULT NULL,
        -> description text
        -> );
            </code>
        </pre>
        <p class="firstLineIndent">这两个表的结构如下：</p>
        <pre>
            <code class="sql">
    mysql> DESC members;
    +-----------------+--------------+------+-----+---------+----------------+
    |      Field      |     Type     | Null | Key | Default |      Extra     |
    +-----------------+--------------+------+-----+---------+----------------+
    |       id        | int(11)      | NO   | PRI | NULL    | auto_increment |
    |    username     | varchar(255) | YES  |     | NULL    |                |
    |    password     | varchar(255) | YES  |     | NULL    |                |
    | last_login_time | datetime     | YES  |     | NULL    |                |
    | last_login_ip   | varchar(255) | YES  |     | NULL    |                |
    +-----------------+--------------+------+-----+---------+----------------+
    5 rows in set (0.00 sec)
    mysql>
    mysql>
    mysql> DESC members_detail;
    +-----------------+--------------+------+-----+---------+----------------+
    |      Field      |     Type     | Null | Key | Default |      Extra     |
    +-----------------+--------------+------+-----+---------+----------------+
    |       id        | int(11)      | NO   | PRI | NULL    | auto_increment |
    |    username     | varchar(255) | YES  |     | NULL    |                |
    |    password     | varchar(255) | YES  |     | NULL    |                |
    | last_login_ip   | varchar(255) | YES  |     | NULL    |                |
    +-----------------+--------------+------+-----+---------+----------------+
            </code>
        </pre>
    </div>
</div>

<!-- CUSTOM JAVASCRIPT -->
<script type="text/javascript" src="../../../assets/scripts/common-method.js"></script>
<script type="text/javascript" src="../../../assets/scripts/base.js"></script>
<script type="text/javascript" src="../../../assets/scripts/responseStatusCode.js"></script>
<script type="text/javascript" src="../../../assets/scripts/mysql/mysql-high-level-knowledge/mysql-high-level-knowledge-mysql-log-and-performance-optimization.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>

</html>
