<!doctype html>
<html lang="en">

<head>
    <title>高阶知识-数据库备份与恢复</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!-- Javascript -->
    <script type="text/javascript" src="../../../assets/vendor/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap/js/bootstrap-paginator.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap-select/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/echarts/theme/macarons.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/layer/layer.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/laydate/laydate.js"></script>
    <script type="text/javascript" src="../../../assets/scripts/klorofil-common.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/ui-choose/js/ui-choose.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/highlight/highlight.pack.js"></script>
    <!-- VENDOR CSS -->
    <link rel="stylesheet" href="../../../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/bootstrap-select/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/linearicons/style.css">
    <link rel="stylesheet" href="../../../assets/vendor/ui-choose/css/ui-choose.css">
    <link rel="stylesheet" href="../../../assets/vendor/highlight/styles/rainbow.css">
    <!-- MAIN CSS -->
    <link rel="stylesheet" href="../../../assets/css/main.css">
    <!-- CUSTOMIZE CSS -->
    <link rel="stylesheet" href="../../../assets/css/roundButton.css">
    <!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
    <link rel="stylesheet" href="../../../assets/css/demo.css">
    <!-- GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
    <!-- ICONS -->
    <link rel="apple-touch-icon" sizes="76x76" href="../../../assets/img/apple-icon.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../../../assets/img/favicon.png">
</head>

<body>
<!-- WRAPPER -->
<div id="wrapper">
    <!-- NAVBAR -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="brand">
            <a href="../../../index.html"><img src="../../../assets/img/logo-KevenPotter.png" alt="KevenPotter Logo" class="img-responsive logo"></a>
        </div>
        <div class="container-fluid">
            <div class="navbar-btn">
                <button type="button" class="btn-toggle-fullwidth"><i class="lnr lnr-arrow-left-circle"></i></button>
            </div>
            <form class="navbar-form navbar-left">
                <div class="input-group">
                    <input type="text" value="" class="form-control" placeholder="搜索内容...">
                    <span class="input-group-btn"><button type="button" class="btn btn-primary">Go</button></span>
                </div>
            </form>
        </div>
    </nav>
    <!-- END NAVBAR -->
    <!-- LEFT SIDEBAR -->
    <div id="sidebar-nav" class="sidebar">
        <div class="sidebar-scroll">
            <nav>
                <ul class="nav">
                    <li><a href="../../../index.html" class=""><i class="lnr lnr-home"></i> <span>首页</span></a></li>
                    <li>
                        <a href="#distributedPage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-cloud"></i> <span>分布式</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="distributedPage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../../distributedPage/distributed_overview.html" class="">分布式概述</a></li>
                                <li><a href="../../distributedPage/zookeeper_overview.html" class="">ZooKeeper概述</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="#designPatternsPage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-laptop"></i> <span>设计模式</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="designPatternsPage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../../designPatternsPage/six_principles.html" class="">六大原则</a></li>
                                <li><a href="../../designPatternsPage/singleton_pattern.html" class="">单例模式</a></li>
                                <li><a href="../../designPatternsPage/factory_method_pattern.html" class="">工厂方法模式</a></li>
                                <li><a href="../../designPatternsPage/abstract_factory_pattern.html" class="">抽象工厂模式</a></li>
                                <li><a href="../../designPatternsPage/template_method_pattern.html" class="">模板方法模式</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a id="database_page_button" href="#databasePage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-database"></i> <span>数据库</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="databasePage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../mysql-basic-knowledge.html" class="">基础知识</a></li>
                                <li>
                                    <a href="#advanced_knowledge" data-toggle="collapse" class="collapsed"><span>进阶知识</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                                    <div id="advanced_knowledge" class="collapse ">
                                        <ul class="nav">
                                            <li><a href="../mysql-advanced-knowledge/mysql-advanced-knowledge-index.html" class=""><i class="lnr"></i>索引</a></li>
                                            <li><a href="../mysql-advanced-knowledge/mysql-advanced-knowledge-view.html" class=""><i class="lnr"></i>视图</a></li>
                                            <li><a href="../mysql-advanced-knowledge/mysql-advanced-knowledge-stored-procedure.html" class=""><i class="lnr"></i>存储过程</a></li>
                                            <li><a href="../mysql-advanced-knowledge/mysql-advanced-knowledge-trigger.html" class=""><i class="lnr"></i>触发器</a></li>
                                        </ul>
                                    </div>
                                </li>
                                <li>
                                    <a id="database_page_high_level_button" href="#high_level_knowledge" data-toggle="collapse" class="collapsed"><span>高阶知识</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                                    <div id="high_level_knowledge" class="collapse ">
                                        <ul class="nav">
                                            <li><a href="mysql-high-level-knowledge-authority-and-security-management.html" class=""><i class="lnr"></i>权限与安全管理</a></li>
                                            <li><a href="mysql-high-level-knowledge-database-backup-and-recovery.html" class="active"><i class="lnr"></i>数据库备份与恢复</a></li>
                                        </ul>
                                    </div>
                                </li>
                                <li><a href="../mysql-sub-database_sub-table.html" class="">分库分表</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    <!-- END LEFT SIDEBAR -->
    <!-- MAIN -->
    <div class="main">
        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div class="container-fluid">
                <h3 class="page-title tinyHand" onclick="databaseBackupAndRecoveryTips()">数据库备份与恢复 <i class="fa fa-hand-pointer-o"></i></h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title">数据备份</h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="data_backup" style="height:500%;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="dataRecoveryTips()">数据恢复 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="data_recovery" style="height:500%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END MAIN CONTENT -->
    </div>
    <!-- END MAIN -->
    <div class="clearfix"></div>
    <footer>
        <div class="container-fluid">
            <p class="copyright">Copyright &copy; https://github.com/KevenPotter/KevenPotterInterview <a href="https://github.com/KevenPotter/KevenPotterInterview" target="_blank" title="KevenPotter">KevenPotter</a> - Collect from <a href="https://github.com/KevenPotter" title="Github"
                                                                                                                                                                                                                                          target="_blank">KevenPotter主页</a></p>
        </div>
    </footer>
</div>
<!-- END WRAPPER -->

<!-- 数据库备份与恢复提示 -->
<div id="database_backup_and_recovery_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">数据库备份与恢复</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            尽管采取了一些管理措施来保证数据库的安全，但是不确定的意外情况总是有可能造成数据的损失，例如意外的停电、管理员不小心的操作失误都可能会造成数据的丢失。保证数据安全最重要的一个措施是确保对数据进行定期备份。
            如果数据库中的数据丢失或者出现错误，可以使用备份的数据进行恢复，这样就尽可能地降低了意外原因导致的损失。MySQL提供了多种方法对数据进行备份和恢复。
        </p>
    </div>
</div>

<!-- 数据备份-使用MySQLdump命令备份 -->
<div id="data_backup_use_mysqldump_command_to_backup" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title tinyHand" onclick="useMysqldumpCommandToBackupTips()">使用MySQLdump命令备份 <i class="fa fa-hand-pointer-o"></i></h3>
    </div>
    <div class="panel-body">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#data_backup_use_mysqldump_command_to_backup_1" data-toggle="tab">使用MySQLdump备份单个数据库中的所有表</a></li>
            <li><a href="#data_backup_use_mysqldump_command_to_backup_2" data-toggle="tab">使用MySQLdump备份数据库中的某个表</a></li>
            <li><a href="#data_backup_use_mysqldump_command_to_backup_3" data-toggle="tab">使用MySQLdump备份多个数据库</a></li>
        </ul>
        <div class="tab-content">
            <div id="data_backup_use_mysqldump_command_to_backup_1" class="tab-pane fade in active">
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">使用MySQLdump命令备份数据库中的所有表，执行过程如下：</p>
                <pre>
                    <code class="sql">
    mysql> CREATE DATABASE booksDB;
    mysql> use booksDB;
    mysql> CREATE TABLE books(
        -> bk_id INT NOT NULL PRIMARY KEY,
        -> bk_title VARCHAR(50) NOT NULL,
        -> copyright YEAR NOT NULL
        -> );
    mysql> INSERT INTO books
        -> VALUES (11078,'Learning MySQL',2010),
        -> (11033,'Study Html',2011),
        -> (11035,'How to use php',2003),
        -> (11072,'Teach yourself javascript',2005),
        -> (11028,'Learning C++',2005),
        -> (11069,'MySQL professional',2009),
        -> (11026,'Guide to MySQL 8.0',2008),
        -> (11041,'Inside VC++',2011);
    mysql>
    mysql>
    mysql> CREATE TABLE authors(
        -> auth_id INT NOT NULL PRIMARY KEY,
        -> auth_name VARCHAR(20),
        -> auth_gender CHAR(1)
        -> );
    mysql> INSERT INTO authors
        -> VALUES (1001,'WriterX','F'),
        -> (1002,'WriterA','F'),
        -> (1003,'WriterB','M'),
        -> (1004,'WriterC','F'),
        -> (1011,'WriterD','F'),
        -> (1012,'WriterE','M'),
        -> (1013,'WriterF','M'),
        -> (1014,'WriterG','F'),
        -> (1015,'WriterH','F');
    mysql>
    mysql>
    mysql> CREATE TABLE author_book(
        -> auth_id INT NOT NULL,
        -> bk_id INT NOT NULL,
        -> PRIMARY KEY (auth_id,bk_id),
        -> FOREIGN KEY (auth_id) REFERENCES authors (auth_id),
        -> FOREIGN KEY (bk_id) REFERENCES books (bk_id)
        -> );
    mysql> INSERT INTO author_book
        -> VALUES (1001,11033),(1002,11035),(1003,11072),(1004,11028),
        -> (1011,11078),(1012,11026),(1012,11041),(1014,11069);
                    </code>
                </pre>
                <p class="firstLineIndent">完成数据插入后，打开操作系统命令行输入窗口，输入备份命令如下（备份文件路径一定要存在，否则将提示错误信息：系统找不到指定的路径）：</p>
                <pre>
                    <code class="sql">
    C:\ >mysqldump -u root -p booksdb > C:/backup/booksdbBackup.sql
    Enter password: *********
                    </code>
                </pre>
                <p class="firstLineIndent">输入密码之后，MySQL便对数据库进行了备份，在C:\backup文件夹下面查看刚才备份过的文件，使用文本查看器打开文件可以看到其部分文件内容大致如下：</p>
                <pre>
                    <code class="sql">
    -- MySQL dump 10.13 Distrib 8.0.13, for Win64 (x86_64)
    --
    -- Host: localhost      Database: booksdb
    -- -----------------------------------------------------
    -- Server version    8.0.13


    /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
    /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
    /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
     SET NAMES utf8mb4 ;
    /*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
    /*!40103 SET TIME_ZONE='+00:00' */;
    /*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
    /*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
    /*!40111 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
    /*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;


    --
    -- Table structure for table `author_book`
    --


    DROP TABLE IF EXISTS `author_book`;
    /*!40101 SET @saved_cs_client = @@character_set_client */
    SET character_set_client = utf8mb4;
    CREATE TABLE `author_book` (
    `auth_id` int(11) NOT NULL,
    `bk_id` int(11) NOT NULL,
    PRIMARY KEY (`auth_id`,`bk_id`),
    KEY `bk_id` (`bk_id`),
    CONSTRAINT `author_book_ibfk_1` FOREIGN KEY (`auth_id`) REFERENCES `authors`(`auth_id`),
    CONSTRAINT `author_book_ibfk_2` FOREIGN KEY (`bk_id`) REFERENCES `books`(`bk_id`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
    /*!40101 SET character_set_client = @saved_cs_client */;


    --
    -- Dumping data for table `author_book`
    --


    LOCK TABLES `author_book` WRITE;
    /*!40000 ALTER TABLE `author_book` DISABLE KEYS */;
    INSERT INTO `author_book` VALUES (1001,11033),(1002,11035),(1003,11072),(1004,11028),(1011,11078),(1012,11026),(1012,11041),(1014,11069);
    /*!40000 ALTER TABLE `author_book` ENABLE KEYS */;
    UNLOCK TABLES;


    --
    -- Table structure for table `authors`
    --


    DROP TABLE IF EXISTS `authors`;
    /*!40101 SET @saved_cs_client = @@character_set_client */
    SET character_set_client = utf8mb4;
    CREATE TABLE authors(
    `auth_id` int(11) NOT NULL,
    `auth_name` varchar(20) DEFAULT NULL,
    `auth_gender` char(1) DEFAULT NULL,
    PRIMARY KEY (`auth_id`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
    /*!40101 SET character_set_client = @saved_cs_client */;


    --
    -- Dumping data for table `authors`
    --


    LOCK TABLES `authors` WRITE;
    /*!40000 ALTER TABLE `authors` DISABLE KEYS */;
    INSERT INTO `authors` VALUES (1001,'WriterX','F'),(1002,'WriterA','F'),(1003,'WriterB','M'),(1004,'WriterC','F'),(1011,'WriterD','F'),(1012,'WriterE','M'),(1013,'WriterF','M'),(1014,'WriterG','F'),(1015,'WriterH','F');
    /*!40000 ALTER TABLE `authors` ENABLE KEYS */;
    UNLOCK TABLES;


    --
    -- Table structure for table `books`
    --


    DROP TABLE IF EXISTS `books`;
    /*!40101 SET @saved_cs_client = @@character_set_client */
    SET character_set_client = utf8mb4;
    CREATE TABLE books(
    `bk_id` int(11) NOT NULL,
    `bk_title` varchar(50) NOT NULL,
    `copyright` year(4) NOT NULL,
    PRIMARY KEY (`bk_id`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
    /*!40101 SET character_set_client = @saved_cs_client */;


    --
    -- Dumping data for table `books`
    --


    LOCK TABLES `books` WRITE;
    /*!40000 ALTER TABLE `books` DISABLE KEYS */;
    INSERT INTO `books` VALUES (11078,'Learning MySQL',2010),(11033,'Study Html',2011),(11035,'How to use php',2003),(11072,'Teach yourself javascript',2005),(11028,'Learning C++',2005),(11069,'MySQL professional',2009),(11026,'Guide to MySQL 8.0',2008),(11041,'Inside VC++',2011);
    /*!40000 ALTER TABLE `books` ENABLE KEYS */;
    UNLOCK TABLES;
    /*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;
    /*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
    /*!40104 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
    /*!40104 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
    /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
    /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
    /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
    /*!40101 SET SQL_NOTES=@OLD_SQL_NOTES */;


    -- Dump completed on 20220-12-08 23:15:29
                    </code>
                </pre>
                <p class="firstLineIndent">可以看到备份文件包含了一些信息，文件开头首先声明了备份文件使用的MySQLdump工具的版本号；然后是备份账户的名称和主机信息，以及备份的数据库名称，最后是MySQL服务器的版本号，在这里为8.0.13。</p>
                <p class="firstLineIndent">备份文件接下来的部分是一些SET语句，这些语句将一些系统变量值赋给用户定义变量，以确保被恢复的数据库的系统变量和原来备份时的变量相同，例如：</p>
                <pre><code class="sql">/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;</code></pre>
                <p class="firstLineIndent">该SET语句将当前系统变量character_set_client的值赋给用户定义变量@old_character_set_client。其他变量与此类似。</p>
                <p class="firstLineIndent">备份文件的最后几行MySQL使用SET语句恢复服务器系统变量原来的值，例如：</p>
                <pre><code class="sql">/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;</code></pre>
                <p class="firstLineIndent">该语句将用户定义的变量@old_character_set_client中保存的值赋给实际的系统变量character_set_client。</p>
                <p class="firstLineIndent">备份文件中以“--”字符开头的行为注释语句；以“/*!”开头、“*/”结尾的语句为可执行的MySQL注释，这些语句可以被MySQL执行，但在其他数据库管理系统中将被作为注释忽略，以提高数据库的可移植性。</p>
                <p class="firstLineIndent">另外，备份文件开始的一些语句以数字开头，代表的是MySQL版本号，这些语句只有在指定的MySQL版本或者比该版本高的情况下才能执行。例如，40101，表明这些语句只有在MySQL版本号为4.01.01或者更高的条件下才可以被执行。</p>
            </div>
            <div id="data_backup_use_mysqldump_command_to_backup_2" class="tab-pane fade">
                <p class="firstLineIndent">如果要使用MySQLdump备份数据库中的某个表，其语法格式为：</p>
                <p class="firstLineIndent"><code>mysqldump -u user -h host -ppassword dbname[tbname,[tbname...]] > filename.sql</code></p>
                <hr>
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th>参数</th>
                        <th>作用</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>tbname</td>
                        <td>表示数据库中的表名，多个表名之间用空格隔开</td>
                    </tr>
                    </tbody>
                </table>
                <p class="firstLineIndent">备份表和备份数据库中所有表的语句不同的地方在于，要在数据库名称dbname之后指定需要备份的表名称。</p>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">备份booksdb数据库中的books表。输入语句如下：</p>
                <pre>
                    <code class="sql">
    C:\ >mysqldump -u root -p booksdb books > C:/backup/booksdbBooksBackup.sql
    Enter password: *********
                    </code>
                </pre>
                <p class="firstLineIndent">该语句创建名称为booksdbBooksBackup.sql的备份文件，文件中包含SET语句等内容，不同的是，该文件只包含books表的CREATE和INSERT语句。</p>
            </div>
            <div id="data_backup_use_mysqldump_command_to_backup_3" class="tab-pane fade">
                <p class="firstLineIndent">如果要使用MySQLdump备份多个数据库，就需要使用--databases参数，其语法格式为：</p>
                <p class="firstLineIndent"><code>mysqldump -u user -h host -ppassword --databases [dbname,[dbname...]] > filename.sql</code></p>
                <hr>
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th>参数</th>
                        <th>作用</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>--databases</td>
                        <td>其参数之后必须指定至少一个数据库的名称，多个数据库名称之间用空格隔开</td>
                    </tr>
                    </tbody>
                </table>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">使用MySQLdump备份boosdb和test_db数据库，输入语句如下：</p>
                <pre>
                    <code class="sql">
    C:\ >mysqldump -u root -p --databases booksdb test_db > C:/backup/booksdbAndtest_dbBackup.sql
    Enter password: *********
                    </code>
                </pre>
                <p class="firstLineIndent">该语句创建名称为booksdbAndtest_dbBackup.sql的备份文件，该文件中包含了创建两个数据库booksdb和test_db所必需的所有语句。</p>
                <p class="firstLineIndent">另外，使用--all-databases参数可以备份系统中所有的数据库，语句如下：</p>
                <p class="firstLineIndent"><code>mysqldump -u user -h host -ppassword --all-databases > filename.sql</code></p>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">使用MySQLdump备份服务器中的所有数据库，输入语句如下：</p>
                <pre>
                    <code class="sql">
    C:\ >mysqldump -u root -p --all-databases > C:/backup/alldbinMySQL.sql
    Enter password: *********
                    </code>
                </pre>
                <p class="firstLineIndent">该语句创建名称为alldbinMySQL.sql的备份文件，文件中包含了对系统中所有数据库的备份信息。</p>
                <p class="firstLineIndent">如果在服务器上备份，并且表均为MyISAM表，就应该考虑使用MySQLhotcopy，因为可以更快地进行备份和恢复。</p>
            </div>
        </div>
    </div>
</div>

<!-- 使用MySQLdump命令备份提示 -->
<div id="use_mysqldump_command_to_backup_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">使用MySQLdump命令备份</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">MySQLdump是MySQL提供的一个非常有用的数据库本分工具。MySQLdump命令执行时，可以将数据库备份成一个文本文件，该文件中实际包含了多个<code>CREATE</code>和<code>INSERT</code>语句，使用这些语句可以重新创建表和插入数据。</p>
        <p class="firstLineIndent">MySQLdump备份数据库语句的基本语法格式如下：</p>
        <p class="firstLineIndent"><code>mysqldump -u user -h host -ppassword dbname[tbname,[tbname...]] > filename.sql;</code></p>
        <hr>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>user</td>
                <td>表示用户名称</td>
            </tr>
            <tr>
                <td>host</td>
                <td>表示登录用户的主机名称</td>
            </tr>
            <tr>
                <td>password</td>
                <td>表示登录密码</td>
            </tr>
            <tr>
                <td>dbname</td>
                <td>表示为需要备份的数据库名称</td>
            </tr>
            <tr>
                <td>tbname</td>
                <td>表示数据库中需要备份的数据表，可以指定多个需要备份的表</td>
            </tr>
            <tr>
                <td>&gt;</td>
                <td>告诉MySQLdump将备份数据表的定义和数据写入备份文件</td>
            </tr>
            <tr>
                <td>filename.sql</td>
                <td>表示为备份文件的名称</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 数据备份-直接复制整个数据库目录 -->
<div id="data_backup_copy_the_entire_database_directory_directly" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">直接复制整个数据库目录</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            因为MySQL表保存为文件方式，所以可以直接复制MySQL数据库的存储目录及文件进行备份。MySQL的数据库目录位置不一定相同，在Windows平台下，MySQL 8.0存放数据库的目录通常
            默认为“C:\Documents and Setting\All Users\Application Data\MySQL\MySQL Server 8.0\data”或者其他用户自定义目录；在Linux平台下，数据库目录通常为
            /var/lib/MySQL/，不同Linux版本下目录会有所不同，读者应在自己使用的平台下查找该目录。
        </p>
        <p class="firstLineIndent">
            这是一种简单、快速、有效的备份方式。要想保持备份的一致性，备份前需要对相关表执行LOCK TABLES操作，然后对表执行FLUSH TABLES。这样当复制数据库目录中的文件时，允许其他客户继续
            查询表。需要FLUSH TABLES语句来确保开始备份前将所有激活的索引页写入磁盘。当然，也可以停止MySQL服务再进行备份操作。
        </p>
        <p class="firstLineIndent">这种方法虽然简单，但并不是最好的方法。因为这种方法对InnoDB存储引擎的表不适用。使用这种方法备份的数据最好恢复到相同版本的服务器中，不同的版本可能不兼容。</p>
        <p class="firstLineIndent"><span class="note">注意</span>：在MySQL版本号中，第一个数字表示版本号，主版本号相同的MySQL数据库文件格式相同。</p>
    </div>
</div>

<!-- 数据备份-使用MySQLhostcopy工具快速备份 -->
<div id="data_backup_use_mysqlhostcopy_tool_to_quickly_backup" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">使用MySQLhostcopy工具快速备份</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            MySQLhotcopy是一个Perl脚本，最初由Tim Bunce编写并提供。它使用LOCK TABLES、FLUSH TABLES和cp或scp来快速备份数据库。它是备份数据库或单个表最快的途径，
            但它只能运行在数据库目录所在的机器上，并且只能备份MyISAM类型的表。MySQLhotcopy在UNIX系统中运行。
        </p>
        <p class="firstLineIndent">MySQLhostcopy命令语法格式如下：</p>
        <p class="firstLineIndent"><code>mysqlhostcopy db_name_1,...db_name_n /path/to/new_directory</code></p>
        <hr>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>db_name_1...</td>
                <td>分别为需要备份的数据库的名称</td>
            </tr>
            <tr>
                <td>/path/to/new_directory</td>
                <td>指定备份文件目录</td>
            </tr>
            </tbody>
        </table>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用MySQLhotcopy备份test_db数据库到/usr/backup目录下，输入语句如下：</p>
        <pre>
            <code class="sql">
    mysqlhotcopy -u root -p test_db /usr/backup
            </code>
        </pre>
        <p class="firstLineIndent">要想执行MySQLhotcopy，必须可以访问备份的表文件，具有那些表的SELECT权限、RELOAD权限（以便能够执行FLUSH TABLES）和LOCK TABLES权限。</p>
        <p class="firstLineIndent"><span class="note">注意</span>：MySQLhotcopy只是将表所在的目录复制到另一个位置，只能用于备份MyISAM和ARCHIVE表。备份InnoDB类型的数据表时会出现错误信息。由于它复制本地格式的文件，因此也不能种植到其他硬件或操作系统下。</p>
    </div>
</div>

<!-- 数据恢复提示 -->
<div id="data_recovery_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">数据恢复</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            管理人员操作的失误、计算机故障以及其他意外情况，都会导致数据的丢失和破坏。当数据丢失或意外破坏时，可以通过恢复已经备份的数据尽量减少数据丢失和破坏
            造成的损失。
        </p>
    </div>
</div>

<!-- 数据恢复-使用MySQL命令恢复 -->
<div id="data_recovery_use_mysql_command_to_restore" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">使用MySQL命令恢复</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">对于已经备份的包含CREATE、INSERT语句的文本文件，可以使用MySQL命令导入到数据库中。</p>
        <p class="firstLineIndent">备份的sql文件中包含CREATE、INSERT语句（有时也会有DROP语句）。MySQL命令可以直接执行文件中的这些语句。其语法如下：</p>
        <p class="firstLineIndent"><code>mysql -u user -p [dbname] < filename.sql</code></p>
        <hr>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>user</td>
                <td>是执行filename.sql中语句的用户名</td>
            </tr>
            <tr>
                <td>-p</td>
                <td>表示输入用户密码</td>
            </tr>
            <tr>
                <td>dbname</td>
                <td>表示数据库名</td>
            </tr>
            <tr>
                <td>filename.sql</td>
                <td>备份有SQL语句的文件。如果文件为MySQLdump工具创建的包含创建数据库语句的文件，执行的时候不需要指定数据库名</td>
            </tr>
            </tbody>
        </table>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用MySQL命令将C:\backup\booksdb_20201208.sql文件中的备份导入到数据库中，输入语句如下：</p>
        <pre>
            <code class="sql">
    mysql -u root -p booksdb < C:/backup/booksdb_20201208.sql
            </code>
        </pre>
        <p class="firstLineIndent">执行语句前，必须现在MySQL服务器中创建booksdb数据库，如果不存在恢复过程将会出错。命令执行成功之后booksdb_20201208.sql文件中的语句就会在指定的数据库中恢复以前的表。</p>
        <p class="firstLineIndent">如果已经登录MySQL服务器，还可以使用<code>source</code>命令导入sql文件。<code>source</code>语句语法如下：</p>
        <p class="firstLineIndent"><code>source filename</code></p>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用root用户登录到服务器，然后使用source导入本地的备份文件booksdb_20201208.sql，输入语句如下：</p>
        <pre>
            <code class="sql">
    mysql> use booksdb;
    Database changed
    mysql> source C:\backup\booksdb_20201208.sql
            </code>
        </pre>
        <p class="firstLineIndent">命令执行后，会列出备份文件booksdb_20201208.sql中每一条语句的执行结果。source命令执行成功后，booksdb_20201208.sql中的语句会全部导入到现有数据库中。</p>
        <p class="firstLineIndent"><span class="note">注意</span>：执行source命令前，必须使用use语句选择数据库。不然，恢复过程中会出现“ERROR 1046(3D000):No database selected”的错误。</p>
    </div>
</div>

<!-- 数据恢复-直接复制到数据库目录 -->
<div id="data_recovery_copy_directly_to_the_database_directory" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">直接复制到数据库目录</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            如果数据库
        </p>
    </div>
</div>

<!-- CUSTOM JAVASCRIPT -->
<script type="text/javascript" src="../../../assets/scripts/common-method.js"></script>
<script type="text/javascript" src="../../../assets/scripts/base.js"></script>
<script type="text/javascript" src="../../../assets/scripts/responseStatusCode.js"></script>
<script type="text/javascript" src="../../../assets/scripts/mysql/mysql-high-level-knowledge/mysql-high-level-knowledge-database-backup-and-recovery.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>

</html>
