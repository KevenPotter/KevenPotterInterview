<!doctype html>
<html lang="en">

<head>
    <title>高阶知识-数据库备份与恢复</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!-- Javascript -->
    <script type="text/javascript" src="../../../assets/vendor/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap/js/bootstrap-paginator.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap-select/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/echarts/theme/macarons.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/layer/layer.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/laydate/laydate.js"></script>
    <script type="text/javascript" src="../../../assets/scripts/klorofil-common.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/ui-choose/js/ui-choose.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/highlight/highlight.pack.js"></script>
    <!-- VENDOR CSS -->
    <link rel="stylesheet" href="../../../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/bootstrap-select/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/linearicons/style.css">
    <link rel="stylesheet" href="../../../assets/vendor/ui-choose/css/ui-choose.css">
    <link rel="stylesheet" href="../../../assets/vendor/highlight/styles/rainbow.css">
    <!-- MAIN CSS -->
    <link rel="stylesheet" href="../../../assets/css/main.css">
    <!-- CUSTOMIZE CSS -->
    <link rel="stylesheet" href="../../../assets/css/roundButton.css">
    <!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
    <link rel="stylesheet" href="../../../assets/css/demo.css">
    <!-- GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
    <!-- ICONS -->
    <link rel="apple-touch-icon" sizes="76x76" href="../../../assets/img/apple-icon.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../../../assets/img/favicon.png">
</head>

<body>
<!-- WRAPPER -->
<div id="wrapper">
    <!-- NAVBAR -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="brand">
            <a href="../../../index.html"><img src="../../../assets/img/logo-KevenPotter.png" alt="KevenPotter Logo" class="img-responsive logo"></a>
        </div>
        <div class="container-fluid">
            <div class="navbar-btn">
                <button type="button" class="btn-toggle-fullwidth"><i class="lnr lnr-arrow-left-circle"></i></button>
            </div>
            <form class="navbar-form navbar-left">
                <div class="input-group">
                    <input type="text" value="" class="form-control" placeholder="搜索内容...">
                    <span class="input-group-btn"><button type="button" class="btn btn-primary">Go</button></span>
                </div>
            </form>
        </div>
    </nav>
    <!-- END NAVBAR -->
    <!-- LEFT SIDEBAR -->
    <div id="sidebar-nav" class="sidebar">
        <div class="sidebar-scroll">
            <nav>
                <ul class="nav">
                    <li><a href="../../../index.html" class=""><i class="lnr lnr-home"></i> <span>首页</span></a></li>
                    <li>
                        <a href="#distributedPage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-cloud"></i> <span>分布式</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="distributedPage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../../distributedPage/distributed_overview.html" class="">分布式概述</a></li>
                                <li><a href="../../distributedPage/zookeeper_overview.html" class="">ZooKeeper概述</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="#designPatternsPage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-laptop"></i> <span>设计模式</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="designPatternsPage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../../designPatternsPage/six_principles.html" class="">六大原则</a></li>
                                <li><a href="../../designPatternsPage/singleton_pattern.html" class="">单例模式</a></li>
                                <li><a href="../../designPatternsPage/factory_method_pattern.html" class="">工厂方法模式</a></li>
                                <li><a href="../../designPatternsPage/abstract_factory_pattern.html" class="">抽象工厂模式</a></li>
                                <li><a href="../../designPatternsPage/template_method_pattern.html" class="">模板方法模式</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a id="database_page_button" href="#databasePage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-database"></i> <span>数据库</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="databasePage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../mysql-basic-knowledge.html" class="">基础知识</a></li>
                                <li>
                                    <a href="#advanced_knowledge" data-toggle="collapse" class="collapsed"><span>进阶知识</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                                    <div id="advanced_knowledge" class="collapse ">
                                        <ul class="nav">
                                            <li><a href="../mysql-advanced-knowledge/mysql-advanced-knowledge-index.html" class=""><i class="lnr"></i>索引</a></li>
                                            <li><a href="../mysql-advanced-knowledge/mysql-advanced-knowledge-view.html" class=""><i class="lnr"></i>视图</a></li>
                                            <li><a href="../mysql-advanced-knowledge/mysql-advanced-knowledge-stored-procedure.html" class=""><i class="lnr"></i>存储过程</a></li>
                                            <li><a href="../mysql-advanced-knowledge/mysql-advanced-knowledge-trigger.html" class=""><i class="lnr"></i>触发器</a></li>
                                        </ul>
                                    </div>
                                </li>
                                <li>
                                    <a id="database_page_high_level_button" href="#high_level_knowledge" data-toggle="collapse" class="collapsed"><span>高阶知识</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                                    <div id="high_level_knowledge" class="collapse ">
                                        <ul class="nav">
                                            <li><a href="mysql-high-level-knowledge-authority-and-security-management.html" class=""><i class="lnr"></i>权限与安全管理</a></li>
                                            <li><a href="mysql-high-level-knowledge-database-backup-and-recovery.html" class="active"><i class="lnr"></i>数据库备份与恢复</a></li>
                                        </ul>
                                    </div>
                                </li>
                                <li><a href="../mysql-sub-database_sub-table.html" class="">分库分表</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    <!-- END LEFT SIDEBAR -->
    <!-- MAIN -->
    <div class="main">
        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div class="container-fluid">
                <h3 class="page-title tinyHand" onclick="databaseBackupAndRecoveryTips()">数据库备份与恢复 <i class="fa fa-hand-pointer-o"></i></h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title">数据备份</h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="data_backup" style="height:500%;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="dataRecoveryTips()">数据恢复 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="data_recovery" style="height:500%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="databaseMigrationTips()">数据库迁移 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="database_migration" style="height:500%;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="tableExportAndImportTips()">表的导出和导入 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="table_export_and_import" style="height:500%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END MAIN CONTENT -->
    </div>
    <!-- END MAIN -->
    <div class="clearfix"></div>
    <footer>
        <div class="container-fluid">
            <p class="copyright">Copyright &copy; https://github.com/KevenPotter/KevenPotterInterview <a href="https://github.com/KevenPotter/KevenPotterInterview" target="_blank" title="KevenPotter">KevenPotter</a> - Collect from <a href="https://github.com/KevenPotter" title="Github"
                                                                                                                                                                                                                                          target="_blank">KevenPotter主页</a></p>
        </div>
    </footer>
</div>
<!-- END WRAPPER -->

<!-- 数据库备份与恢复提示 -->
<div id="database_backup_and_recovery_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">数据库备份与恢复</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            尽管采取了一些管理措施来保证数据库的安全，但是不确定的意外情况总是有可能造成数据的损失，例如意外的停电、管理员不小心的操作失误都可能会造成数据的丢失。保证数据安全最重要的一个措施是确保对数据进行定期备份。
            如果数据库中的数据丢失或者出现错误，可以使用备份的数据进行恢复，这样就尽可能地降低了意外原因导致的损失。MySQL提供了多种方法对数据进行备份和恢复。
        </p>
    </div>
</div>

<!-- 数据备份-使用mysqldump命令备份 -->
<div id="data_backup_use_mysqldump_command_to_backup" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title tinyHand" onclick="useMysqldumpCommandToBackupTips()">使用mysqldump命令备份 <i class="fa fa-hand-pointer-o"></i></h3>
    </div>
    <div class="panel-body">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#data_backup_use_mysqldump_command_to_backup_1" data-toggle="tab">使用mysqldump备份单个数据库中的所有表</a></li>
            <li><a href="#data_backup_use_mysqldump_command_to_backup_2" data-toggle="tab">使用mysqldump备份数据库中的某个表</a></li>
            <li><a href="#data_backup_use_mysqldump_command_to_backup_3" data-toggle="tab">使用mysqldump备份多个数据库</a></li>
        </ul>
        <div class="tab-content">
            <div id="data_backup_use_mysqldump_command_to_backup_1" class="tab-pane fade in active">
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">使用mysqldump命令备份数据库中的所有表，执行过程如下：</p>
                <pre>
                    <code class="sql">
    mysql> CREATE DATABASE booksDB;
    mysql> use booksDB;
    mysql> CREATE TABLE books(
        -> bk_id INT NOT NULL PRIMARY KEY,
        -> bk_title VARCHAR(50) NOT NULL,
        -> copyright YEAR NOT NULL
        -> );
    mysql> INSERT INTO books
        -> VALUES (11078,'Learning MySQL',2010),
        -> (11033,'Study Html',2011),
        -> (11035,'How to use php',2003),
        -> (11072,'Teach yourself javascript',2005),
        -> (11028,'Learning C++',2005),
        -> (11069,'MySQL professional',2009),
        -> (11026,'Guide to MySQL 8.0',2008),
        -> (11041,'Inside VC++',2011);
    mysql>
    mysql>
    mysql> CREATE TABLE authors(
        -> auth_id INT NOT NULL PRIMARY KEY,
        -> auth_name VARCHAR(20),
        -> auth_gender CHAR(1)
        -> );
    mysql> INSERT INTO authors
        -> VALUES (1001,'WriterX','F'),
        -> (1002,'WriterA','F'),
        -> (1003,'WriterB','M'),
        -> (1004,'WriterC','F'),
        -> (1011,'WriterD','F'),
        -> (1012,'WriterE','M'),
        -> (1013,'WriterF','M'),
        -> (1014,'WriterG','F'),
        -> (1015,'WriterH','F');
    mysql>
    mysql>
    mysql> CREATE TABLE author_book(
        -> auth_id INT NOT NULL,
        -> bk_id INT NOT NULL,
        -> PRIMARY KEY (auth_id,bk_id),
        -> FOREIGN KEY (auth_id) REFERENCES authors (auth_id),
        -> FOREIGN KEY (bk_id) REFERENCES books (bk_id)
        -> );
    mysql> INSERT INTO author_book
        -> VALUES (1001,11033),(1002,11035),(1003,11072),(1004,11028),
        -> (1011,11078),(1012,11026),(1012,11041),(1014,11069);
                    </code>
                </pre>
                <p class="firstLineIndent">完成数据插入后，打开操作系统命令行输入窗口，输入备份命令如下（备份文件路径一定要存在，否则将提示错误信息：系统找不到指定的路径）：</p>
                <pre>
                    <code class="sql">
    C:\ >mysqldump -u root -p booksdb > C:/backup/booksdbBackup.sql
    Enter password: *********
                    </code>
                </pre>
                <p class="firstLineIndent">输入密码之后，MySQL便对数据库进行了备份，在C:\backup文件夹下面查看刚才备份过的文件，使用文本查看器打开文件可以看到其部分文件内容大致如下：</p>
                <pre>
                    <code class="sql">
    -- MySQL dump 10.13 Distrib 8.0.13, for Win64 (x86_64)
    --
    -- Host: localhost      Database: booksdb
    -- -----------------------------------------------------
    -- Server version    8.0.13


    /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
    /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
    /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
     SET NAMES utf8mb4 ;
    /*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
    /*!40103 SET TIME_ZONE='+00:00' */;
    /*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
    /*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
    /*!40111 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
    /*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;


    --
    -- Table structure for table `author_book`
    --


    DROP TABLE IF EXISTS `author_book`;
    /*!40101 SET @saved_cs_client = @@character_set_client */
    SET character_set_client = utf8mb4;
    CREATE TABLE `author_book` (
    `auth_id` int(11) NOT NULL,
    `bk_id` int(11) NOT NULL,
    PRIMARY KEY (`auth_id`,`bk_id`),
    KEY `bk_id` (`bk_id`),
    CONSTRAINT `author_book_ibfk_1` FOREIGN KEY (`auth_id`) REFERENCES `authors`(`auth_id`),
    CONSTRAINT `author_book_ibfk_2` FOREIGN KEY (`bk_id`) REFERENCES `books`(`bk_id`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
    /*!40101 SET character_set_client = @saved_cs_client */;


    --
    -- Dumping data for table `author_book`
    --


    LOCK TABLES `author_book` WRITE;
    /*!40000 ALTER TABLE `author_book` DISABLE KEYS */;
    INSERT INTO `author_book` VALUES (1001,11033),(1002,11035),(1003,11072),(1004,11028),(1011,11078),(1012,11026),(1012,11041),(1014,11069);
    /*!40000 ALTER TABLE `author_book` ENABLE KEYS */;
    UNLOCK TABLES;


    --
    -- Table structure for table `authors`
    --


    DROP TABLE IF EXISTS `authors`;
    /*!40101 SET @saved_cs_client = @@character_set_client */
    SET character_set_client = utf8mb4;
    CREATE TABLE authors(
    `auth_id` int(11) NOT NULL,
    `auth_name` varchar(20) DEFAULT NULL,
    `auth_gender` char(1) DEFAULT NULL,
    PRIMARY KEY (`auth_id`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
    /*!40101 SET character_set_client = @saved_cs_client */;


    --
    -- Dumping data for table `authors`
    --


    LOCK TABLES `authors` WRITE;
    /*!40000 ALTER TABLE `authors` DISABLE KEYS */;
    INSERT INTO `authors` VALUES (1001,'WriterX','F'),(1002,'WriterA','F'),(1003,'WriterB','M'),(1004,'WriterC','F'),(1011,'WriterD','F'),(1012,'WriterE','M'),(1013,'WriterF','M'),(1014,'WriterG','F'),(1015,'WriterH','F');
    /*!40000 ALTER TABLE `authors` ENABLE KEYS */;
    UNLOCK TABLES;


    --
    -- Table structure for table `books`
    --


    DROP TABLE IF EXISTS `books`;
    /*!40101 SET @saved_cs_client = @@character_set_client */
    SET character_set_client = utf8mb4;
    CREATE TABLE books(
    `bk_id` int(11) NOT NULL,
    `bk_title` varchar(50) NOT NULL,
    `copyright` year(4) NOT NULL,
    PRIMARY KEY (`bk_id`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
    /*!40101 SET character_set_client = @saved_cs_client */;


    --
    -- Dumping data for table `books`
    --


    LOCK TABLES `books` WRITE;
    /*!40000 ALTER TABLE `books` DISABLE KEYS */;
    INSERT INTO `books` VALUES (11078,'Learning MySQL',2010),(11033,'Study Html',2011),(11035,'How to use php',2003),(11072,'Teach yourself javascript',2005),(11028,'Learning C++',2005),(11069,'MySQL professional',2009),(11026,'Guide to MySQL 8.0',2008),(11041,'Inside VC++',2011);
    /*!40000 ALTER TABLE `books` ENABLE KEYS */;
    UNLOCK TABLES;
    /*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;
    /*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
    /*!40104 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
    /*!40104 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
    /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
    /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
    /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
    /*!40101 SET SQL_NOTES=@OLD_SQL_NOTES */;


    -- Dump completed on 20220-12-08 23:15:29
                    </code>
                </pre>
                <p class="firstLineIndent">可以看到备份文件包含了一些信息，文件开头首先声明了备份文件使用的mysqldump工具的版本号；然后是备份账户的名称和主机信息，以及备份的数据库名称，最后是MySQL服务器的版本号，在这里为8.0.13。</p>
                <p class="firstLineIndent">备份文件接下来的部分是一些SET语句，这些语句将一些系统变量值赋给用户定义变量，以确保被恢复的数据库的系统变量和原来备份时的变量相同，例如：</p>
                <pre><code class="sql">/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;</code></pre>
                <p class="firstLineIndent">该SET语句将当前系统变量character_set_client的值赋给用户定义变量@old_character_set_client。其他变量与此类似。</p>
                <p class="firstLineIndent">备份文件的最后几行MySQL使用SET语句恢复服务器系统变量原来的值，例如：</p>
                <pre><code class="sql">/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;</code></pre>
                <p class="firstLineIndent">该语句将用户定义的变量@old_character_set_client中保存的值赋给实际的系统变量character_set_client。</p>
                <p class="firstLineIndent">备份文件中以“--”字符开头的行为注释语句；以“/*!”开头、“*/”结尾的语句为可执行的MySQL注释，这些语句可以被MySQL执行，但在其他数据库管理系统中将被作为注释忽略，以提高数据库的可移植性。</p>
                <p class="firstLineIndent">另外，备份文件开始的一些语句以数字开头，代表的是MySQL版本号，这些语句只有在指定的MySQL版本或者比该版本高的情况下才能执行。例如，40101，表明这些语句只有在MySQL版本号为4.01.01或者更高的条件下才可以被执行。</p>
            </div>
            <div id="data_backup_use_mysqldump_command_to_backup_2" class="tab-pane fade">
                <p class="firstLineIndent">如果要使用mysqldump备份数据库中的某个表，其语法格式为：</p>
                <p class="firstLineIndent"><code>mysqldump -u user -h host -ppassword dbname[tbname,[tbname...]] > filename.sql</code></p>
                <hr>
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th>参数</th>
                        <th>作用</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>tbname</td>
                        <td>表示数据库中的表名，多个表名之间用空格隔开</td>
                    </tr>
                    </tbody>
                </table>
                <p class="firstLineIndent">备份表和备份数据库中所有表的语句不同的地方在于，要在数据库名称dbname之后指定需要备份的表名称。</p>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">备份booksdb数据库中的books表。输入语句如下：</p>
                <pre>
                    <code class="sql">
    C:\ >mysqldump -u root -p booksdb books > C:/backup/booksdbBooksBackup.sql
    Enter password: *********
                    </code>
                </pre>
                <p class="firstLineIndent">该语句创建名称为booksdbBooksBackup.sql的备份文件，文件中包含SET语句等内容，不同的是，该文件只包含books表的CREATE和INSERT语句。</p>
            </div>
            <div id="data_backup_use_mysqldump_command_to_backup_3" class="tab-pane fade">
                <p class="firstLineIndent">如果要使用mysqldump备份多个数据库，就需要使用--databases参数，其语法格式为：</p>
                <p class="firstLineIndent"><code>mysqldump -u user -h host -ppassword --databases [dbname,[dbname...]] > filename.sql</code></p>
                <hr>
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th>参数</th>
                        <th>作用</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>--databases</td>
                        <td>其参数之后必须指定至少一个数据库的名称，多个数据库名称之间用空格隔开</td>
                    </tr>
                    </tbody>
                </table>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">使用mysqldump备份boosdb和test_db数据库，输入语句如下：</p>
                <pre>
                    <code class="sql">
    C:\ >mysqldump -u root -p --databases booksdb test_db > C:/backup/booksdbAndtest_dbBackup.sql
    Enter password: *********
                    </code>
                </pre>
                <p class="firstLineIndent">该语句创建名称为booksdbAndtest_dbBackup.sql的备份文件，该文件中包含了创建两个数据库booksdb和test_db所必需的所有语句。</p>
                <p class="firstLineIndent">另外，使用--all-databases参数可以备份系统中所有的数据库，语句如下：</p>
                <p class="firstLineIndent"><code>mysqldump -u user -h host -ppassword --all-databases > filename.sql</code></p>
                <hr>
                <h4><i class="fa fa-female"></i><b>示例：</b></h4>
                <p class="firstLineIndent">使用mysqldump备份服务器中的所有数据库，输入语句如下：</p>
                <pre>
                    <code class="sql">
    C:\ >mysqldump -u root -p --all-databases > C:/backup/alldbinMySQL.sql
    Enter password: *********
                    </code>
                </pre>
                <p class="firstLineIndent">该语句创建名称为alldbinMySQL.sql的备份文件，文件中包含了对系统中所有数据库的备份信息。</p>
                <p class="firstLineIndent">如果在服务器上备份，并且表均为MyISAM表，就应该考虑使用mysqlhotcopy，因为可以更快地进行备份和恢复。</p>
            </div>
        </div>
    </div>
</div>

<!-- 使用mysqldump命令备份提示 -->
<div id="use_mysqldump_command_to_backup_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">使用mysqldump命令备份</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">mysqldump是MySQL提供的一个非常有用的数据库本分工具。mysqldump命令执行时，可以将数据库备份成一个文本文件，该文件中实际包含了多个<code>CREATE</code>和<code>INSERT</code>语句，使用这些语句可以重新创建表和插入数据。</p>
        <p class="firstLineIndent">mysqldump备份数据库语句的基本语法格式如下：</p>
        <p class="firstLineIndent"><code>mysqldump -u user -h host -ppassword dbname[tbname,[tbname...]] > filename.sql;</code></p>
        <hr>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>user</td>
                <td>表示用户名称</td>
            </tr>
            <tr>
                <td>host</td>
                <td>表示登录用户的主机名称</td>
            </tr>
            <tr>
                <td>password</td>
                <td>表示登录密码</td>
            </tr>
            <tr>
                <td>dbname</td>
                <td>表示为需要备份的数据库名称</td>
            </tr>
            <tr>
                <td>tbname</td>
                <td>表示数据库中需要备份的数据表，可以指定多个需要备份的表</td>
            </tr>
            <tr>
                <td>&gt;</td>
                <td>告诉mysqldump将备份数据表的定义和数据写入备份文件</td>
            </tr>
            <tr>
                <td>filename.sql</td>
                <td>表示为备份文件的名称</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 数据备份-直接复制整个数据库目录 -->
<div id="data_backup_copy_the_entire_database_directory_directly" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">直接复制整个数据库目录</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            因为MySQL表保存为文件方式，所以可以直接复制MySQL数据库的存储目录及文件进行备份。MySQL的数据库目录位置不一定相同，在Windows平台下，MySQL 8.0存放数据库的目录通常
            默认为“C:\Documents and Setting\All Users\Application Data\MySQL\MySQL Server 8.0\data”或者其他用户自定义目录；在Linux平台下，数据库目录通常为
            /var/lib/MySQL/，不同Linux版本下目录会有所不同，读者应在自己使用的平台下查找该目录。
        </p>
        <p class="firstLineIndent">
            这是一种简单、快速、有效的备份方式。要想保持备份的一致性，备份前需要对相关表执行LOCK TABLES操作，然后对表执行FLUSH TABLES。这样当复制数据库目录中的文件时，允许其他客户继续
            查询表。需要FLUSH TABLES语句来确保开始备份前将所有激活的索引页写入磁盘。当然，也可以停止MySQL服务再进行备份操作。
        </p>
        <p class="firstLineIndent">这种方法虽然简单，但并不是最好的方法。因为这种方法对InnoDB存储引擎的表不适用。使用这种方法备份的数据最好恢复到相同版本的服务器中，不同的版本可能不兼容。</p>
        <p class="firstLineIndent"><span class="note">注意</span>：在MySQL版本号中，第一个数字表示版本号，主版本号相同的MySQL数据库文件格式相同。</p>
    </div>
</div>

<!-- 数据备份-使用MySQLhostcopy工具快速备份 -->
<div id="data_backup_use_mysqlhostcopy_tool_to_quickly_backup" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">使用MySQLhostcopy工具快速备份</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            mysqlhotcopy是一个Perl脚本，最初由Tim Bunce编写并提供。它使用LOCK TABLES、FLUSH TABLES和cp或scp来快速备份数据库。它是备份数据库或单个表最快的途径，
            但它只能运行在数据库目录所在的机器上，并且只能备份MyISAM类型的表。mysqlhotcopy在UNIX系统中运行。
        </p>
        <p class="firstLineIndent">MySQLhostcopy命令语法格式如下：</p>
        <p class="firstLineIndent"><code>mysqlhostcopy db_name_1,...db_name_n /path/to/new_directory</code></p>
        <hr>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>db_name_1...</td>
                <td>分别为需要备份的数据库的名称</td>
            </tr>
            <tr>
                <td>/path/to/new_directory</td>
                <td>指定备份文件目录</td>
            </tr>
            </tbody>
        </table>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用mysqlhotcopy备份test_db数据库到/usr/backup目录下，输入语句如下：</p>
        <pre>
            <code class="sql">
    mysqlhotcopy -u root -p test_db /usr/backup
            </code>
        </pre>
        <p class="firstLineIndent">要想执行mysqlhotcopy，必须可以访问备份的表文件，具有那些表的SELECT权限、RELOAD权限（以便能够执行FLUSH TABLES）和LOCK TABLES权限。</p>
        <p class="firstLineIndent"><span class="note">注意</span>：mysqlhotcopy只是将表所在的目录复制到另一个位置，只能用于备份MyISAM和ARCHIVE表。备份InnoDB类型的数据表时会出现错误信息。由于它复制本地格式的文件，因此也不能种植到其他硬件或操作系统下。</p>
    </div>
</div>

<!-- 数据恢复提示 -->
<div id="data_recovery_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">数据恢复</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            管理人员操作的失误、计算机故障以及其他意外情况，都会导致数据的丢失和破坏。当数据丢失或意外破坏时，可以通过恢复已经备份的数据尽量减少数据丢失和破坏
            造成的损失。
        </p>
    </div>
</div>

<!-- 数据恢复-使用MySQL命令恢复 -->
<div id="data_recovery_use_mysql_command_to_restore" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">使用MySQL命令恢复</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">对于已经备份的包含CREATE、INSERT语句的文本文件，可以使用MySQL命令导入到数据库中。</p>
        <p class="firstLineIndent">备份的sql文件中包含CREATE、INSERT语句（有时也会有DROP语句）。MySQL命令可以直接执行文件中的这些语句。其语法如下：</p>
        <p class="firstLineIndent"><code>mysql -u user -p [dbname] < filename.sql</code></p>
        <hr>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>user</td>
                <td>是执行filename.sql中语句的用户名</td>
            </tr>
            <tr>
                <td>-p</td>
                <td>表示输入用户密码</td>
            </tr>
            <tr>
                <td>dbname</td>
                <td>表示数据库名</td>
            </tr>
            <tr>
                <td>filename.sql</td>
                <td>备份有SQL语句的文件。如果文件为mysqldump工具创建的包含创建数据库语句的文件，执行的时候不需要指定数据库名</td>
            </tr>
            </tbody>
        </table>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用MySQL命令将C:\backup\booksdb_20201208.sql文件中的备份导入到数据库中，输入语句如下：</p>
        <pre>
            <code class="sql">
    mysql -u root -p booksdb < C:/backup/booksdb_20201208.sql
            </code>
        </pre>
        <p class="firstLineIndent">执行语句前，必须现在MySQL服务器中创建booksdb数据库，如果不存在恢复过程将会出错。命令执行成功之后booksdb_20201208.sql文件中的语句就会在指定的数据库中恢复以前的表。</p>
        <p class="firstLineIndent">如果已经登录MySQL服务器，还可以使用<code>source</code>命令导入sql文件。<code>source</code>语句语法如下：</p>
        <p class="firstLineIndent"><code>source filename</code></p>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用root用户登录到服务器，然后使用source导入本地的备份文件booksdb_20201208.sql，输入语句如下：</p>
        <pre>
            <code class="sql">
    mysql> use booksdb;
    Database changed
    mysql> source C:\backup\booksdb_20201208.sql
            </code>
        </pre>
        <p class="firstLineIndent">命令执行后，会列出备份文件booksdb_20201208.sql中每一条语句的执行结果。source命令执行成功后，booksdb_20201208.sql中的语句会全部导入到现有数据库中。</p>
        <p class="firstLineIndent"><span class="note">注意</span>：执行source命令前，必须使用use语句选择数据库。不然，恢复过程中会出现“ERROR 1046(3D000):No database selected”的错误。</p>
    </div>
</div>

<!-- 数据恢复-直接复制到数据库目录 -->
<div id="data_recovery_copy_directly_to_the_database_directory" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">直接复制到数据库目录</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            如果数据库通过复制数据库文件备份，可以直接复制备份的文件到MySQL数据目录下实现恢复。通过这种方式恢复时，保存备份数据的数据库和待恢复的数据库服务器的主版本号必须相同。而且这种方式只对MyISAM引擎的表
            有效，对于InnoDB引擎的表不可用。
        </p>
        <p class="firstLineIndent">执行恢复以前关闭MySQL服务，将备份的文件或目录覆盖MySQL的data目录，启动MySQL服务。对于Linux/UNIX操作系统来说，复制完文件需要将文件的用户和组更改为MySQL运行的用户和组，通常用户是MySQL，组也是MySQL。</p>
    </div>
</div>

<!-- 数据恢复-MySQLhostcopy快速恢复 -->
<div id="data_recovery_mysqlhostcopy_quick_recovery" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">MySQLhostcopy快速恢复</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">MySQLhostcopy备份后的文件也可以用来恢复数据库，在MySQL服务器停止运行时，将备份的数据库文件复制到MySQL存放数据的位置（MySQL的data文件夹），重新启动MySQL服务即可。如果以根用户执行该操作，必须指定 数据库文件的所有者，输入语句如下：</p>
        <p class="firstLineIndent"><code>chown -R mysql.mysql /var/lib/mysql/dbname</code></p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">从mysqlhotcopy复制的备份恢复数据库，输入语句如下：</p>
        <pre>
            <code class="sql">
    cp -R /usr/backup/test usr/local/mysql/data
            </code>
        </pre>
        <p class="firstLineIndent">执行完该语句，重启服务器，MySQL将恢复到备份状态。如果需要恢复的数据库已经存在，则在使用DROP语句删除已经存在的数据库之后，恢复才能成功。另外，MySQL不同版本之间必须兼容，恢复之后的数据才可以使用。</p>
    </div>
</div>

<!-- 数据库迁移提示 -->
<div id="database_Migration_Tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">数据库迁移</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">数据库迁移就是把数据从一个系统移动到另一个系统上。数据迁移有以下原因：</p>
        <ol>
            <li>需要安装新的数据库服务器</li>
            <li>MySQL版本更新</li>
            <li>数据库管理系统的变更（如从Microsoft SQL Server迁移到MySQL）</li>
        </ol>
    </div>
</div>

<!-- 数据库迁移-相同版本的MySQL数据库之间的迁移 -->
<div id="database_migration_migration_between_mysql_databases_of_the_same_version" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">相同版本的MySQL数据库之间的迁移</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">相同版本的MySQL数据库之间的迁移就是在主版本号相同的MySQL数据库之间进行数据库移动。迁移过程其实就是在源数据库备份和目标数据库恢复过程的组合。</p>
        <p class="firstLineIndent">因为，最简单的方式是通过复制数据库文件目录，但是此种方法只适用于MyISAM引擎的表。而对于InnoDB表，不能用直接复制文件的方式备份数据库，因此最常用的和最安全的方式是使用mysqldump命令导出数据，然后在目标数据库服务器使用MySQL命令导入。</p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">将www.abc.com主机上的MySQL数据库全部迁移到www.bcd.com主机上。在www.abc.com主机上执行的命令如下：</p>
        <pre>
            <code class="sql">
    mysqldump -h www.abc.com -u root -ppassword dbname | mysql -h www.bcd.com -u root -ppassword
            </code>
        </pre>
        <p class="firstLineIndent">mysqldump导入的数据直接通过管道符“|”传给MySQL命令导入到主机www.bcd.com数据库中，dbname为需要迁移的数据库名称，如果要迁移全部的数据库，可使用参数--all-databases。</p>
    </div>
</div>

<!-- 数据库迁移-不同版本的MySQL数据库之间的迁移 -->
<div id="database_migration_migration_between_different_versions_of_mysql_databases" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">不同版本的MySQL数据库之间的迁移</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            因为数据库升级等原因，需要将较旧版本MySQL数据库中的数据迁移到较新版本的数据库中。MySQL服务器升级时，需要先停止服务，然后卸载旧版本，并重新安装新版的MySQL，这种更新方法很简单，如果想保留旧版本中的用户
            访问控制信息，就需要备份MySQL中的mysql数据库，在新版本MySQL安装完成之后，重新读入MySQL备份文件中的信息。
        </p>
        <p class="firstLineIndent">
            旧版本与新版本的MySQL可能使用不同的默认字符集，例如MySQL 8.0版本之前，默认字符集为latin1，而MySQL 8.0版本默认字符集为utf8mb4。数据库中有中文数据的，迁移过程中需要对默认字符集进行修改，不然可能无法正常显示结果。
        </p>
        <p class="firstLineIndent">
            新版本会对旧版本有一定兼容性。从旧版本的MySQL向新版本的MySQL迁移时，对于MyISAM引擎的表，可以直接复制数据库文件，也可以使用mysqlhotcopy工具、mysqldump工具。对于InnoDB引擎的表，一般只能使用mysqldump将
            数据导出。然后使用mysql命令导入到目标服务器上。从新版本向旧版本MySQL迁移数据时要特别小心，最好使用mysqldump命令导出，然后导入目标数据库中。
        </p>
    </div>
</div>

<!-- 数据库迁移-不同数据库之间的迁移 -->
<div id="database_migration_migration_between_different_databases" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">不同数据库之间的迁移</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">不同类型的数据库之间的迁移，是指把MySQL的数据库迁移到其它类型的数据库，例如从MySQL迁移到Oracle，从Oracle迁移到MySQL，从MySQL迁移到SQL Server等。</p>
        <p class="firstLineIndent">
            迁移之前，需要了解不同数据库的架构，比较它们之间的差异。不同数据库中定义相同类型的数据的关键字可能会不同。例如，MySQL中日期字段分为DATE和TIME两种，而Oracle日期字段只有DATE。另外，数据库厂商
            并没有完全按照SQL标准来设计数据库系统，导致不同的数据库系统的SQL语句有差别。例如，MySQL几乎完全支持标准SQL语言，而Microsoft SQL Server使用的是T-SQL语言，T-SQL中有一些非标准的SQL语句，
            因此在迁移时必须对这些语句进行语句映射处理。
        </p>
        <p class="firstLineIndent">数据库迁移可以使用一些工具，例如在Windows系统下，可以使用MyODBC实现MySQL和SQL Server之间的迁移。MySQL官方提供的工具MySQL Migration Toolkit也可以在不同数据空间进行数据迁移。</p>
    </div>
</div>

<!-- 表的导出和导入提示 -->
<div id="table_export_and_import_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">表的导出和导入</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">有时会需要将MySQL数据库中的数据导出到外部存储文件中，MySQL数据库中的数据可以导出成sql文本文件、xml文件或者html文件。同样，这些导出文件也可以导入到MySQL数据库中。</p>
    </div>
</div>

<!-- 表的导出和导入-使用SELECT...INTO OUTFILE导出文本文件 -->
<div id="table_export_and_import_select_into_outfile" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">使用SELECT...INTO OUTFILE导出文本文件</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            MySQL数据库导出数据时，允许使用包含导出定义的<code>SELECT</code>语句进行数据的导出操作。该文件被创建到服务器主机上，因此必须拥有文件的写入权限（FILE权限）才能使用此语法。
            “SELECT...INTO OUTFILE 'filename'”形式的SELECT语句可以把被选择的行写入一个文件中，并且filename不能是一个已经存在的文件。SELECT...INTO OUTFILE语句的基本格式如下：
        </p>
        <p class="firstLineIndent"><code>SELECT columnList FROM table WHERE condition INTO OUTFILE 'filename' [OPTIONS]</code></p>
        <p class="firstLineIndent"><span class="bold">--OPTIONS 选项</span></p>
        <p class="firstLineIndent"><code>FIELDS TERMINATED BY 'value'</code></p>
        <p class="firstLineIndent"><code>FIELDS [OPTIONALLY] ENCLOSED BY 'value'</code></p>
        <p class="firstLineIndent"><code>FIELDS ESCAPED BY 'value'</code></p>
        <p class="firstLineIndent"><code>LINES STARTING BY 'value'</code></p>
        <p class="firstLineIndent"><code>LINES TERMINATED BY 'value'</code></p>
        <hr>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>SELECT...condition</td>
                <td>为一个查询语句，查询结果返回满足指定条件的一条或多条记录</td>
            </tr>
            <tr>
                <td>INTO OUTFILE</td>
                <td>把上面的SELECT语句查询出来的结果导出到名称为“filename”的外部文件中</td>
            </tr>
            <tr>
                <td>[OPTIONS]</td>
                <td class="tinyHand" onclick="tableExportAndImportSelectIntoOutfileOptionsTips()">为可选参数选项，OPTIONS部分的语法包括FIELDS和LINES子句 <i class="fa fa-hand-pointer-o"></i></td>
            </tr>
            </tbody>
        </table>
        <hr>
        <p class="firstLineIndent"><b>FIELDS和LINES两个子句都是自选的，但是如果两个都被指定了，FIELDS必须位于LINES的前面。</b></p>
        <p class="firstLineIndent">
            SELECT...INTO OUTFILE语句可以非常快速地把一个表转储到服务器上。如果想要在服务器主机之外的部分客户主机上创建结果文件，不能使用SELECT...INTO OUTFILE。在这种情况下，应该在客户主机上使用比如
            “mysql -e "SELECT ..." > filename”的命令来生成文件。
        </p>
        <p class="firstLineIndent">SELECT...INTO OUTFILE是LOAD DATA INFILE的补语。用于语句的OPTIONS部分的语法包括部分FIELDS和LINES子句，这些子句与LOAD DATA INFILE语句同时使用。</p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用SELECT...INTO OUTFILE将test_db数据库中的person表中的记录导出到文本文件，输入命令如下：</p>
        <pre>
            <code class="sql">
    mysql> SELECT * FROM test_db.person INTO OUTFILE 'D:/person0.txt';
            </code>
        </pre>
        <p class="firstLineIndent">执行后报错信息如下：</p>
        <p class="firstLineIndent"><b>ERROR 1290(HY000): The MySQL server is running with the --secure-file-priv option so it cannot execute this statement</b></p>
        <p class="firstLineIndent">这是因为MySQL默认对导出的目录有权限限制，也就是说使用命令行进行导出的时候，需要指定目录进行操作。那么指定的目录是什么呢？</p>
        <p class="firstLineIndent">查询指定目录的命令如下：</p>
        <pre>
            <code class="sql">
    mysql> SHOW GLOBAL variables LIKE '%secure%';
    +----------------------------+--------------------------------------------------+
    |       Variable_name        |                      Value                       |
    +----------------------------+--------------------------------------------------+
    |  require_secure_transport  |                       OFF                        |
    |  secure_file_priv          | C:\ProgramData\MySQL\MySQL Server 8.0\Uploads\   |
    +----------------------------+--------------------------------------------------+
            </code>
        </pre>
        <p class="firstLineIndent">
            因为secure_file_priv配置的关系，所以必须导出到C:\ProgramData\MySQL\MySQL Server 8.0\Uploads\目录下。如果想自定义导出路径，需要修改my.ini配置文件。打开路径
            C:\ProgramData\MySQL\MySQL Server 8.0，用记事本打开my.ini，然后搜索到以下代码：
        </p>
        <p class="firstLineIndent"><b>secure-file_priv="C:/ProgramData/MySQL/MySQL Server 8.0/Uploads\"</b></p>
        <p class="firstLineIndent">在上述代码前添加#，然后添加以下内容：</p>
        <p class="firstLineIndent"><b>secure-file-priv="D:/"</b></p>
        <p class="firstLineIndent">再次使用SELECT...INTO OUTFILE将test_db数据库中person表中的记录导出到文本文件，输入命令如下：</p>
        <pre>
            <code class="sql">
    mysql> SELECT * FROM test_db.person INTO OUTFILE 'D:/person0.txt';
    Query OK, 1 row affected (0.01 sec)
            </code>
        </pre>
        <p class="firstLineIndent">由于指定了INTO OUTFILE子句，因此SELECT会将查询出来的3个字段值保存到D:\person0.txt文件中。打开文件，内容如下：</p>
        <pre>
            <code class="sql">
    1   Green    21     Lawyer
    2   Suse     22     dancer
    3   Mary     24     Musician
    4   Willam   20     sports man
    5   Laura    25     \N
    6   Evans    27     secretary
    7   Dale     22     cook
    8   Edison   28     singer
    9   Harry    21     magician
    10  Harriet  19     pianist
            </code>
        </pre>
        <p class="firstLineIndent">默认情况下，MySQL使用制表符“\t”分隔不同的字段，字段没有被其他字符括起来。另外，第5行中有一个字段值为“\N”，表示该字段的值为NULL。默认情况下，如果遇到NULL值，将会返回“\N”，代表空值，其中的反斜线“\”表示转义字符，如果使用ESCAPED BY选项，则N前面为指定的转义字符。</p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用SELECT...INTO OUTFILE将test_db数据库person表中的记录导出到文本文件，使用FIELDS选项和LINES选项，要求字段之间使用逗号“,”间隔，所有字段值用双引号括起来，定义转义字符为单引号“'”，执行的命令如下：</p>
        <pre>
            <code class="sql">
    mysql> SELECT * FROM test_db.person INTO OUTFILE 'D:/person1.txt'
        -> FIELDS
        -> TERMINATED BY ','
        -> ENCLOSED BY '\"'
        -> ESCAPED BY '\''
        -> LINES
        -> TERMINATED BY '\r\n';
    Query OK, 1 row affected (0.01 sec)
            </code>
        </pre>
        <p class="firstLineIndent">该语句将把person表中所有记录导入到D盘目录下的person1.txt文本文件中。</p>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>TERMINATED BY ','</td>
                <td>表示字段之间用逗号分隔</td>
            </tr>
            <tr>
                <td>ENCLOSED BY '\"'</td>
                <td>表示每个字段用双引号括起来</td>
            </tr>
            <tr>
                <td>ESCAPED BY '\''</td>
                <td>表示将系统默认的转义字符替换为单引号</td>
            </tr>
            <tr>
                <td>TERMINATED BY '\r\n'</td>
                <td>表示每行以回车换行符为结尾，保证每一条记录占一行</td>
            </tr>
            </tbody>
        </table>
        <p class="firstLineIndent">执行成功后，在目录D盘下生成一个person1.txt文件。打开文件，内容如下：</p>
        <pre>
            <code class="sql">
    “1“,"Green","21","Lawyer"
    ”2“,"Suse","22","dancer"
    ”3“,"Mary","24","Musician"
    ”4“,"Willam","20","sports man"
    ”5“,"Laura","25",'N'
    ”6“,"Evans","27","secretary"
    ”7“,"Dale","22","cook"
    ”8“,"Edison","28","singer"
    ”9“,"Harry","21","magician"
    ”10","Harriet","19","pianist"
            </code>
        </pre>
        <p class="firstLineIndent">可以看到，所有的字段值都被双引号包括；第5条记录中空值的表示形式为<b>'N'</b>，即使用单引号替换了反斜线转义字符。</p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用SELECT...INTO OUTFILE将test_db数据库person表中的记录导出到文本文件，使用FIELDS选项和LINES选项，要求每行记录以字符串”&gt;&nbsp;“开始、以”&lt;end&gt;“字符串结尾，执行的命令如下：</p>
        <pre>
            <code class="sql">
    mysql> SELECT * FROM test_db.person INTO OUTFILE 'D:/person2.txt'
        -> LINES
        -> STARTING BY '&gt;&nbsp;'
        -> TERMINATED BY '&lt;end&gt;';
    Query OK, 1 row affected (0.01 sec)
            </code>
        </pre>
        <p class="firstLineIndent">执行成功后，在目录D盘下生成一个person2.txt文件。打开文件，内容如下：</p>
        <pre>
            <code class="sql">
    &gt;&nbsp;1  Green   21   Lawyer  &lt;end&gt;&gt;&nbsp;2  Suse   22   dancer  &lt;end&gt;&gt;&nbsp;3  Mary   24   Musician  &lt;end&gt;&gt;&nbsp;4  Willam   20   sports man  &lt;end&gt;&gt;&nbsp;5  Laura   25   \N  &lt;end&gt;&gt;&nbsp;6  Evans   27   secretary  &lt;end&gt;&gt;&nbsp;7  Dale   22   cook  &lt;end&gt;&gt;&nbsp;8  Edison   28   singer  &lt;end&gt;&gt;&nbsp;9  Harry   21   magician  &lt;end&gt;&gt;&nbsp;10  Harriet   19   pianist  &lt;end&gt;
            </code>
        </pre>
        <p class="firstLineIndent">可以看到，虽然将所有的字段值导出到文本文件中，但是所有的记录没有分行区分，出现这种情况是因为TERMINATED BY选项替换了系统默认的”\n“换行符，如果希望换行显示，则需要修改导出语句：</p>
        <pre>
            <code class="sql">
    mysql> SELECT * FROM test_db.person INTO OUTFILE 'D:/person2.txt'
        -> LINES
        -> STARTING BY '&gt;&nbsp;'
        -> TERMINATED BY '&lt;end&gt;\r\n';
    Query OK, 1 row affected (0.01 sec)
            </code>
        </pre>
        <p class="firstLineIndent">执行完语句之后，换行显示每条记录，结果如下：</p>
        <pre>
            <code class="sql">
    &gt;&nbsp;1  Green     21   Lawyer  &lt;end&gt;
    &gt;&nbsp;2  Suse      22   dancer  &lt;end&gt;
    &gt;&nbsp;3  Mary      24   Musician  &lt;end&gt;
    &gt;&nbsp;4  Willam    20   sports man  &lt;end&gt;
    &gt;&nbsp;5  Laura     25   \N  &lt;end&gt;
    &gt;&nbsp;6  Evans     27   secretary  &lt;end&gt;
    &gt;&nbsp;7  Dale      22   cook  &lt;end&gt;
    &gt;&nbsp;8  Edison    28   singer  &lt;end&gt;
    &gt;&nbsp;9  Harry     21   magician  &lt;end&gt;
    &gt;&nbsp;10 Harriet   19   pianist  &lt;end&gt;
            </code>
        </pre>
    </div>
</div>

<!-- 表的导出和导入-使用SELECT...INTO OUTFILE导出文本文件-OPTIONS提示 -->
<div id="table_export_and_import_select_into_outfile_options_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">OPTIONS</h3>
    </div>
    <div class="panel-body">
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>FIELDS TERMINATED BY 'value'</td>
                <td>设置字段之间的分割字符，可以为单个或多个字符，默认情况下为制表符‘\t’</td>
            </tr>
            <tr>
                <td>FIELDS [OPTIONALLY] ENCLOSED BY 'value'</td>
                <td>设置字段的包围字符，只能为单个字符，若使用了OPTIONALLY则只有CHAR和VARCHAR等字符数据字段被包括</td>
            </tr>
            <tr>
                <td>FIELDS ESCAPED BY 'value'</td>
                <td>设置如何写入或读取特殊字符，只能为单个字符，即设置转义字符，默认值为‘\’</td>
            </tr>
            <tr>
                <td>LINES STARTING BY 'value'</td>
                <td>设置每行数据开头的字符，可以为单个或多个字符，默认情况下不使用任何字符</td>
            </tr>
            <tr>
                <td>LINES TERMINATED BY 'value'</td>
                <td>设置每行数据结尾的字符，可以为单个或多个字符，默认值为‘\n’</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 表的导出和导入-使用mysqldump命令导出文本文件 -->
<div id="table_export_and_import_mysqldump" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">使用mysqldump命令导出文本文件</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">除了使用<code>SELECT...INTO OUTFILE</code>语句导出文本文件外，还可以使用mysqldump。该工具不仅可以将数据导出为包含<code>CREATE</code>、<code>INSERT</code>的sql文件，也可以导出为纯文本文件。</p>
        <p class="firstLineIndent">mysqldump创建一个包含创建表的<code>CREATE TABLE</code>语句的tablename.sql文件和一个包含其数据的tablename.txt文件。mysqldump导出文本文件的基本语法格式如下：</p>
        <p class="firstLineIndent"><code>mysqldump -T path -u root -p dbname [tables] [OPTIONS]</code></p>
        <p class="firstLineIndent"><span class="bold">--OPTIONS 选项</span></p>
        <p class="firstLineIndent"><code>--fields-terminated-by=value</code></p>
        <p class="firstLineIndent"><code>--fields-enclosed-by=value</code></p>
        <p class="firstLineIndent"><code>--fields-optionally-enclosed-by=value</code></p>
        <p class="firstLineIndent"><code>--fields-escaped-by=value</code></p>
        <p class="firstLineIndent"><code>--lines-terminated-by=value</code></p>
        <hr>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>-T</td>
                <td>只有指定了这个参数才可以导出纯文本文件</td>
            </tr>
            <tr>
                <td>path</td>
                <td>表示导出数据的目录</td>
            </tr>
            <tr>
                <td>tables</td>
                <td>表示指定要导出的表名称，如果不指定，将导出数据库dbname中所有的表</td>
            </tr>
            <tr>
                <td>[OPTIONS]</td>
                <td class="tinyHand" onclick="tableExportAndImportMysqldumpOptionsTips()">为可选参数选项，这些选项需要结合-T选项使用 <i class="fa fa-hand-pointer-o"></i></td>
            </tr>
            </tbody>
        </table>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用mysqldump将test_db数据库中的person表中的记录导出到文本文件，执行的命令如下：</p>
        <pre>
            <code class="sql">
    C:\>mysqldump -T D:\ test_db person -u root -p
            </code>
        </pre>
        <p class="firstLineIndent">语句执行成功，系统D盘目录下面将会有两个文件，分别为person.sql和person.txt。person.sql包含创建person表的CREATE语句，其内容如下：</p>
        <pre>
            <code class="sql">
    -- MySQL dump 10.13 Distrib 8.0.13, for Win64 (x8_64)
    --
    +----------------------------+--------------------------------------------------+
    |       Variable_name        |                      Value                       |
    +----------------------------+--------------------------------------------------+
    |  require_secure_transport  |                       OFF                        |
    |  secure_file_priv          | C:\ProgramData\MySQL\MySQL Server 8.0\Uploads\   |
    +----------------------------+--------------------------------------------------+
            </code>
        </pre>
        <p class="firstLineIndent">
            因为secure_file_priv配置的关系，所以必须导出到C:\ProgramData\MySQL\MySQL Server 8.0\Uploads\目录下。如果想自定义导出路径，需要修改my.ini配置文件。打开路径
            C:\ProgramData\MySQL\MySQL Server 8.0，用记事本打开my.ini，然后搜索到以下代码：
        </p>
        <p class="firstLineIndent"><b>secure-file_priv="C:/ProgramData/MySQL/MySQL Server 8.0/Uploads\"</b></p>
        <p class="firstLineIndent">在上述代码前添加#，然后添加以下内容：</p>
        <p class="firstLineIndent"><b>secure-file-priv="D:/"</b></p>
        <p class="firstLineIndent">再次使用SELECT...INTO OUTFILE将test_db数据库中person表中的记录导出到文本文件，输入命令如下：</p>
        <pre>
            <code class="sql">
    mysql> SELECT * FROM test_db.person INTO OUTFILE 'D:/person0.txt';
    Query OK, 1 row affected (0.01 sec)
            </code>
        </pre>
        <p class="firstLineIndent">由于指定了INTO OUTFILE子句，因此SELECT会将查询出来的3个字段值保存到D:\person0.txt文件中。打开文件，内容如下：</p>
        <pre>
            <code class="sql">
    1   Green    21     Lawyer
    2   Suse     22     dancer
    3   Mary     24     Musician
    4   Willam   20     sports man
    5   Laura    25     \N
    6   Evans    27     secretary
    7   Dale     22     cook
    8   Edison   28     singer
    9   Harry    21     magician
    10  Harriet  19     pianist
            </code>
        </pre>
        <p class="firstLineIndent">默认情况下，MySQL使用制表符“\t”分隔不同的字段，字段没有被其他字符括起来。另外，第5行中有一个字段值为“\N”，表示该字段的值为NULL。默认情况下，如果遇到NULL值，将会返回“\N”，代表空值，其中的反斜线“\”表示转义字符，如果使用ESCAPED BY选项，则N前面为指定的转义字符。</p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用SELECT...INTO OUTFILE将test_db数据库person表中的记录导出到文本文件，使用FIELDS选项和LINES选项，要求字段之间使用逗号“,”间隔，所有字段值用双引号括起来，定义转义字符为单引号“'”，执行的命令如下：</p>
        <pre>
            <code class="sql">
    mysql> SELECT * FROM test_db.person INTO OUTFILE 'D:/person1.txt'
        -> FIELDS
        -> TERMINATED BY ','
        -> ENCLOSED BY '\"'
        -> ESCAPED BY '\''
        -> LINES
        -> TERMINATED BY '\r\n';
    Query OK, 1 row affected (0.01 sec)
            </code>
        </pre>
        <p class="firstLineIndent">该语句将把person表中所有记录导入到D盘目录下的person1.txt文本文件中。</p>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>TERMINATED BY ','</td>
                <td>表示字段之间用逗号分隔</td>
            </tr>
            <tr>
                <td>ENCLOSED BY '\"'</td>
                <td>表示每个字段用双引号括起来</td>
            </tr>
            <tr>
                <td>ESCAPED BY '\''</td>
                <td>表示将系统默认的转义字符替换为单引号</td>
            </tr>
            <tr>
                <td>TERMINATED BY '\r\n'</td>
                <td>表示每行以回车换行符为结尾，保证每一条记录占一行</td>
            </tr>
            </tbody>
        </table>
        <p class="firstLineIndent">执行成功后，在目录D盘下生成一个person1.txt文件。打开文件，内容如下：</p>
        <pre>
            <code class="sql">
    “1“,"Green","21","Lawyer"
    ”2“,"Suse","22","dancer"
    ”3“,"Mary","24","Musician"
    ”4“,"Willam","20","sports man"
    ”5“,"Laura","25",'N'
    ”6“,"Evans","27","secretary"
    ”7“,"Dale","22","cook"
    ”8“,"Edison","28","singer"
    ”9“,"Harry","21","magician"
    ”10","Harriet","19","pianist"
            </code>
        </pre>
        <p class="firstLineIndent">可以看到，所有的字段值都被双引号包括；第5条记录中空值的表示形式为<b>'N'</b>，即使用单引号替换了反斜线转义字符。</p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用SELECT...INTO OUTFILE将test_db数据库person表中的记录导出到文本文件，使用FIELDS选项和LINES选项，要求每行记录以字符串”&gt;&nbsp;“开始、以”&lt;end&gt;“字符串结尾，执行的命令如下：</p>
        <pre>
            <code class="sql">
    mysql> SELECT * FROM test_db.person INTO OUTFILE 'D:/person2.txt'
        -> LINES
        -> STARTING BY '&gt;&nbsp;'
        -> TERMINATED BY '&lt;end&gt;';
    Query OK, 1 row affected (0.01 sec)
            </code>
        </pre>
        <p class="firstLineIndent">执行成功后，在目录D盘下生成一个person2.txt文件。打开文件，内容如下：</p>
        <pre>
            <code class="sql">
    &gt;&nbsp;1  Green   21   Lawyer  &lt;end&gt;&gt;&nbsp;2  Suse   22   dancer  &lt;end&gt;&gt;&nbsp;3  Mary   24   Musician  &lt;end&gt;&gt;&nbsp;4  Willam   20   sports man  &lt;end&gt;&gt;&nbsp;5  Laura   25   \N  &lt;end&gt;&gt;&nbsp;6  Evans   27   secretary  &lt;end&gt;&gt;&nbsp;7  Dale   22   cook  &lt;end&gt;&gt;&nbsp;8  Edison   28   singer  &lt;end&gt;&gt;&nbsp;9  Harry   21   magician  &lt;end&gt;&gt;&nbsp;10  Harriet   19   pianist  &lt;end&gt;
            </code>
        </pre>
        <p class="firstLineIndent">可以看到，虽然将所有的字段值导出到文本文件中，但是所有的记录没有分行区分，出现这种情况是因为TERMINATED BY选项替换了系统默认的”\n“换行符，如果希望换行显示，则需要修改导出语句：</p>
        <pre>
            <code class="sql">
    mysql> SELECT * FROM test_db.person INTO OUTFILE 'D:/person2.txt'
        -> LINES
        -> STARTING BY '&gt;&nbsp;'
        -> TERMINATED BY '&lt;end&gt;\r\n';
    Query OK, 1 row affected (0.01 sec)
            </code>
        </pre>
        <p class="firstLineIndent">执行完语句之后，换行显示每条记录，结果如下：</p>
        <pre>
            <code class="sql">
    &gt;&nbsp;1  Green     21   Lawyer  &lt;end&gt;
    &gt;&nbsp;2  Suse      22   dancer  &lt;end&gt;
    &gt;&nbsp;3  Mary      24   Musician  &lt;end&gt;
    &gt;&nbsp;4  Willam    20   sports man  &lt;end&gt;
    &gt;&nbsp;5  Laura     25   \N  &lt;end&gt;
    &gt;&nbsp;6  Evans     27   secretary  &lt;end&gt;
    &gt;&nbsp;7  Dale      22   cook  &lt;end&gt;
    &gt;&nbsp;8  Edison    28   singer  &lt;end&gt;
    &gt;&nbsp;9  Harry     21   magician  &lt;end&gt;
    &gt;&nbsp;10 Harriet   19   pianist  &lt;end&gt;
            </code>
        </pre>
    </div>
</div>

<!-- 表的导出和导入-使用mysqldump命令导出文本文件-OPTIONS提示 -->
<div id="table_export_and_import_mysqldump_options_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">OPTIONS</h3>
    </div>
    <div class="panel-body">
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>--fields-terminated-by=value</td>
                <td>设置字段之间的分割字符，可以为单个或多个字符，默认情况下为制表符‘\t’</td>
            </tr>
            <tr>
                <td>--fields-enclosed-by=value</td>
                <td>设置字段的包围字符</td>
            </tr>
            <tr>
                <td>--fields-optionally-enclosed-by=value</td>
                <td>设置字段的包围字符，只能为单个字符，只能包括CHAR和VARCHAR等字段字符数据字段</td>
            </tr>
            <tr>
                <td>--fields-escaped-by=value</td>
                <td>控制如何写入或读取特殊字符，只能为单个字符，即设置转义字符，默认值为反斜线”\“</td>
            </tr>
            <tr>
                <td>--lines-terminated-by=value</td>
                <td>设置每行数据结尾的字符，可以为单个或多个字符，默认值为‘\n’</td>
            </tr>
            </tbody>
        </table>
        <p class="firstLineIndent"><b>与<code>SELECT...INTO OUTFILE</code>语句中的OPTIONS各个参数设置不同，这里OPTIONS各个选项等号后面的value值不要用引号括起来。</b></p>
    </div>
</div>

<!-- CUSTOM JAVASCRIPT -->
<script type="text/javascript" src="../../../assets/scripts/common-method.js"></script>
<script type="text/javascript" src="../../../assets/scripts/base.js"></script>
<script type="text/javascript" src="../../../assets/scripts/responseStatusCode.js"></script>
<script type="text/javascript" src="../../../assets/scripts/mysql/mysql-high-level-knowledge/mysql-high-level-knowledge-database-backup-and-recovery.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>

</html>
