<!doctype html>
<html lang="en">

<head>
    <title>进阶知识-视图</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!-- Javascript -->
    <script type="text/javascript" src="../../../assets/vendor/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap/js/bootstrap-paginator.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap-select/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/echarts/theme/macarons.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/layer/layer.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/laydate/laydate.js"></script>
    <script type="text/javascript" src="../../../assets/scripts/klorofil-common.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/ui-choose/js/ui-choose.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/highlight/highlight.pack.js"></script>
    <!-- VENDOR CSS -->
    <link rel="stylesheet" href="../../../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/bootstrap-select/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/linearicons/style.css">
    <link rel="stylesheet" href="../../../assets/vendor/ui-choose/css/ui-choose.css">
    <link rel="stylesheet" href="../../../assets/vendor/highlight/styles/rainbow.css">
    <!-- MAIN CSS -->
    <link rel="stylesheet" href="../../../assets/css/main.css">
    <!-- CUSTOMIZE CSS -->
    <link rel="stylesheet" href="../../../assets/css/roundButton.css">
    <!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
    <link rel="stylesheet" href="../../../assets/css/demo.css">
    <!-- GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
    <!-- ICONS -->
    <link rel="apple-touch-icon" sizes="76x76" href="../../../assets/img/apple-icon.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../../../assets/img/favicon.png">
</head>

<body>
<!-- WRAPPER -->
<div id="wrapper">
    <!-- NAVBAR -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="brand">
            <a href="../../../index.html"><img src="../../../assets/img/logo-KevenPotter.png" alt="KevenPotter Logo" class="img-responsive logo"></a>
        </div>
        <div class="container-fluid">
            <div class="navbar-btn">
                <button type="button" class="btn-toggle-fullwidth"><i class="lnr lnr-arrow-left-circle"></i></button>
            </div>
            <form class="navbar-form navbar-left">
                <div class="input-group">
                    <input type="text" value="" class="form-control" placeholder="搜索内容...">
                    <span class="input-group-btn"><button type="button" class="btn btn-primary">Go</button></span>
                </div>
            </form>
        </div>
    </nav>
    <!-- END NAVBAR -->
    <!-- LEFT SIDEBAR -->
    <div id="sidebar-nav" class="sidebar">
        <div class="sidebar-scroll">
            <nav>
                <ul class="nav">
                    <li><a href="../../../index.html" class=""><i class="lnr lnr-home"></i> <span>首页</span></a></li>
                    <li>
                        <a href="#distributedPage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-cloud"></i> <span>分布式</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="distributedPage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../../distributedPage/distributed_overview.html" class="">分布式概述</a></li>
                                <li><a href="../../distributedPage/zookeeper_overview.html" class="">ZooKeeper概述</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="#designPatternsPage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-laptop"></i> <span>设计模式</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="designPatternsPage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../../designPatternsPage/six_principles.html" class="">六大原则</a></li>
                                <li><a href="../../designPatternsPage/singleton_pattern.html" class="">单例模式</a></li>
                                <li><a href="../../designPatternsPage/factory_method_pattern.html" class="">工厂方法模式</a></li>
                                <li><a href="../../designPatternsPage/abstract_factory_pattern.html" class="">抽象工厂模式</a></li>
                                <li><a href="../../designPatternsPage/template_method_pattern.html" class="">模板方法模式</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a id="database_page_button" href="#databasePage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-database"></i> <span>数据库</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="databasePage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../mysql-basic-knowledge.html" class="">基础知识</a></li>
                                <li>
                                    <a id="database_page_advanced_button" href="#advanced_knowledge" data-toggle="collapse" class="collapsed"><span>进阶知识</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                                    <div id="advanced_knowledge" class="collapse ">
                                        <ul class="nav">
                                            <li><a href="mysql-advanced-knowledge-index.html" class=""><i class="lnr"></i>索引</a></li>
                                            <li><a href="mysql-advanced-knowledge-view.html" class="active"><i class="lnr"></i>视图</a></li>
                                            <li><a href="mysql-advanced-knowledge-stored-procedure.html" class=""><i class="lnr"></i>存储过程</a></li>
                                        </ul>
                                    </div>
                                </li>
                                <li><a href="../mysql-sub-database_sub-table.html" class="">分库分表</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    <!-- END LEFT SIDEBAR -->
    <!-- MAIN -->
    <div class="main">
        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div class="container-fluid">
                <h3 class="page-title">视图</h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="introductionToViewsTips()">视图简介 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="the_role_of_views" style="height:400%;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel panel-scrolling">
                            <div class="panel-heading">
                                <h3 id="create_view_panel_title_tips" class="panel-title" onmouseover="createViewTips()">创建视图</h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <h4><i class="fa fa-anchor"></i><b>创建视图的语法形式</b></h4>
                                <p class="firstLineIndent">创建视图使用CREATE VIEW语句，基本语法格式如下：</p>
                                <p class="firstLineIndent"><code>CREATE [OR REPLACE] [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]</code></p>
                                <p class="firstLineIndent"><code>VIEW view_name [(column_list)]</code></p>
                                <p class="firstLineIndent"><code>AS select_statement</code></p>
                                <p class="firstLineIndent"><code>[WITH [CASCADED | LOCAL] CHECK OPTION]</code></p>
                                <hr>
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>关键字</th>
                                        <th>作用</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>CREATE | REPLACE</td>
                                        <td>表示<span class="note">创建</span>新视图 | 表示<span class="note">替换</span>已经创建的视图</td>
                                    </tr>
                                    <tr>
                                        <td>ALGORITHM</td>
                                        <td class="tinyHand" onclick="createViewAlgorithmTips()">表示视图选择的算法 <i class="fa fa-hand-pointer-o"></i></td>
                                    </tr>
                                    <tr>
                                        <td>view_name</td>
                                        <td>为视图的名称</td>
                                    </tr>
                                    <tr>
                                        <td>column_list</td>
                                        <td>为属性列</td>
                                    </tr>
                                    <tr>
                                        <td>select_statement</td>
                                        <td>表示SELECT语句</td>
                                    </tr>
                                    <tr>
                                        <td>WITH [CASCADED | LOCAL] CHECK OPTION</td>
                                        <td class="tinyHand" onclick="createViewCascadedLocalTips()">表示视图在更新时保证在视图的权限范围之内 <i class="fa fa-hand-pointer-o"></i></td>
                                    </tr>
                                    </tbody>
                                </table>
                                <p class="firstLineIndent">该语句要求具有针对视图的CREATE VIEW权限，以及针对由SELECT语句选择的每一列上的某些权限。对于在SELECT语句中其他地方使用的列，必须具有SELECT权限。如果还有OR REPLACE子句，必须在视图上具有DROP权限。</p>
                                <p class="firstLineIndent">视图属于数据库。在默认情况下，将在当前数据库创建新视图。要想在给定数据库中明确创建视图，创建时应将名称指定为db_name.view_name。</p>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>在单表上创建视图</b></h4>
                                <p class="firstLineIndent">MySQL可以在单表上创建视图。</p>
                                <hr>
                                <h4><i class="fa fa-female"></i><b>示例1：</b></h4>
                                <pre>
                                    <code class="sql">
    mysql> CREATE TABLE t (quantity INT,price INT);
    mysql> INSERT INTO t VALUES(3,50)
    mysql> CREATE VIEW view_t AS SELECT quantity,price,quantity*price FROM t;
    mysql> SELECT * FROM view_t;
    +----------+-------------+------------------+
    | quantity |    price    |  quantity*price  |
    +----------+--------------------------------+
    |     3    |      50     |        150       |
    +----------+-------------+------------------+
                                    </code>
                                </pre>
                                <hr>
                                <h4><i class="fa fa-female"></i><b>示例2：</b></h4>
                                <pre>
                                    <code class="sql">
    mysql> CREATE VIEW view_t2(qty,price,total) AS SELECT quantity,price,quantity*price FROM t;
    mysql> SELECT * FROM view_t2;
    +-----+---------+---------+
    | qty |  price  |  total  |
    +-----+---------+---------+
    |  3  |   50    |   150   |
    +-----+-------------------+
                                    </code>
                                </pre>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>在多表上创建视图</b></h4>
                                <p class="firstLineIndent">MySQL也可以在两个或者两个以上的表上创建视图，可以使用CREATE VIEW语句实现</p>
                                <hr>
                                <h4><i class="fa fa-female"></i><b>示例1：</b></h4>
                                <p class="firstLineIndent">在表student和表stu_info上创建视图str_glass，代码如下：</p>
                                <pre>
                                    <code class="sql">
    mysql> INSERT INTO student VALUES(1,'wanglin1'),(2,'gaoli'),(3,'zhanghai');
    mysql> INSERT INTO stu_info VALUES(1,'wuban','henan'),(2,'liuban','hebei'),(3,'qiban','shandong');
        ->
        ->
    mysql> CREATE VIEW stu_glass (id,name,glass) AS
        -> SELECT student.s_id,student.name,stu_info.glass FROM student,stu_info
        -> WHERE student.s_id = stu_info.s_id;
    +----+------------+---------+
    | id |    name    |  glass  |
    +----+------------+---------+
    |  1 |  wanglin1  |  wuban  |
    |  2 |   gaoli    |  liuban |
    |  3 |  zhanghai  |  qiban  |
    +----+------------+---------+
                                    </code>
                                </pre>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="viewViewsTips()">查看视图 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="view_view" style="height:400%;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="modifyViewTips()">修改视图 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="modify_view" style="height:400%;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="updateViewsTips()">更新视图 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="update_views" style="height:400%;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="panel panel-scrolling">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="deleteViewsTips()">删除视图 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="delete_views" style="height:400%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END MAIN CONTENT -->
    </div>
    <!-- END MAIN -->
    <div class="clearfix"></div>
    <footer>
        <div class="container-fluid">
            <p class="copyright">Copyright &copy; https://github.com/KevenPotter/KevenPotterInterview <a href="https://github.com/KevenPotter/KevenPotterInterview" target="_blank" title="KevenPotter">KevenPotter</a> - Collect from <a href="https://github.com/KevenPotter" title="Github"
                                                                                                                                                                                                                                          target="_blank">KevenPotter主页</a></p>
        </div>
    </footer>
</div>
<!-- END WRAPPER -->

<!-- 视图简介提示 -->
<div id="introduction_to_views_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">视图简介</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">数据库中的<b>视图</b>是一个虚拟表。同真实的表一样，视图包含一系列带有名称的<b>行</b>和<b>列</b>数据。行和列数据来自由定义视图查询所引用的表，并且在引用视图时<span class="note">动态生成</span>。它本身是从一个或者多个表中导出的，视图的行为与表非常相似，但视图是一个虚拟表。</p>
        <p class="firstLineIndent">在视图中用户可以使用SELECT语句查询数据，以及使用INSERT、UPDATE和DELETE修改记录。从MySQL 5.0开始可以使用视图，视图可以使用户操作方便，而且可以保障数据库系统的安全。与此同时，视图还可以从已经存在的视图的基础上定义。</p>
        <p class="firstLineIndent">视图一经定义便存储在数据库中，与其相对应的数据并没有像表那样在数据库中再存储一份，通过视图看到的数据只是存放在基本表中的数据。对视图的操作与对表的操作一样，可以对其进行<b>查询</b>、<b>修改</b>和<b>删除</b>。当对通过视图看到的数据进行修改时，相应的基本表的数据也要发生变化；同时，若基本表的数据发生变化，则这种变化也可以自动反映到视图中。</p>
    </div>
</div>

<!-- 视图的作用-安全性 -->
<div id="the_role_of_views_safety" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">安全性</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">通过视图用户只能查询和修改他们所能见到的数据。数据库中的其他数据既看不见也取不到。数据库授权命令可以使每个用户对数据库的检索限制到特定的数据库对象上，但不能授权到数据库特定行和特定的列上。通过视图，用户可以被限制在数据的不同子集上：</p>
        <table class="table table-bordered">
            <tbody>
            <tr>
                <td>使用权限可被限制在基表的行的子集上</td>
            </tr>
            <tr>
                <td>使用权限可被限制在基表的列的子集上</td>
            </tr>
            <tr>
                <td>使用权限可被限制在基表的行和列的子集上</td>
            </tr>
            <tr>
                <td>使用权限可被限制在多个基表的连接所限定的行上</td>
            </tr>
            <tr>
                <td>使用权限可被限制在基表中的数据的统计汇总上</td>
            </tr>
            <tr>
                <td>使用权限可被限制在另一视图的一个子集上，或是一些视图和基表合并后的子集上</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- CREATE VIEW ALGORITHM算法提示 -->
<div id="create_view_algorithm_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">ALGORITHM取值</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">通过视图用户只能查询和修改他们所能见到的数据。数据库中的其他数据既看不见也取不到。数据库授权命令可以使每个用户对数据库的检索限制到特定的数据库对象上，但不能授权到数据库特定行和特定的列上。通过视图，用户可以被限制在数据的不同子集上：</p>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>关键字</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>UNDEFINED</td>
                <td>表示MySQL将自动选择算法</td>
            </tr>
            <tr>
                <td>MERGE</td>
                <td>表示将使用的视图语句与视图定义合并起来，使得视图定义的某一部分取代语句对应的部分</td>
            </tr>
            <tr>
                <td>TEMPTABLE</td>
                <td>表示将视图的结果存入临时表，然后用临时表来执行语句</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- CREATE VIEW CASCADED | LOCAL提示 -->
<div id="create_view_cascaded_local_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">CASCADED | LOCAL取值</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">通过视图用户只能查询和修改他们所能见到的数据。数据库中的其他数据既看不见也取不到。数据库授权命令可以使每个用户对数据库的检索限制到特定的数据库对象上，但不能授权到数据库特定行和特定的列上。通过视图，用户可以被限制在数据的不同子集上：</p>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>关键字</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>CASCADED</td>
                <td>为默认值，表示更新视图时要满足所有相关视图和表的条件</td>
            </tr>
            <tr>
                <td>LOCAL</td>
                <td>表示更新视图时满足该视图本身定义的条件即可</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 查看视图提示 -->
<div id="view_views_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">查看视图</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">查看视图是查看数据库中已存在的视图的定义。查看视图必须要有<code>SHOW VIEW</code>的权限，MySQL数据库下<code>user</code>表中保存着这个信息。</p>
        <p class="firstLineIndent">查看视图的方法包括<code>DESCRIBE</code>、<code>SHOW TABLE STATUS</code>和<code>SHOW CREATE VIEW</code>。</p>
        <p class="firstLineIndent"><code>DESCRIBE</code>一般情况下都简写成<code>DESC</code>，输入这个命令的执行结果和输入<code>DESCRIBE</code>的执行结果是一样的。</p>
    </div>
</div>

<!-- 查看视图-DESCRIBE -->
<div id="view_views_describe" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">DESCRIBE</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">DESCRIBE可以用来查看视图，具体的语法如下：</p>
        <p class="firstLineIndent"><code>DESCRIBE 视图名;</code></p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">通过DESCRIBE语句查看视图view_t的定义，代码如下：</p>
        <pre>
            <code class="sql">
    mysql> DESCRIBE view_t;
    +-----------------+--------------+------+-----+-----------+-------+
    |      Field      |    Type      | Null | Key |  Default  | Extra |
    +-----------------+--------------+------+-----+-----------+-------+
    |    quantity     |  int(11)     | YES  |     |    NULL   |       |
    |      price      |  int(11)     | YES  |     |    NULL   |       |
    |  quantity*price |  bigint(21)  | YES  |     |    NULL   |       |
    +-----------------+--------------+------+-----+-----------+-------+
            </code>
        </pre>
    </div>
</div>

<!-- 查看视图-SHOW TABLE STATUS -->
<div id="view_views_show_table_status" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">SHOW TABLE STATUS</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">查看视图的信息可以通过<code>SHOW TABLE STATUS</code>的方法完成，具体的语法如下：</p>
        <p class="firstLineIndent"><code>SHOW TABLE STATUS LIKE '视图名';</code></p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用SHOW TABLE STATUS语句查看视图view_t的定义，代码如下：</p>
        <pre>
            <code class="sql">
    mysql> SHOW TABLE STATUS LIKE 'view_t' \G;
    ***************************** 1.row ***************************
                        NAME: view_t
                      Engine: NULL
                     Version: NULL
                  Row_format: NULL
                        Rows: 0
              Avg_row_length: 0
                 Data_length: 0
             Max_data_length: 0
                Index_length: 0
                   Data_free: 0
              Auto_increment: NULL
                 Create_time: 2020-11-28 11:22:43
                 Update_time: NULL
                 Check_time: NULL
                  Collation: NULL
                   Checksum: NULL
             Create_options: NULL
                    Comment: VIEW
    1 row in set (0.01 sec)
            </code>
        </pre>
        <p class="firstLineIndent">执行结果显示，表的说明Comment的值为VIEW，说明该表为视图，其他的信息为NULL，说明这是一个<b>虚表</b>。</p>
    </div>
</div>

<!-- 查看视图-SHOW CREATE VIEW -->
<div id="view_views_show_create_view" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">SHOW CREATE VIEW</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">查看视图的信息可以通过<code>SHOW CREATE VIEW</code>的方法完成，具体的语法如下：</p>
        <p class="firstLineIndent"><code>SHOW CREATE VIEW 视图名;</code></p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用SHOW CREATE VIEW语句查看视图view_t的定义，代码如下：</p>
        <pre>
            <code class="sql">
    mysql> SHOW CREATE VIEW view_t \G;
    ***************************** 1.row ***************************
                        View: view_t
                 Create View: CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost`
                 SQL SECURITY DEFINER VIEW `view_t` AS select `t`.`quantity` AS `quantity`,
                 `t`.`price` AS `price`,(`t`.`quantity`*`t`.`price`) AS `quantity*price`
                 from `t`
        character_set_client: gbk
        collation_connection: gbk_chinese_ci
    1 row in set (0.00 sec)
            </code>
        </pre>
    </div>
</div>

<!-- 查看视图-information_schema.views -->
<div id="view_views_information_schema_views" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">information_schema.views</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">在MySQL中，information_schema数据库下的views表中存储了所有视图的定义。通过对views表的查询，可以查看数据库中所有视图的详细信息，查询语句如下：</p>
        <p class="firstLineIndent"><code>SELECT * FROM information_schema.views;</code></p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">在views表中查看视图的详细定义，代码如下：</p>
        <pre>
            <code class="sql">
    mysql> SELECT * FROM information_schema.views WHERE TABLE_NAME LIKE 'view_t%'; \G;
    ***************************** 1.row ***************************
                TABLE_CATALOG: def
                 TABLE_SCHEMA: chapter11db
                   TABLE_NAME: view_t
              VIEW_DEFINITION: select `chapter11db`.`t`.`quantity` AS `quantity`,
              `chapter11db`.`t`.`price` AS `price`,(`chapter11db`.`t`.`quantity`*`chapter11db`.`t`.`price`) AS `quantity*price`
              from `chapter11db`.`t`
                 CHECK_OPTION: NONE
                 IS_UPDATABLE: YES
                      DEFINER: root@localhost
                SECURITY_TYPE: DEFINER
         CHARACTER_SET_CLIENT: gbk
         COLLATION_CONNECTION: gbk_chinese_ci
    1 row in set (0.01 sec)
            </code>
        </pre>
    </div>
</div>

<!-- 修改视图提示 -->
<div id="modify_view_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">修改视图</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">修改视图是指修改数据库中存在的视图，当基本表的某些字段发生变化的时候，可以通过修改视图来保持与表的一致性。</p>
        <p class="firstLineIndent">MySQL通过<code>CREATE OR REPLACE VIEW</code>语句和<code>ALTER</code>语句来修改视图。</p>
    </div>
</div>

<!-- 修改视图-CREATE OR REPLACE VIEW -->
<div id="modify_view_create_or_replace_view" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">CREATE OR REPLACE VIEW</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">在MySQL中修改视图，可使用<code>CREATE OR REPLACE VIEW</code>语句，具体的语法如下：</p>
        <p class="firstLineIndent"><code>CREATE [OR REPLACE] [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]</code></p>
        <p class="firstLineIndent"><code>VIEW view_name [(column_list)]</code></p>
        <p class="firstLineIndent"><code>AS select_statement</code></p>
        <p class="firstLineIndent"><code>[WITH [CASCADED | LOCAL] CHECK OPTION]</code></p>
        <p class="firstLineIndent">可以看到，修改视图的语句和创建视图的语句是完全一样的。当视图已经存在，修改语句对视图进行修改；当视图不存在时，创建视图。</p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">修改视图view_t，代码如下：</p>
        <pre>
            <code class="sql">
    mysql> DESC view_t;
    +-----------------+--------------+------+-----+-----------+-------+
    |      Field      |    Type      | Null | Key |  Default  | Extra |
    +-----------------+--------------+------+-----+-----------+-------+
    |    quantity     |  int(11)     | YES  |     |    NULL   |       |
    |      price      |  int(11)     | YES  |     |    NULL   |       |
    |  quantity*price |  bigint(21)  | YES  |     |    NULL   |       |
    +-----------------+--------------+------+-----+-----------+-------+
    3 rows in set (0.00 sec)
    mysql>
    mysql>
    mysql> CREATE OR REPLACE VIEW view_t AS SELECT * FROM t;
    Query OK, 0 rows affected (0.05 sec)
    mysql>
    mysql>
    mysql> DESC view_t;
    +-----------------+--------------+------+-----+-----------+-------+
    |      Field      |    Type      | Null | Key |  Default  | Extra |
    +-----------------+--------------+------+-----+-----------+-------+
    |    quantity     |  int(11)     | YES  |     |    NULL   |       |
    |      price      |  int(11)     | YES  |     |    NULL   |       |
    +-----------------+--------------+------+-----+-----------+-------+
    2 rows in set (0.00 sec)
            </code>
        </pre>
        <p class="firstLineIndent">从执行结果来看，相比原来的视图view_t，新的视图少了1个字段。</p>
    </div>
</div>

<!-- 修改视图-ALTER -->
<div id="modify_view_alter" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">ALTER</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent"><code>ALTER</code>语句是MySQL提供的另一种修改视图的方法，语法如下：</p>
        <p class="firstLineIndent"><code>ALTER [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]</code></p>
        <p class="firstLineIndent"><code>VIEW view_name [(column_list)]</code></p>
        <p class="firstLineIndent"><code>AS select_statement</code></p>
        <p class="firstLineIndent"><code>[WITH [CASCADED | LOCAL] CHECK OPTION]</code></p>
        <p class="firstLineIndent">这个语法的关键字和前面视图的关键字是一样的。</p>
        <hr>
        <h4><i class="fa fa-female"></i><b>示例：</b></h4>
        <p class="firstLineIndent">使用ALTER语句修改视图view_t，代码如下：</p>
        <pre>
            <code class="sql">
    mysql> DESC view_t;
    +-----------------+--------------+------+-----+-----------+-------+
    |      Field      |    Type      | Null | Key |  Default  | Extra |
    +-----------------+--------------+------+-----+-----------+-------+
    |    quantity     |  int(11)     | YES  |     |    NULL   |       |
    |      price      |  int(11)     | YES  |     |    NULL   |       |
    +-----------------+--------------+------+-----+-----------+-------+
    2 rows in set (0.00 sec)
    mysql>
    mysql>
    mysql> ALTER VIEW view_t AS SELECT quantity FROM t;
    Query OK, 0 rows affected (0.05 sec)
    mysql>
    mysql>
    mysql> DESC view_t;
    +-----------------+--------------+------+-----+-----------+-------+
    |      Field      |    Type      | Null | Key |  Default  | Extra |
    +-----------------+--------------+------+-----+-----------+-------+
    |    quantity     |  int(11)     | YES  |     |    NULL   |       |
    +-----------------+--------------+------+-----+-----------+-------+
    1 rows in set (0.00 sec)
            </code>
        </pre>
        <p class="firstLineIndent">通过ALTER语句同样可以达到修改视图view_t的目的，从上面的执行过程来看，视图view_t只剩下一个quantity字段，修改成功。</p>
    </div>
</div>

<!-- CUSTOM JAVASCRIPT -->
<script type="text/javascript" src="../../../assets/scripts/common-method.js"></script>
<script type="text/javascript" src="../../../assets/scripts/base.js"></script>
<script type="text/javascript" src="../../../assets/scripts/responseStatusCode.js"></script>
<script type="text/javascript" src="../../../assets/scripts/mysql/mysql-advanced-knowledge/mysql-advanced-knowledge-view.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>

</html>
