<!doctype html>
<html lang="en">

<head>
    <title>进阶知识-存储过程</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!-- Javascript -->
    <script type="text/javascript" src="../../../assets/vendor/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap/js/bootstrap-paginator.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/bootstrap-select/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/echarts/theme/macarons.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/layer/layer.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/laydate/laydate.js"></script>
    <script type="text/javascript" src="../../../assets/scripts/klorofil-common.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/ui-choose/js/ui-choose.js"></script>
    <script type="text/javascript" src="../../../assets/vendor/highlight/highlight.pack.js"></script>
    <!-- VENDOR CSS -->
    <link rel="stylesheet" href="../../../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/bootstrap-select/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../../assets/vendor/linearicons/style.css">
    <link rel="stylesheet" href="../../../assets/vendor/ui-choose/css/ui-choose.css">
    <link rel="stylesheet" href="../../../assets/vendor/highlight/styles/rainbow.css">
    <!-- MAIN CSS -->
    <link rel="stylesheet" href="../../../assets/css/main.css">
    <!-- CUSTOMIZE CSS -->
    <link rel="stylesheet" href="../../../assets/css/roundButton.css">
    <!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
    <link rel="stylesheet" href="../../../assets/css/demo.css">
    <!-- GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
    <!-- ICONS -->
    <link rel="apple-touch-icon" sizes="76x76" href="../../../assets/img/apple-icon.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../../../assets/img/favicon.png">
</head>

<body>
<!-- WRAPPER -->
<div id="wrapper">
    <!-- NAVBAR -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="brand">
            <a href="../../../index.html"><img src="../../../assets/img/logo-KevenPotter.png" alt="KevenPotter Logo" class="img-responsive logo"></a>
        </div>
        <div class="container-fluid">
            <div class="navbar-btn">
                <button type="button" class="btn-toggle-fullwidth"><i class="lnr lnr-arrow-left-circle"></i></button>
            </div>
            <form class="navbar-form navbar-left">
                <div class="input-group">
                    <input type="text" value="" class="form-control" placeholder="搜索内容...">
                    <span class="input-group-btn"><button type="button" class="btn btn-primary">Go</button></span>
                </div>
            </form>
        </div>
    </nav>
    <!-- END NAVBAR -->
    <!-- LEFT SIDEBAR -->
    <div id="sidebar-nav" class="sidebar">
        <div class="sidebar-scroll">
            <nav>
                <ul class="nav">
                    <li><a href="../../../index.html" class=""><i class="lnr lnr-home"></i> <span>首页</span></a></li>
                    <li>
                        <a href="#distributedPage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-cloud"></i> <span>分布式</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="distributedPage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../../distributedPage/distributed_overview.html" class="">分布式概述</a></li>
                                <li><a href="../../distributedPage/zookeeper_overview.html" class="">ZooKeeper概述</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="#designPatternsPage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-laptop"></i> <span>设计模式</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="designPatternsPage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../../designPatternsPage/six_principles.html" class="">六大原则</a></li>
                                <li><a href="../../designPatternsPage/singleton_pattern.html" class="">单例模式</a></li>
                                <li><a href="../../designPatternsPage/factory_method_pattern.html" class="">工厂方法模式</a></li>
                                <li><a href="../../designPatternsPage/abstract_factory_pattern.html" class="">抽象工厂模式</a></li>
                                <li><a href="../../designPatternsPage/template_method_pattern.html" class="">模板方法模式</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a id="database_page_button" href="#databasePage" data-toggle="collapse" class="collapsed"><i class="lnr lnr-database"></i> <span>数据库</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="databasePage" class="collapse ">
                            <ul class="nav">
                                <li><a href="../mysql-basic-knowledge.html" class="">基础知识</a></li>
                                <li>
                                    <a id="database_page_advanced_button" href="#advanced_knowledge" data-toggle="collapse" class="collapsed"><span>进阶知识</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                                    <div id="advanced_knowledge" class="collapse ">
                                        <ul class="nav">
                                            <li><a href="mysql-advanced-knowledge-index.html" class=""><i class="lnr"></i>索引</a></li>
                                            <li><a href="mysql-advanced-knowledge-stored-procedure.html" class="active"><i class="lnr"></i>存储过程</a></li>
                                        </ul>
                                    </div>
                                </li>
                                <li><a href="../mysql-sub-database_sub-table.html" class="">分库分表</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    <!-- END LEFT SIDEBAR -->
    <!-- MAIN -->
    <div class="main">
        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div class="container-fluid">
                <h3 id="stored_procedure_page_title_tips" class="page-title">存储过程</h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel panel-scrolling panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="createStoredProcedureAndFunctionPanelTitleTips()">创建存储过程 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <h4><i class="fa fa-anchor"></i><b>创建存储过程，需要使用CREATE PROCEDURE语句，基本语法格式如下：</b></h4>
                                <code>CREATE PROCEDURE sp_name([proc_parameter]) [characteristics ...] routine_body</code>
                                <hr>
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>关键字</th>
                                        <th>作用</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>CREATE PROCEDURE</td>
                                        <td>为用来创建存储过程的关键字</td>
                                    </tr>
                                    <tr>
                                        <td>sp_name</td>
                                        <td>为存储过程的名称</td>
                                    </tr>
                                    <tr>
                                        <td>proc_parameter</td>
                                        <td class="tinyHand" onclick="createProcedureProcParameterTips()">为指定存储过程的参数列表 <i class="fa fa-hand-pointer-o"></i></td>
                                    </tr>
                                    <tr>
                                        <td>characteristics</td>
                                        <td class="tinyHand" onclick="createProcedureAndFunctionCharacteristicsTips()">指定存储过程的特性 <i class="fa fa-hand-pointer-o"></i></td>
                                    </tr>
                                    <tr>
                                        <td>routine_body</td>
                                        <td>是SQL代码内容，可以用BEGIN...END来表示SQL代码的开始和结束</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例1：</b></h4>
                                <pre>
                                    <code class="sql">
    CREATE PROCEDURE AvgFruitPrice()
    BEGIN
    SELECT AVG(f_price) AS avgPrice
    FROM fruits;
    END;
                                    </code>
                                </pre>
                                <p class="firstLineIndent">上述代码中，此存储过程名为AvgFruitPrice，使用CREATE PROCEDURE AvgFruitPrice()语句定义。此存储过程没有参数，但是后面的()仍然需要。BEGIN和END语句用来限定存储过程体，过程本身仅是一个简单的SELECT语句</p>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例2：</b></h4>
                                <pre>
                                    <code class="sql">
    mysql> DELIMITER //
    mysql> CREATE PROCEDURE Proc()
    mysql> BEGIN
    mysql> SELECT * FROM fruits;
    mysql> END; //
    Query OK, 0 rows affected (0.00 sec)
    mysql> DELIMITER ;
                                    </code>
                                </pre>
                                <p class="firstLineIndent">这行代码创建了一个查看fruits表的存储过程，每次调用这个存储过程的时候都会执行SELECT语句查看表的内容</p>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例3：</b></h4>
                                <pre>
                                    <code class="sql">
    mysql> DELIMITER //
    mysql> CREATE PROCEDURE CountProc(OUT param1 INT)
    mysql> BEGIN
    mysql> SELECT COUNT(*) INTO param1 FROM fruits;
    mysql> END; //
    Query OK, 0 rows affected (0.00 sec)
    mysql> DELIMITER ;
                                    </code>
                                </pre>
                                <p class="firstLineIndent">上述代码的作用是创建一个获取fruits表记录条数的存储过程，名称是CountProc，COUNT(*)计算后把结果放入参数param1中</p>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>DELIMITER：</b></h4>
                                <p class="firstLineIndent">“DELIMITER //”语句的作用是将MySQL的结束符设置为//，因为MySQL默认的语句结束符号为封号‘;’。为了避免与存储过程中SQL语句结束符相冲突，需要使用DELIMITER改变存储过程的结束符，并以“END //”结束存储过程。存储过程定义完毕之后再使用“DELIMITER ;”恢复默认结束符。DELIMITER也可以指定其他符号作为结束符。</p>
                                <p class="firstLineIndent"><b>当使用DELIMITER命令时，应该避免使用反斜杠（‘/’）字符，因为反斜线是MySQL的转义字符。</b></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel panel-scrolling panel-warning">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="createStoredProcedureAndFunctionPanelTitleTips()">创建存储函数 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <h4><i class="fa fa-anchor"></i><b>创建存储过程，需要使用CREATE FUNCTION语句，基本语法格式如下：</b></h4>
                                <code>CREATE FUNCTION func_name ([func_parameter]) RETURNS TYPE [characteristic ...] routine_body</code>
                                <hr>
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>关键字</th>
                                        <th>作用</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>CREATE FUNCTION</td>
                                        <td>为用来创建存储函数的关键字</td>
                                    </tr>
                                    <tr>
                                        <td>func_name</td>
                                        <td>为存储函数的名称</td>
                                    </tr>
                                    <tr>
                                        <td>func_parameter</td>
                                        <td class="tinyHand" onclick="createFunctionFuncParameterTips()">为指定存储函数的参数列表 <i class="fa fa-hand-pointer-o"></i></td>
                                    </tr>
                                    <tr>
                                        <td>RETURNS TYPE</td>
                                        <td>表示函数返回数据的类型</td>
                                    </tr>
                                    <tr>
                                        <td>characteristics</td>
                                        <td class="tinyHand" onclick="createProcedureAndFunctionCharacteristicsTips()">指定存储函数的特性 <i class="fa fa-hand-pointer-o"></i></td>
                                    </tr>
                                    <tr>
                                        <td>routine_body</td>
                                        <td>是SQL代码内容，可以用BEGIN...END来表示SQL代码的开始和结束</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例1：</b></h4>
                                <pre>
                                    <code class="sql">
    mysql> DELIMITER //
    mysql> CREATE FUNCTION NameByZip()
    mysql> RETURNS CHAR(50)
    mysql> RETURN (SELECT s_name FROM suppliers WHERE s_call = '48075');
    mysql> //
    Query OK, 0 rows affected (0.12 sec)
    mysql> DELIMITER ;
                                    </code>
                                </pre>
                                <p class="firstLineIndent">如果在存储函数中的RETURN语句返回一个类型不同于函数的RETURNS子句中指定类型的值，返回值将被强制为恰当的类型。比如，如果一个函数返回一个ENUM或SET值，但是RETURN语句返回一个整数，对于SET成员集相应的ENUM成员，从函数返回的值是字符串。</p>
                                <p class="firstLineIndent"><span class="note">提示</span>：指定参数为IN、OUT或INOUT只对PROCEDURE是合法的（FUNCTION中总是默认为IN参数）。RETURNS子句只能对FUNCTION做指定，对函数而言这是强制的。它用来指定函数的返回类型，而且函数体必须包含一个RETURN value语句。</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel panel-scrolling panel-info">
                            <div class="panel-heading">
                                <h3 class="panel-title">变量的使用</h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <p class="firstLineIndent"><b>变量</b>可以在子程序中声明并使用，这些变量的作用范围是在<span class="note">BEGIN...END</span>程序中</p>
                                <h4><i class="fa fa-anchor"></i><b>定义变量：</b></h4>
                                <code>DECLARE var_name [,var_name]... DATA_TYPE [DEFAULT value];</code>
                                <hr>
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>关键字</th>
                                        <th>作用</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>var_name</td>
                                        <td>为局部变量的名称</td>
                                    </tr>
                                    <tr>
                                        <td>DEFAULT value</td>
                                        <td>给变量提供一个默认值。值除了可以被声明为一个常数外，还可以被指定为一个表达式。如果没有DEFAULT子句，初始值为NULL</td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            定义名称为myParam的变量，类型为INT类型，默认值为100：<code>DECLARE myParam INT DEFAULT 100;</code>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>变量赋值：</b></h4>
                                <code class="tinyHand" onclick="variableAssignmentSetTips()">SET var_name = expr [,var_name = expr] ...; </code><i class="fa fa-hand-pointer-o"></i>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例1：</b></h4>
                                <p class="firstLineIndent">声明3个变量，分别为var1、var2和var3，数据类型为INT，使用SET为变量赋值，代码如下：</p>
                                <pre>
                                    <code class="sql">
    DECLARE var1, var2, var3 INT;
    SET var1 = 10, var2 = 20;
    SET var3 = var1 + var2;
                                    </code>
                                </pre>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>SELECT...INTO语法：</b></h4>
                                <p class="firstLineIndent">在MySQL中，还可以通过SELECT...INTO为一个或多个变量赋值。SELECT语法把选定的列直接存储到对应位置的变量。语法如下：</p>
                                <code>SELECT col_name[,...] INTO var_name[,...] table_expr;</code>
                                <hr>
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>关键字</th>
                                        <th>作用</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>col_name</td>
                                        <td>表示字段名称</td>
                                    </tr>
                                    <tr>
                                        <td>var_name</td>
                                        <td>表示定义的变量名称</td>
                                    </tr>
                                    <tr>
                                        <td>table_expr</td>
                                        <td>表示查询条件表达式，包括表名称和WHERE子句</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例1：</b></h4>
                                <p class="firstLineIndent">声明3个变量，分别为var1、var2和var3，数据类型为INT，使用SET为变量赋值，代码如下：</p>
                                <pre>
                                    <code class="sql">
    -- 声明变量fruitName和fruitPrice，通过SELECT...INTO语句查询指定记录并为变量赋值：
    DECLARE fruitName CHAR(50);
    DECLARE fruitPrice DECIMAL(8,2);
    SELECT f_name,f_price INTO fruitName,fruitPrice
    FROM fruits WHERE f_id = 'a1';
                                    </code>
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel panel-scrolling panel-danger">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="defineConditionsAndProcessingProceduresTips()">定义条件和处理程序 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <h4><i class="fa fa-anchor"></i><b>定义条件</b></h4>
                                <p class="firstLineIndent">定义条件使用DECLARE语句，语法格式如下：</p>
                                <code>DECLARE condition_name CONDITION FOR [CONDITION_TYPE]</code>
                                <hr>
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>关键字</th>
                                        <th>作用</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>condition_name</td>
                                        <td>表示条件的名称</td>
                                    </tr>
                                    <tr>
                                        <td>CONDITION_TYPE</td>
                                        <td class="tinyHand" onclick="defineConditionsConditionTypeTips()">表示条件的类型 <i class="fa fa-hand-pointer-o"></i></td>
                                    </tr>
                                    </tbody>
                                </table>
                                <p class="firstLineIndent">上述语句指定需要特殊处理的条件。它将一个名字和指定的错误条件关联起来。这个名字可以随后被用在定义处理程序的<span class="bold note">DECLARE HANDLER</span>语句中。</p>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例1：</b></h4>
                                <p class="firstLineIndent">定义"ERROR 1148(42000)"错误，名称为command_not_allowed：</p>
                                <pre>
                                    <code class="sql">
    -- 方法一：使用sqlstate_value
    DECLARE command_not_allowed CONDITION FOR SQLSTATE '42000';
    -- 方法二：使用mysql_error_code
    DECLARE command_not_allowed CONDITION FOR 1148;
                                    </code>
                                </pre>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>定义处理程序</b></h4>
                                <p class="firstLineIndent">定义处理程序时，使用DECLARE语句的语法如下：</p>
                                <code>DECLARE handler_type HANDLER FOR condition_value[,...] sp_statement;</code>
                                <hr>
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>关键字</th>
                                        <th>作用</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>handler_type</td>
                                        <td class="tinyHand" onclick="defineHandlerHandlerTypeTips()">为错误处理方式 <i class="fa fa-hand-pointer-o"></i></td>
                                    </tr>
                                    <tr>
                                        <td>condition_value</td>
                                        <td class="tinyHand" onclick="defineHandlerConditionValueTips()">表示错误类型 <i class="fa fa-hand-pointer-o"></i></td>
                                    </tr>
                                    <tr>
                                        <td>sp_statement</td>
                                        <td>为程序语句段，表示在遇到定义的错误时需要执行的存储过程或函数</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例1：</b></h4>
                                <p class="firstLineIndent">定义处理程序的几种方式，代码如下：</p>
                                <pre>
                                    <code class="sql">
    -- 方法一：捕获sqlstate_value
    DECLARE CONTINUE HANDLER FOR SQLSTATE '42S02' SET @info='NO_SUCH_TABLE';

    -- 方法二：捕获mysql_error_code
    DECLARE CONTINUE HANDLER FOR 1146 SET @info='NO_SUCH_TABLE';

    -- 方法三：先定义条件，然后调用
    DECLARE no_such_table CONDITION FOR 1146;
    DECLARE CONTINUE HANDLER FOR no_such_table SET @info='NO_SUCH_TABLE'

    -- 方法四：使用SQLWARNING
    DECLARE EXIT HANDLER FOR SQLWARNING SET @info='ERROR'

    -- 方法五：使用NOT FOUND
    DECLARE EXIT HANDLER FOR NOT FOUND SET @info='NO_SUCH_TABLE';

    -- 方法六：使用SQLEXCEPTION
    DECLARE EXIT HANDLER FOR SQLEXCEPTION SET @info='ERROR';
                                    </code>
                                </pre>
                                <table class="table table-hover">
                                    <tbody>
                                    <tr>
                                        <td>第一种方法是捕获sqlstate_value值。如果遇到sqlstate_value值为“42S02”，执行CONTINUE操作，并且输出“NO_SUCH_TABLE”信息</td>
                                    </tr>
                                    <tr>
                                        <td>第二种方法是捕获mysql_error_code值。如果遇到mysql_error_code值为1146，执行CONTINUE操作，并且输出“NO_SUCH_TABLE”信息</td>
                                    </tr>
                                    <tr>
                                        <td>第三种方法是先定义条件，再调用条件。这里先定义no_such_table条件，遇到1146错误就执行CONTINUE操作</td>
                                    </tr>
                                    <tr>
                                        <td>第四种方法是使用SQLWARNING。SQLWARNING捕获所有以01开头的sqlstate_value值，然后执行EXIT操作，并且输出“ERROR”信息</td>
                                    </tr>
                                    <tr>
                                        <td>第五种方法是使用NOT FOUND。NOT FOUND捕获所有以02开头的sqlstate_value值，然后执行EXIT操作，并且输出“NO_SUCH_TABLE”信息</td>
                                    </tr>
                                    <tr>
                                        <td>第六种方法是使用SQLEXCEPTION。SQLEXCEPTION捕获所有没有被SQLWARNING或NOT FOUND捕获的sqlstate_value值，然后执行EXIT操作，并且输出“ERROR”信息</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例2：</b></h4>
                                <p class="firstLineIndent">定义条件和处理程序，代码如下：</p>
                                <pre>
                                    <code class="sql">
    mysql> CREATE TABLE text_db.t (s1 int,primary key(s1));
    Query OK, 0 rows affected (0.00 sec)

    mysql> DELIMITER //
    mysql> CREATE PROCEDURE handlerDemo()
        -> BEGIN
        -> DECLARE CONTINUE HANDLER FOR SQLSTATE '23000' SET @x2 = 1;
        -> SET @x = 1;
        -> INSERT INTO test_db.t VALUES(1);
        -> SET @x = 2;
        -> INSERT INTO test_db.t VALUES(1);
        -> SET @x = 3;
        -> END;
        -> //
    Query OK, 0 rows affected (0.00 sec)

    mysql> DELIMITER ;
    mysql> CALL handlerDemo();
    Query OK, 0 rows affected (0.00 sec)

    mysql> SELECT @x;
    +-----+
    | @x  |
    +-----+
    |  3  |
    +-----+
                                    </code>
                                </pre>
                                <p class="firstLineIndent"><b>@x</b>是一个用户变量，执行结果@x等于3，这表明MySQL被执行到程序的末尾。如果<code>DECLARE CONTINUE HANDLER FOR SQLSTATE '23000' SET @x2 = 1;</code>这一行不存在，第二个INSERT因PRIMARY KEY强制而失败之后，MySQL可能已经采取默认（EXIT）路径，并且SELECT @x 可能已经返回2。</p>
                                <p class="firstLineIndent"><b>@var_name</b>表示用户变量，使用SET语句为其赋值，用户变量与连接有关，一个客户端定义的变量不能被其他客户端看到或使用。当客户端退出时，该客户端连接的所有变量将自动释放。</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel panel-scrolling panel-primary">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="useOfTheCursorTips()">光标的使用 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <h4><i class="fa fa-anchor"></i><b>声明光标：</b></h4>
                                <p class="firstLineIndent">在MySQL中，使用DECLARE关键字来声明光标，其语法的基本形式如下：</p>
                                <code>DECLARE cursor_name CURSOR FOR select_statement;</code>
                                <hr>
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>关键字</th>
                                        <th>作用</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>cursor_name</td>
                                        <td>表示光标的名称</td>
                                    </tr>
                                    <tr>
                                        <td>select_statement</td>
                                        <td>表示SELECT语句的内容，返回一个用于创建光标的结果集</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例1：</b></h4>
                                <p class="firstLineIndent">声明名称为cursor_fruit的光标，代码如下：</p>
                                <pre>
                                    <code class="sql">
    DECLARE cursor_fruit CURSOR FOR SELECT f_name, f_price FROM fruits;
                                    </code>
                                </pre>
                                <p class="firstLineIndent">在上面的示例中，光标的名称为cursor_fruit，SELECT语句部分从fruits表中查询出f_name和f_price字段的值。</p>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>打开光标：</b></h4>
                                <p class="firstLineIndent">打开光标的语法如下：</p>
                                <code>OPEN cursor_name;</code>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例1：</b></h4>
                                <p class="firstLineIndent">打开名称为cursor_fruit的光标，代码如下：</p>
                                <pre>
                                    <code class="sql">
    OPEN cursor_fruit;
                                    </code>
                                </pre>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>使用光标：</b></h4>
                                <p class="firstLineIndent">使用光标的语法如下：</p>
                                <code>FETCH cursor_name INTO var_name [,var_name] ...;</code>
                                <hr>
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>关键字</th>
                                        <th>作用</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>cursor_name</td>
                                        <td>表示光标的名称</td>
                                    </tr>
                                    <tr>
                                        <td>var_name</td>
                                        <td>表示将光标中的SELECT语句查询出来的信息存入该参数中，var_name必须在声明光标之前就定义好。</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例1：</b></h4>
                                <p class="firstLineIndent">使用名称为cursor_fruit的光标将查询出来的数据存入fruit_name和fruit_price这两个变量中，代码如下：</p>
                                <pre>
                                    <code class="sql">
    FETCH cursor_fruit INTO fruit_name, fruit_price;
                                    </code>
                                </pre>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>关闭光标：</b></h4>
                                <p class="firstLineIndent">关闭光标的语法如下：</p>
                                <code>CLOSE cursor_name;</code>
                                <p class="firstLineIndent">这个语句关闭先前打开的光标，如果未被明确地关闭，光标在它被声明的复合语句的末尾关闭。</p>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例1：</b></h4>
                                <p class="firstLineIndent">关闭名称为cursor_fruit的光标，代码如下：</p>
                                <pre>
                                    <code class="sql">
    CLOSE cursor_fruit;
                                    </code>
                                </pre>
                                <p class="firstLineIndent"><span class="bold note">注意：MySQL中光标只能在存储过程和函数中使用。</span></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel panel-success">
                            <div class="panel-heading">
                                <h3 class="panel-title tinyHand" onclick="useOfProcessControlTips()">流程控制的使用 <i class="fa fa-hand-pointer-o"></i></h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body">
                                <h4><i class="fa fa-anchor"></i><b>定义条件</b></h4>
                                <p class="firstLineIndent">定义条件使用DECLARE语句，语法格式如下：</p>
                                <code>DECLARE condition_name CONDITION FOR [CONDITION_TYPE]</code>
                                <hr>
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>关键字</th>
                                        <th>作用</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>condition_name</td>
                                        <td>表示条件的名称</td>
                                    </tr>
                                    <tr>
                                        <td>CONDITION_TYPE</td>
                                        <td class="tinyHand" onclick="defineConditionsConditionTypeTips()">表示条件的类型 <i class="fa fa-hand-pointer-o"></i></td>
                                    </tr>
                                    </tbody>
                                </table>
                                <p class="firstLineIndent">上述语句指定需要特殊处理的条件。它将一个名字和指定的错误条件关联起来。这个名字可以随后被用在定义处理程序的<span class="bold note">DECLARE HANDLER</span>语句中。</p>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例1：</b></h4>
                                <p class="firstLineIndent">定义"ERROR 1148(42000)"错误，名称为command_not_allowed：</p>
                                <pre>
                                    <code class="sql">
    -- 方法一：使用sqlstate_value
    DECLARE command_not_allowed CONDITION FOR SQLSTATE '42000';
    -- 方法二：使用mysql_error_code
    DECLARE command_not_allowed CONDITION FOR 1148;
                                    </code>
                                </pre>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>定义处理程序</b></h4>
                                <p class="firstLineIndent">定义处理程序时，使用DECLARE语句的语法如下：</p>
                                <code>DECLARE handler_type HANDLER FOR condition_value[,...] sp_statement;</code>
                                <hr>
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>关键字</th>
                                        <th>作用</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>handler_type</td>
                                        <td class="tinyHand" onclick="defineHandlerHandlerTypeTips()">为错误处理方式 <i class="fa fa-hand-pointer-o"></i></td>
                                    </tr>
                                    <tr>
                                        <td>condition_value</td>
                                        <td class="tinyHand" onclick="defineHandlerConditionValueTips()">表示错误类型 <i class="fa fa-hand-pointer-o"></i></td>
                                    </tr>
                                    <tr>
                                        <td>sp_statement</td>
                                        <td>为程序语句段，表示在遇到定义的错误时需要执行的存储过程或函数</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例1：</b></h4>
                                <p class="firstLineIndent">定义处理程序的几种方式，代码如下：</p>
                                <pre>
                                    <code class="sql">
    -- 方法一：捕获sqlstate_value
    DECLARE CONTINUE HANDLER FOR SQLSTATE '42S02' SET @info='NO_SUCH_TABLE';

    -- 方法二：捕获mysql_error_code
    DECLARE CONTINUE HANDLER FOR 1146 SET @info='NO_SUCH_TABLE';

    -- 方法三：先定义条件，然后调用
    DECLARE no_such_table CONDITION FOR 1146;
    DECLARE CONTINUE HANDLER FOR no_such_table SET @info='NO_SUCH_TABLE'

    -- 方法四：使用SQLWARNING
    DECLARE EXIT HANDLER FOR SQLWARNING SET @info='ERROR'

    -- 方法五：使用NOT FOUND
    DECLARE EXIT HANDLER FOR NOT FOUND SET @info='NO_SUCH_TABLE';

    -- 方法六：使用SQLEXCEPTION
    DECLARE EXIT HANDLER FOR SQLEXCEPTION SET @info='ERROR';
                                    </code>
                                </pre>
                                <table class="table table-hover">
                                    <tbody>
                                    <tr>
                                        <td>第一种方法是捕获sqlstate_value值。如果遇到sqlstate_value值为“42S02”，执行CONTINUE操作，并且输出“NO_SUCH_TABLE”信息</td>
                                    </tr>
                                    <tr>
                                        <td>第二种方法是捕获mysql_error_code值。如果遇到mysql_error_code值为1146，执行CONTINUE操作，并且输出“NO_SUCH_TABLE”信息</td>
                                    </tr>
                                    <tr>
                                        <td>第三种方法是先定义条件，再调用条件。这里先定义no_such_table条件，遇到1146错误就执行CONTINUE操作</td>
                                    </tr>
                                    <tr>
                                        <td>第四种方法是使用SQLWARNING。SQLWARNING捕获所有以01开头的sqlstate_value值，然后执行EXIT操作，并且输出“ERROR”信息</td>
                                    </tr>
                                    <tr>
                                        <td>第五种方法是使用NOT FOUND。NOT FOUND捕获所有以02开头的sqlstate_value值，然后执行EXIT操作，并且输出“NO_SUCH_TABLE”信息</td>
                                    </tr>
                                    <tr>
                                        <td>第六种方法是使用SQLEXCEPTION。SQLEXCEPTION捕获所有没有被SQLWARNING或NOT FOUND捕获的sqlstate_value值，然后执行EXIT操作，并且输出“ERROR”信息</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <hr>
                                <h4><i class="fa fa-anchor"></i><b>示例2：</b></h4>
                                <p class="firstLineIndent">定义条件和处理程序，代码如下：</p>
                                <pre>
                                    <code class="sql">
    mysql> CREATE TABLE text_db.t (s1 int,primary key(s1));
    Query OK, 0 rows affected (0.00 sec)

    mysql> DELIMITER //
    mysql> CREATE PROCEDURE handlerDemo()
        -> BEGIN
        -> DECLARE CONTINUE HANDLER FOR SQLSTATE '23000' SET @x2 = 1;
        -> SET @x = 1;
        -> INSERT INTO test_db.t VALUES(1);
        -> SET @x = 2;
        -> INSERT INTO test_db.t VALUES(1);
        -> SET @x = 3;
        -> END;
        -> //
    Query OK, 0 rows affected (0.00 sec)

    mysql> DELIMITER ;
    mysql> CALL handlerDemo();
    Query OK, 0 rows affected (0.00 sec)

    mysql> SELECT @x;
    +-----+
    | @x  |
    +-----+
    |  3  |
    +-----+
                                    </code>
                                </pre>
                                <p class="firstLineIndent"><b>@x</b>是一个用户变量，执行结果@x等于3，这表明MySQL被执行到程序的末尾。如果<code>DECLARE CONTINUE HANDLER FOR SQLSTATE '23000' SET @x2 = 1;</code>这一行不存在，第二个INSERT因PRIMARY KEY强制而失败之后，MySQL可能已经采取默认（EXIT）路径，并且SELECT @x 可能已经返回2。</p>
                                <p class="firstLineIndent"><b>@var_name</b>表示用户变量，使用SET语句为其赋值，用户变量与连接有关，一个客户端定义的变量不能被其他客户端看到或使用。当客户端退出时，该客户端连接的所有变量将自动释放。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END MAIN CONTENT -->
    </div>
    <!-- END MAIN -->
    <div class="clearfix"></div>
    <footer>
        <div class="container-fluid">
            <p class="copyright">Copyright &copy; https://github.com/KevenPotter/KevenPotterInterview <a href="https://github.com/KevenPotter/KevenPotterInterview" target="_blank" title="KevenPotter">KevenPotter</a> - Collect from <a href="https://github.com/KevenPotter" title="Github"
                                                                                                                                                                                                                                          target="_blank">KevenPotter主页</a></p>
        </div>
    </footer>
</div>
<!-- END WRAPPER -->

<!-- 创建存储过程和函数的提示 -->
<div id="create_stored_procedure_and_function_panel_title_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">创建存储过程和函数</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">
            存储程序可以分为<span class="note">存储过程</span>和<span class="note">存储函数</span>。在MySQL中，创建存储过程和函数使用的语句分别是<code>CREATE PROCEDURE</code>和<code>CREATE FUNCTION</code>。使用<code>CALL</code>语句来调用存储过程，只能用输出变量返回值。存储函数可以从语句外调用（引用函数名），也能返回标量值。存储过程也可以调用其他存储过程。
        </p>
    </div>
</div>

<!-- 创建存储过程-proc_parameter提示 -->
<div id="create_procedure_proc_parameter_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">proc_parameter形式</h3>
    </div>
    <div class="panel-body">
        <code>[ IN | OUT | INOUT ] param_name TYPE</code>
        <hr>
        <table class="table table-hover">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>[ IN | OUT | INOUT ]</td>
                <td>分别表示输入参数、输出参数、输入输出参数</td>
            </tr>
            <tr>
                <td>param_name</td>
                <td>参数名称</td>
            </tr>
            <tr>
                <td>TYPE</td>
                <td>参数类型，该类型可以是MySQL数据库中的任意类型</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 创建存储过程-characteristics提示 -->
<div id="create_procedure_and_function_characteristics_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">characteristics形式</h3>
    </div>
    <div class="panel-body">
        <table class="table table-hover">
            <thead>
            <tr>
                <th>特性</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>LANGUAGE SQL</td>
                <td>说明routine_body部分是由SQL语句组成的，当前系统支持的语言为SQL。SQL是LANGUAGE特性的唯一值</td>
            </tr>
            <tr>
                <td>[NOT] DETERMINISTIC</td>
                <td>
                    指明存储过程执行的结果是否正确。
                    <ul>
                        <li>DETERMINISTIC表示结果是确定的。每次执行存储过程时，相同的输入会得到相同的输出</li>
                        <li>NOT DETERMINISTIC表示结果是不确定的，相同的输入可能得到不同的输出</li>
                    </ul>
                    如果没有指定任意一个值，默认为NOT DETERMINISTIC
                </td>
            </tr>
            <tr>
                <td>
                    &nbsp;<br/>
                    {CONTAINS SQL}<br/>
                    {NO SQL}<br/>
                    {READS SQL DATA}<br/>
                    {MODIFIES SQL DATA}
                </td>
                <td>
                    指明子程序使用SQL语句的限制。默认情况下，系统会指定为CONTAINS SQL
                    <ul>
                        <li>CONTAINS SQL：表明子程序包含SQL语句，但是不包含读写数据的语句</li>
                        <li>NO SQL：表明子程序不包含SQL语句</li>
                        <li>READS SQL DATA：表明子程序包含读数据的语句</li>
                        <li>MODIFIES SQL DATA：表明子程序包含写数据的语句</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>
                    &nbsp;<br/>
                    SQL SECURITY {DEFINER}<br/>
                    SQL SECURITY {INVOKER}
                </td>
                <td>
                    指明谁有权限来执行。默认情况下，系统指定为DEFINER
                    <ul>
                        <li>DEFINER表示只有定义者才能执行</li>
                        <li>INVOKER表示拥有权限的调用者可以执行</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>COMMENT 'string'</td>
                <td>注释信息，可以用来描述存储过程或函数</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 创建存储函数-func_parameter提示 -->
<div id="create_function_func_parameter_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">func_parameter形式</h3>
    </div>
    <div class="panel-body">
        <code>[ IN | OUT | INOUT ] param_name TYPE</code>
        <hr>
        <table class="table table-hover">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>[ IN | OUT | INOUT ]</td>
                <td>分别表示输入参数、输出参数、输入输出参数</td>
            </tr>
            <tr>
                <td>param_name</td>
                <td>参数名称</td>
            </tr>
            <tr>
                <td>TYPE</td>
                <td>参数类型，该类型可以是MySQL数据库中的任意类型</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 变量赋值提示 -->
<div id="variable_assignment_set_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">SET语句</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">在存储程序中的SET语句是一般SET语句的扩展版本。被参考变量可能是<b>子程序内声明的变量</b>，或者是<b>全局服务器变量</b>，如系统变量或者用户变量。</p>
        <p class="firstLineIndent">在存储程序中的SET语句作为预先存在的SET语法的一部分来实现，允许<code>SET a=x,b=y,...</code>这样的扩展语法。其中，不同的变量类型（局域变量和全局变量）可以被混合起来。这也允许把局部变量和一些只对系统变量有意义的选项合并起来。</p>
    </div>
</div>

<!-- 定义条件和处理程序提示 -->
<div id="define_conditions_and_processing_procedures_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">定义条件和处理程序</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent"><span class="note">特定条件需要特定处理</span>。这些条件可以联系到错误以及子程序中的一般流程控制。</p>
        <p class="firstLineIndent"><span class="note">定义条件</span>是事先定义程序执行过程中遇到的问题。</p>
        <p class="firstLineIndent"><span class="note">处理程序</span>定义了在遇到这些问题时应当采取的处理方式，并且保证存储过程或函数在遇到警告或错误时能继续执行。</p>
        <p class="firstLineIndent">这样可以增强存储程序处理问题的能力，避免程序异常停止运行。</p>
    </div>
</div>

<!-- 定义条件-condition_type提示 -->
<div id="define_conditions_condition_type_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">condition_type</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">sqlstate_value和mysql_error_code都可以表示MySQL的错误：</p>
        <table class="table table-hover">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>SQLSTATE [VALUE] sqlstate_value</td>
                <td>为长度为5的字符串类型错误代码。<i>例如ERROR 1142(42000)中的42000</i></td>
            </tr>
            <tr>
                <td>mysql_error_code</td>
                <td>为数值类型错误代码。<i>例如ERROR 1142(42000)中的1142</i></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 定义处理程序-handler_type提示 -->
<div id="define_handler_handler_type_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">handler_type</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">sqlstate_value和mysql_error_code都可以表示MySQL的错误：</p>
        <table class="table table-hover">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>CONTINUE</td>
                <td>表示遇到错误不处理，继续执行</td>
            </tr>
            <tr>
                <td>EXIT</td>
                <td>表示遇到错误马上退出</td>
            </tr>
            <tr>
                <td>UNDO</td>
                <td>表示遇到错误后撤回之前的操作，<span class="note">MySQL中暂时不支持这样的操作</span></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 定义处理程序-condition_value提示 -->
<div id="define_handler_condition_value_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">condition_value</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">sqlstate_value和mysql_error_code都可以表示MySQL的错误：</p>
        <table class="table table-hover">
            <thead>
            <tr>
                <th>参数</th>
                <th>作用</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>SQLSTATE [VALUE] sqlstate_value</td>
                <td>包含5个字符的字符串错误值</td>
            </tr>
            <tr>
                <td>condition_name</td>
                <td>表示DECLARE CONDITION定义的错误条件名称</td>
            </tr>
            <tr>
                <td>SQLWARNING</td>
                <td>匹配所有以01开头的SQLSTATE错误代码</td>
            </tr>
            <tr>
                <td>NOT FOUND</td>
                <td>匹配所有以02开头的SQLSTATE错误代码</td>
            </tr>
            <tr>
                <td>SQLEXCEPTION</td>
                <td>匹配所有没有被SQLWARNING或NOT FOUND捕获的SQLSTATE错误代码</td>
            </tr>
            <tr>
                <td>mysql_error_code</td>
                <td>匹配数值类型错误代码</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 光标的使用提示 -->
<div id="use_of_the_cursor_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">光标的使用</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">查询语句可能返回多条记录，如果数据量非常大，需要在存储过程和存储函数中使用光标来逐条读取查询结果集中的记录。应用程序可以根据需要滚动或浏览其中的数据。</p>
        <p class="firstLineIndent"><span class="bold note">光标必须在声明处理程序之前被声明，并且变量和条件还必须在声明光标或处理程序之前被声明。</span></p>
    </div>
</div>

<!-- 流程控制的使用提示 -->
<div id="use_of_process_control_tips" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">流程控制的使用</h3>
    </div>
    <div class="panel-body">
        <p class="firstLineIndent">查询语句可能返回多条记录，如果数据量非常大，需要在存储过程和存储函数中使用光标来逐条读取查询结果集中的记录。应用程序可以根据需要滚动或浏览其中的数据。</p>
        <p class="firstLineIndent"><span class="bold note">光标必须在声明处理程序之前被声明，并且变量和条件还必须在声明光标或处理程序之前被声明。</span></p>
    </div>
</div>

<!-- CUSTOM JAVASCRIPT -->
<script type="text/javascript" src="../../../assets/scripts/common-method.js"></script>
<script type="text/javascript" src="../../../assets/scripts/base.js"></script>
<script type="text/javascript" src="../../../assets/scripts/responseStatusCode.js"></script>
<script type="text/javascript" src="../../../assets/scripts/mysql/mysql-advanced-knowledge/mysql-advanced-knowledge-stored-procedure.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>

</html>
